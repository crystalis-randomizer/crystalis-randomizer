import { Entity } from './entity.js';
import { readLittleEndian, readLengthDelimitedString } from './util.js';
import { Constraint } from './constraint.js';
import { Expr } from '../asm/expr.js';
export class ObjectData extends Entity {
    constructor(parent, id, defaultDisplayName = '') {
        super(parent.rom, id);
        this.constraint = Constraint.ALL;
        parent[id] = this;
        this.used = true;
        this.name = '';
        if (parent.rom.writeMonsterNames) {
            const addr = this.rom.prg[0x7a000 | id] |
                (this.rom.prg[0x7a100 | id] << 8) |
                0x70000;
            this.displayName = readLengthDelimitedString(this.rom.prg, addr);
        }
        else {
            this.displayName = defaultDisplayName;
        }
        this.base = readLittleEndian(this.rom.prg, this.pointer) + 0x10000;
        this.sfx = this.rom.prg[this.base];
        this.data = [];
        let a = this.base + 1;
        let m = 0;
        for (let i = 0; i < 32; i++) {
            if (!(i & 7)) {
                m = this.rom.prg[a++];
            }
            this.data.push(m & 0x80 ? this.rom.prg[a++] : 0);
            m <<= 1;
        }
    }
    get pointer() {
        return 0x1ac00 + (this.id << 1);
    }
    serialize() {
        const out = [this.sfx];
        for (let i = 0; i < 4; i++) {
            const k = out.length;
            out.push(0);
            for (let j = 0; j < 8; j++) {
                if (this.data[8 * i + j]) {
                    out[k] |= (0x80 >>> j);
                    out.push(this.data[8 * i + j]);
                }
            }
        }
        return out;
    }
    write() {
        const name = `Object_${this.id.toString(16).padStart(2, '0')}`;
        const a = this.rom.assembler();
        a.segment('0d');
        a.reloc(name);
        const label = a.pc();
        a.byte(...this.serialize());
        a.org(0xac00 + (this.id << 1), `${name}_Ptr`);
        a.word(label);
        if (this === this.rom.objects.blueSlime) {
            let e = this.elements;
            let b = 0;
            while (e) {
                e >>= 1;
                b++;
            }
            a.segment('1a');
            a.org(0x922d);
            a.byte(b);
        }
        if (this.rom.writeMonsterNames) {
            a.segment('3d');
            let addr;
            if (this.displayName) {
                const name = `${this.name}_Str`;
                a.reloc(name);
                addr = a.pc();
                a.byte(this.displayName.length);
                a.byte(...this.displayName);
            }
            a.org(0xa000 | this.id);
            a.byte(addr != null ? Expr.loByte(addr) : 0);
            a.org(0xa100 | this.id);
            a.byte(addr != null ? Expr.hiByte(addr) : 0);
        }
        return [a.module()];
    }
    get(addr) {
        return this.data[(addr - 0x300) >>> 5];
    }
    parents() {
        return [];
    }
    spawnedChild() {
        var _a;
        const hasChild = (_a = this.rom.objectActions[this.action]) === null || _a === void 0 ? void 0 : _a.data.hasChild;
        if (!hasChild)
            return undefined;
        const spawn = this.rom.adHocSpawns[this.child];
        const spawnId = spawn && spawn.objectId;
        if (spawnId == null)
            return undefined;
        return this.rom.objects[spawnId];
    }
    spawnedReplacement() {
        if (!this.replacement)
            return undefined;
        return this.rom.objects[this.replacement];
    }
    locations() {
        return this.rom.locations.filter((l) => l.used && l.spawns.some(spawn => spawn.isMonster() && spawn.monsterId === this.id));
    }
    palettes(includeChildren = false) {
        var _a, _b;
        if (this.action === 0x22)
            return [3];
        let metaspriteId = this.data[0];
        if (this.action === 0x2a)
            metaspriteId = this.data[31] | 1;
        if (this.action === 0x29)
            metaspriteId = 0x6b;
        if (this.action === 0x26)
            metaspriteId = 0x9c;
        const ms = this.rom.metasprites[metaspriteId];
        const childMs = includeChildren && this.child ?
            this.rom.metasprites[this.rom.objects[this.rom.adHocSpawns[this.child].objectId].data[0]] :
            null;
        const s = new Set([...((_a = ms === null || ms === void 0 ? void 0 : ms.palettes()) !== null && _a !== void 0 ? _a : []),
            ...((_b = childMs === null || childMs === void 0 ? void 0 : childMs.palettes()) !== null && _b !== void 0 ? _b : [])]);
        return [...s];
    }
    isVulnerable(element) {
        return !(this.elements & (1 << element));
    }
    isShadow() {
        return this.id === 0x7b || this.id === 0x8c;
    }
    get metasprite() { return METASPRITE.get(this.data); }
    set metasprite(x) { METASPRITE.set(this.data, x); }
    get speed() { return SPEED.get(this.data); }
    set speed(x) { SPEED.set(this.data, x); }
    get collisionPlane() { return COLLISION_PLANE.get(this.data); }
    set collisionPlane(x) { COLLISION_PLANE.set(this.data, x); }
    get hitbox() { return HITBOX.get(this.data); }
    set hitbox(x) { HITBOX.set(this.data, x); }
    get hp() { return HP.get(this.data); }
    set hp(x) { HP.set(this.data, x); }
    get atk() { return ATK.get(this.data); }
    set atk(x) { ATK.set(this.data, x); }
    get def() { return DEF.get(this.data); }
    set def(x) { DEF.set(this.data, x); }
    get level() { return LEVEL.get(this.data); }
    set level(x) { LEVEL.set(this.data, x); }
    get poison() { return !!POISON.get(this.data); }
    set poison(x) { POISON.set(this.data, x ? 1 : 0); }
    get child() { return CHILD.get(this.data); }
    set child(x) { CHILD.set(this.data, x); }
    get terrainSusceptibility() { return TERRAIN_SUSCEPTIBILITY.get(this.data); }
    set terrainSusceptibility(x) { TERRAIN_SUSCEPTIBILITY.set(this.data, x); }
    get immobile() { return !!IMMOBILE.get(this.data); }
    set immobile(x) { IMMOBILE.set(this.data, x ? 1 : 0); }
    get action() { return ACTION.get(this.data); }
    set action(x) { ACTION.set(this.data, x); }
    get replacement() { return REPLACEMENT.get(this.data); }
    set replacement(x) { REPLACEMENT.set(this.data, x); }
    get goldDrop() { return GOLD_DROP.get(this.data); }
    set goldDrop(x) { GOLD_DROP.set(this.data, x); }
    get elements() { return ELEMENTS.get(this.data); }
    set elements(x) { ELEMENTS.set(this.data, x); }
    get expReward() { return EXP_REWARD.get(this.data); }
    set expReward(x) { EXP_REWARD.set(this.data, x); }
    get attackType() { return ATTACK_TYPE.get(this.data); }
    set attackType(x) { ATTACK_TYPE.set(this.data, x); }
    get statusEffect() { return STATUS_EFFECT.get(this.data); }
    set statusEffect(x) { STATUS_EFFECT.set(this.data, x); }
    toString() {
        return super.toString() + (this.name ? ' ' + this.name : '');
    }
}
function prop(...spec) {
    return new Stat(...spec);
}
class Stat {
    constructor(...spec) {
        this.spec = spec;
    }
    get(data) {
        let value = 0;
        for (const [addr, mask = 0xff, shift = 0] of this.spec) {
            const index = (addr - 0x300) >>> 5;
            const lsh = shift < 0 ? -shift : 0;
            const rsh = shift < 0 ? 0 : shift;
            value |= ((data[index] & mask) >>> rsh) << lsh;
        }
        return value;
    }
    set(data, value) {
        for (const [addr, mask = 0xff, shift = 0] of this.spec) {
            const index = (addr - 0x300) >>> 5;
            const lsh = shift < 0 ? -shift : 0;
            const rsh = shift < 0 ? 0 : shift;
            const v = (value >>> lsh) << rsh & mask;
            data[index] = data[index] & ~mask | v;
        }
    }
}
const METASPRITE = prop([0x300]);
const SPEED = prop([0x340, 0xf]);
const COLLISION_PLANE = prop([0x3a0, 0xf0, 4]);
const HITBOX = prop([0x420, 0x40, 2], [0x3a0, 0x0f]);
const HP = prop([0x3c0]);
const ATK = prop([0x3e0]);
const DEF = prop([0x400]);
const LEVEL = prop([0x420, 0x1f]);
const POISON = prop([0x420, 0x80, 7]);
const CHILD = prop([0x440]);
const TERRAIN_SUSCEPTIBILITY = prop([0x460]);
const IMMOBILE = prop([0x4a0, 0x80, 7]);
const ACTION = prop([0x4a0, 0x7f]);
const REPLACEMENT = prop([0x4c0]);
const GOLD_DROP = prop([0x500, 0xf0, 4]);
const ELEMENTS = prop([0x500, 0xf]);
const EXP_REWARD = prop([0x520]);
const ATTACK_TYPE = prop([0x540]);
const STATUS_EFFECT = prop([0x560, 0xf]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0ZGF0YS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9yb20vb2JqZWN0ZGF0YS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRXJDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSx5QkFBeUIsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN4RSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFN0MsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBR3RDLE1BQU0sT0FBTyxVQUFXLFNBQVEsTUFBTTtJQWFwQyxZQUFZLE1BQWUsRUFBRSxFQUFVLEVBQUUscUJBQTJCLEVBQUU7UUFDcEUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFIeEIsZUFBVSxHQUFlLFVBQVUsQ0FBQyxHQUFHLENBQUM7UUFJdEMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtZQUNoQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO2dCQUNuQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pDLE9BQU8sQ0FBQztZQUNaLElBQUksQ0FBQyxXQUFXLEdBQUcseUJBQXlCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDbEU7YUFBTTtZQUNMLElBQUksQ0FBQyxXQUFXLEdB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Q0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkUsSUFBSSxjQUFjLENBQUMsQ0FBUyxJQUFJLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFcEUsSUFBSSxNQUFNLEtBQWEsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEQsSUFBSSxNQUFNLENBQUMsQ0FBUyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbkQsSUFBSSxFQUFFLEtBQWEsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsSUFBSSxFQUFFLENBQUMsQ0FBUyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFM0MsSUFBSSxHQUFHLEtBQWEsT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEQsSUFBSSxHQUFHLENBQUMsQ0FBUyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFN0MsSUFBSSxHQUFHLEtBQWEsT0FBTyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEQsSUFBSSxHQUFHLENBQUMsQ0FBUyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFN0MsSUFBSSxLQUFLLEtBQWEsT0FBTyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEQsSUFBSSxLQUFLLENBQUMsQ0FBUyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFakQsSUFBSSxNQUFNLEtBQWMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pELElBQUksTUFBTSxDQUFDLENBQVUsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUU1RCxJQUFJLEtBQUssS0FBYSxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRCxJQUFJLEtBQUssQ0FBQyxDQUFTLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVqRCxJQUFJLHFCQUFxQixLQUFhLE9BQU8sc0JBQXNCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckYsSUFBSSxxQkFBcUIsQ0FBQyxDQUFTLElBQUksc0JBQXNCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxGLElBQUksUUFBUSxLQUFjLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3RCxJQUFJLFFBQVEsQ0FBQyxDQUFVLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFaEUsSUFBSSxNQUFNLEtBQWEsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdEQsSUFBSSxNQUFNLENBQUMsQ0FBUyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbkQsSUFBSSxXQUFXLEtBQWEsT0FBTyxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEUsSUFBSSxXQUFXLENBQUMsQ0FBUyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFN0QsSUFBSSxRQUFRLEtBQWEsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0QsSUFBSSxRQUFRLENBQUMsQ0FBUyxJQUFJLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFeEQsSUFBSSxRQUFRLEtBQWEsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUQsSUFBSSxRQUFRLENBQUMsQ0FBUyxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFHdkQsSUFBSSxTQUFTLEtBQWEsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0QsSUFBSSxTQUFTLENBQUMsQ0FBUyxJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FB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QUMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNqQyxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0MsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3JELE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDekIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMxQixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzFCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzVCLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDbkMsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNsQyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNqQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlIH0gZnJvbSAnLi4vYXNtL21vZHVsZS5qcyc7XG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL2VudGl0eS5qcyc7XG5pbXBvcnQgeyBMb2NhdGlvbiB9IGZyb20gJy4vbG9jYXRpb24uanMnO1xuaW1wb3J0IHsgcmVhZExpdHRsZUVuZGlhbiwgcmVhZExlbmd0aERlbGltaXRlZFN0cmluZyB9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgeyBDb25zdHJhaW50IH0gZnJvbSAnLi9jb25zdHJhaW50LmpzJztcbmltcG9ydCB0eXBlIHsgT2JqZWN0cyB9IGZyb20gJy4vb2JqZWN0cy5qcyc7XG5pbXBvcnQgeyBFeHByIH0gZnJvbSAnLi4vYXNtL2V4cHIuanMnO1xuXG4vLyBOT1RFOiBXb3VsZCBiZSBuaWNlIHRvIGNhbGwgdGhpcyBPYmplY3QsIGJ1dCB0aGF0IHNlZW1zIGNvbmZ1c2luZy4uLlxuZXhwb3J0IGNsYXNzIE9iamVjdERhdGEgZXh0ZW5kcyBFbnRpdHkge1xuXG4gIHVzZWQ6IGJvb2xlYW47XG4gIG5hbWU6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcblxuICBiYXNlOiBudW1iZXI7XG5cbiAgc2Z4OiBudW1iZXI7XG4gIGRhdGE6IG51bWJlcltdO1xuXG4gIGNvbnN0cmFpbnQ6IENvbnN0cmFpbnQgPSBDb25zdHJhaW50LkFMTDtcblxuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IE9iamVjdHMsIGlkOiBudW1iZXIsIGRlZmF1bHREaXNwbGF5TmFtZTogc3RyaW5nPScnKSB7XG4gICAgc3VwZXIocGFyZW50LnJvbSwgaWQpO1xuICAgIHBhcmVudFtpZF0gPSB0aGlzO1xuICAgIHRoaXMudXNlZCA9IHRydWU7XG4gICAgdGhpcy5uYW1lID0gJyc7XG4gICAgaWYgKHBhcmVudC5yb20ud3JpdGVNb25zdGVyTmFtZXMpIHtcbiAgICAgIGNvbnN0IGFkZHIgPSB0aGlzLnJvbS5wcmdbMHg3YTAwMCB8IGlkXSB8XG4gICAgICAgICAgKHRoaXMucm9tLnByZ1sweDdhMTAwIHwgaWRdIDw8IDgpIHxcbiAgICAgICAgICAweDcwMDAwO1xuICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHJlYWRMZW5ndGhEZWxpbWl0ZWRTdHJpbmcodGhpcy5yb20ucHJnLCBhZGRyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IGRlZmF1bHREaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgdGhpcy5iYXNlID0gcmVhZExpdHRsZUVuZGlhbih0aGlzLnJvbS5wcmcsIHRoaXMucG9pbnRlcikgKyAweDEwMDAwO1xuICAgIHRoaXMuc2Z4ID0gdGhpcy5yb20ucHJnW3RoaXMuYmFzZV07XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgbGV0IGEgPSB0aGlzLmJhc2UgKyAxO1xuICAgIGxldCBtID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgIGlmICghKGkgJiA3KSkge1xuICAgICAgICBtID0gdGhpcy5yb20ucHJnW2ErK107XG4gICAgICB9XG4gICAgICB0aGlzLmRhdGEucHVzaChtICYgMHg4MCA/IHRoaXMucm9tLnByZ1thKytdIDogMCk7XG4gICAgICBtIDw8PSAxO1xuICAgIH1cbiAgfVxuXG4gIGdldCBwb2ludGVyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDB4MWFjMDAgKyAodGhpcy5pZCA8PCAxKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBieXRlIGFycmF5IGZvciB0aGlzIGVudHJ5XG4gIHNlcmlhbGl6ZSgpOiBudW1iZXJbXSB7XG4gICAgY29uc3Qgb3V0ID0gW3RoaXMuc2Z4XTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgY29uc3QgayA9IG91dC5sZW5ndGg7XG4gICAgICBvdXQucHVzaCgwKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgODsgaisrKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGFbOCAqIGkgKyBqXSkge1xuICAgICAgICAgIG91dFtrXSB8PSAoMHg4MCA+Pj4gaik7XG4gICAgICAgICAgb3V0LnB1c2godGhpcy5kYXRhWzggKiBpICsgal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICB3cml0ZSh0aGlzOiBPYmplY3REYXRhKTogTW9kdWxlW10ge1xuICAgIGNvbnN0IG5hbWUgPSBgT2JqZWN0XyR7dGhpcy5pZC50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIGNvbnN0IGEgPSB0aGlzLnJvbS5hc3NlbWJsZXIoKTtcbiAgICBhLnNlZ21lbnQoJzBkJyk7XG4gICAgYS5yZWxvYyhuYW1lKTtcbiAgICBjb25zdCBsYWJlbCA9IGEucGMoKTtcbiAgICBhLmJ5dGUoLi4udGhpcy5zZXJpYWxpemUoKSk7XG4gICAgYS5vcmcoMHhhYzAwICsgKHRoaXMuaWQgPDwgMSksIGAke25hbWV9X1B0cmApO1xuICAgIGEud29yZChsYWJlbCk7XG5cbiAgICAvLyBIYW5kbGUgc2xpbWUgdHJhbnNmb3JtYXRpb24uICBXZSBhc3N1bWUgYWxsIHNsaW1lcyBhcmUgaW52dWxuZXJhYmxlXG4gICAgLy8gdG8gdGhlIHNhbWUgZWxlbWVudCAocmVzY2FsZW1vbnN0ZXJzIGd1YXJhbnRlZXMgdGhpcywgYW55d2F5KS5cbiAgICBpZiAodGhpcyA9PT0gdGhpcy5yb20ub2JqZWN0cy5ibHVlU2xpbWUpIHtcbiAgICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggYml0IGlzIHNldCAoZWxlbWVudHMgPSAxPDwoYi0xKSlcbiAgICAgIC8vIE5vdGUgdGhlIGV4dHJhIG9mZnNldCBpcyBkdWUgdG8gMCBiZWluZyBcIm5vIHN3b3JkIGVxdWlwcGVkXCJcbiAgICAgIGxldCBlID0gdGhpcy5lbGVtZW50cztcbiAgICAgIGxldCBiID0gMDtcbiAgICAgIHdoaWxlIChlKSB7XG4gICAgICAgIGUgPj49IDE7XG4gICAgICAgIGIrKztcbiAgICAgIH1cbiAgICAgIGEuc2VnbWVudCgnMWEnKTtcbiAgICAgIGEub3JnKDB4OTIyZCk7IC8vICQzNTIyZFxuICAgICAgYS5ieXRlKGIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJvbS53cml0ZU1vbnN0ZXJOYW1lcykge1xuICAgICAgYS5zZWdtZW50KCczZCcpO1xuICAgICAgbGV0IGFkZHIhOiBFeHByfHVuZGVmaW5lZDsgXG4gICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7dGhpcy5uYW1lfV9TdHJgO1xuICAgICAgICBhLnJlbG9jKG5hbWUpO1xuICAgICAgICBhZGRyID0gYS5wYygpO1xuICAgICAgICBhLmJ5dGUodGhpcy5kaXNwbGF5TmFtZS5sZW5ndGgpO1xuICAgICAgICBhLmJ5dGUoLi4udGhpcy5kaXNwbGF5TmFtZSk7XG4gICAgICB9XG4gICAgICBhLm9yZygweGEwMDAgfCB0aGlzLmlkKTsgLy8gRW5lbXlOYW1lVGFibGVMb1xuICAgICAgYS5ieXRlKGFkZHIgIT0gbnVsbCA/IEV4cHIubG9CeXRlKGFkZHIpIDogMCk7XG4gICAgICBhLm9yZygweGExMDAgfCB0aGlzLmlkKTsgLy8gRW5lbXlOYW1lVGFibGVIaVxuICAgICAgYS5ieXRlKGFkZHIgIT0gbnVsbCA/IEV4cHIuaGlCeXRlKGFkZHIpIDogMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFthLm1vZHVsZSgpXTtcbiAgfVxuXG4gIGdldChhZGRyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmRhdGFbKGFkZHIgLSAweDMwMCkgPj4+IDVdO1xuICB9XG5cbiAgcGFyZW50cygpOiBPYmplY3REYXRhW10ge1xuICAgIC8vIElmIHRoaXMgaXMgYSBwcm9qZWN0aWxlIHRoYXQgaXMgdGhlIHBhcmVudCBvZiBzb21lIG1vbnN0ZXIsXG4gICAgLy8gcmV0dXJuIGFuIGFycmF5IG9mIHBhcmVudHMgdGhhdCBzcGF3bmVkIGl0LlxuICAgIHJldHVybiBbXTtcbiAgICAvLyByZXR1cm4gdGhpcy5yb20ubW9uc3RlcnMuZmlsdGVyKFxuICAgIC8vICAgICAobTogT2JqZWN0RGF0YSkgPT4gbS5jaGlsZCAmJlxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb20uYWRIb2NTcGF3bnNbbS5jaGlsZF0ub2JqZWN0SWQgPT09IHRoaXMuaWQpO1xuICB9XG5cbiAgc3Bhd25lZENoaWxkKCk6IE9iamVjdERhdGF8dW5kZWZpbmVkIHtcbiAgICBjb25zdCBoYXNDaGlsZCA9IHRoaXMucm9tLm9iamVjdEFjdGlvbnNbdGhpcy5hY3Rpb25dPy5kYXRhLmhhc0NoaWxkO1xuICAgIGlmICghaGFzQ2hpbGQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3Bhd24gPSB0aGlzLnJvbS5hZEhvY1NwYXduc1t0aGlzLmNoaWxkXTtcbiAgICBjb25zdCBzcGF3bklkID0gc3Bhd24gJiYgc3Bhd24ub2JqZWN0SWQ7XG4gICAgaWYgKHNwYXduSWQgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gdGhpcy5yb20ub2JqZWN0c1tzcGF3bklkXTtcbiAgfVxuXG4gIHNwYXduZWRSZXBsYWNlbWVudCgpOiBPYmplY3REYXRhfHVuZGVmaW5lZCB7XG4gICAgaWYgKCF0aGlzLnJlcGxhY2VtZW50KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGlzLnJvbS5vYmplY3RzW3RoaXMucmVwbGFjZW1lbnRdO1xuICB9XG5cbiAgbG9jYXRpb25zKCk6IExvY2F0aW9uW10ge1xuICAgIC8vIFRPRE8gLSBoYW5kbGUgbm9uLW1vbnN0ZXIgTlBDcy5cbiAgICByZXR1cm4gdGhpcy5yb20ubG9jYXRpb25zLmZpbHRlcigobDogTG9jYXRpb24pID0+XG4gICAgICAgIGwudXNlZCAmJiBsLnNwYXducy5zb21lKHNwYXduID0+XG4gICAgICAgICAgICBzcGF3bi5pc01vbnN0ZXIoKSAmJiBzcGF3bi5tb25zdGVySWQgPT09IHRoaXMuaWQpKTtcbiAgfVxuXG4gIHBhbGV0dGVzKGluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlKTogbnVtYmVyW10ge1xuICAgIC8vIE5PVEU6IHRoaXMgZ2V0cyB0aGUgd3JvbmcgcmVzdWx0IGZvciBpY2Uvc2FuZCB6b21iaWVzIGFuZCBibG9icy5cbiAgICAvLyAgLSBtYXkganVzdCBuZWVkIHRvIGd1ZXNzL2Fzc3VtZSBhbmQgZXhwZXJpbWVudD9cbiAgICAvLyAgLSB6b21iaWVzIChhY3Rpb24gMHgyMikgbG9vayBsaWtlIHNob3VsZCBqdXN0IGJlIDNcbiAgICAvLyAgLSBsYXZhbWVuL2Jsb2JzIChhY3Rpb24gMHgyOSkgYXJlIDJcbiAgICAvLyAgLSB3cmFpdGggc2hhZG93cyAoYWN0aW9uIDB4MjYpIGFyZSAzXG4gICAgaWYgKHRoaXMuYWN0aW9uID09PSAweDIyKSByZXR1cm4gWzNdOyAvLyB6b21iaWVcbiAgICBsZXQgbWV0YXNwcml0ZUlkID0gdGhpcy5kYXRhWzBdO1xuICAgIGlmICh0aGlzLmFjdGlvbiA9PT0gMHgyYSkgbWV0YXNwcml0ZUlkID0gdGhpcy5kYXRhWzMxXSB8IDE7XG4gICAgaWYgKHRoaXMuYWN0aW9uID09PSAweDI5KSBtZXRhc3ByaXRlSWQgPSAweDZiOyAvLyBibG9iXG4gICAgaWYgKHRoaXMuYWN0aW9uID09PSAweDI2KSBtZXRhc3ByaXRlSWQgPSAweDljO1xuXG4gICAgY29uc3QgbXMgPSB0aGlzLnJvbS5tZXRhc3ByaXRlc1ttZXRhc3ByaXRlSWRdO1xuICAgIGNvbnN0IGNoaWxkTXMgPVxuICAgICAgICBpbmNsdWRlQ2hpbGRyZW4gJiYgdGhpcy5jaGlsZCA/XG4gICAgICAgICAgICB0aGlzLnJvbS5tZXRhc3ByaXRlc1tcbiAgICAgICAgICAgICAgICB0aGlzLnJvbS5vYmplY3RzW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvbS5hZEhvY1NwYXduc1t0aGlzLmNoaWxkXS5vYmplY3RJZF0uZGF0YVswXV0gOlxuICAgICAgICAgICAgbnVsbDtcbiAgICBjb25zdCBzID0gbmV3IFNldChbLi4uKG1zPy5wYWxldHRlcygpID8/IFtdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNoaWxkTXM/LnBhbGV0dGVzKCkgPz8gW10pXSk7XG4gICAgcmV0dXJuIFsuLi5zXTtcbiAgfVxuXG4gIC8vIDAgZm9yIHdpbmQsIDEgZm9yIGZpcmUsIDIgZm9yIHdhdGVyLCAzIGZvciB0aHVuZGVyXG4gIGlzVnVsbmVyYWJsZShlbGVtZW50OiBudW1iZXIpIHtcbiAgICByZXR1cm4gISh0aGlzLmVsZW1lbnRzICYgKDEgPDwgZWxlbWVudCkpO1xuICB9XG5cbiAgaXNTaGFkb3coKSB7XG4gICAgLy8gTk9URTogaW50ZXJuYWxseSB0aGUgZ2FtZSBjaGVja3MgdGhhdCB0aGUgbWV0YXNwcml0ZVxuICAgIC8vIGlzICRhNyAoc2VlICQzNTBmMyksIGJ1dCB3ZSdsbCBqdXN0IGhhcmRjb2RlLlxuICAgIHJldHVybiB0aGlzLmlkID09PSAweDdiIHx8IHRoaXMuaWQgPT09IDB4OGM7XG4gIH1cblxuICBnZXQgbWV0YXNwcml0ZSgpOiBudW1iZXIgeyByZXR1cm4gTUVUQVNQUklURS5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgbWV0YXNwcml0ZSh4OiBudW1iZXIpIHsgTUVUQVNQUklURS5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBzcGVlZCgpOiBudW1iZXIgeyByZXR1cm4gU1BFRUQuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IHNwZWVkKHg6IG51bWJlcikgeyBTUEVFRC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBjb2xsaXNpb25QbGFuZSgpOiBudW1iZXIgeyByZXR1cm4gQ09MTElTSU9OX1BMQU5FLmdldCh0aGlzLmRhdGEpOyB9XG4gIHNldCBjb2xsaXNpb25QbGFuZSh4OiBudW1iZXIpIHsgQ09MTElTSU9OX1BMQU5FLnNldCh0aGlzLmRhdGEsIHgpOyB9XG5cbiAgZ2V0IGhpdGJveCgpOiBudW1iZXIgeyByZXR1cm4gSElUQk9YLmdldCh0aGlzLmRhdGEpOyB9XG4gIHNldCBoaXRib3goeDogbnVtYmVyKSB7IEhJVEJPWC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBocCgpOiBudW1iZXIgeyByZXR1cm4gSFAuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IGhwKHg6IG51bWJlcikgeyBIUC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBhdGsoKTogbnVtYmVyIHsgcmV0dXJuIEFUSy5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgYXRrKHg6IG51bWJlcikgeyBBVEsuc2V0KHRoaXMuZGF0YSwgeCk7IH1cblxuICBnZXQgZGVmKCk6IG51bWJlciB7IHJldHVybiBERUYuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IGRlZih4OiBudW1iZXIpIHsgREVGLnNldCh0aGlzLmRhdGEsIHgpOyB9XG5cbiAgZ2V0IGxldmVsKCk6IG51bWJlciB7IHJldHVybiBMRVZFTC5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgbGV2ZWwoeDogbnVtYmVyKSB7IExFVkVMLnNldCh0aGlzLmRhdGEsIHgpOyB9XG5cbiAgZ2V0IHBvaXNvbigpOiBib29sZWFuIHsgcmV0dXJuICEhUE9JU09OLmdldCh0aGlzLmRhdGEpOyB9XG4gIHNldCBwb2lzb24oeDogYm9vbGVhbikgeyBQT0lTT04uc2V0KHRoaXMuZGF0YSwgeCA/IDEgOiAwKTsgfVxuXG4gIGdldCBjaGlsZCgpOiBudW1iZXIgeyByZXR1cm4gQ0hJTEQuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IGNoaWxkKHg6IG51bWJlcikgeyBDSElMRC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCB0ZXJyYWluU3VzY2VwdGliaWxpdHkoKTogbnVtYmVyIHsgcmV0dXJuIFRFUlJBSU5fU1VTQ0VQVElCSUxJVFkuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IHRlcnJhaW5TdXNjZXB0aWJpbGl0eSh4OiBudW1iZXIpIHsgVEVSUkFJTl9TVVNDRVBUSUJJTElUWS5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBpbW1vYmlsZSgpOiBib29sZWFuIHsgcmV0dXJuICEhSU1NT0JJTEUuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IGltbW9iaWxlKHg6IGJvb2xlYW4pIHsgSU1NT0JJTEUuc2V0KHRoaXMuZGF0YSwgeCA/IDEgOiAwKTsgfVxuXG4gIGdldCBhY3Rpb24oKTogbnVtYmVyIHsgcmV0dXJuIEFDVElPTi5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgYWN0aW9uKHg6IG51bWJlcikgeyBBQ1RJT04uc2V0KHRoaXMuZGF0YSwgeCk7IH1cblxuICBnZXQgcmVwbGFjZW1lbnQoKTogbnVtYmVyIHsgcmV0dXJuIFJFUExBQ0VNRU5ULmdldCh0aGlzLmRhdGEpOyB9XG4gIHNldCByZXBsYWNlbWVudCh4OiBudW1iZXIpIHsgUkVQTEFDRU1FTlQuc2V0KHRoaXMuZGF0YSwgeCk7IH1cblxuICBnZXQgZ29sZERyb3AoKTogbnVtYmVyIHsgcmV0dXJuIEdPTERfRFJPUC5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgZ29sZERyb3AoeDogbnVtYmVyKSB7IEdPTERfRFJPUC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBlbGVtZW50cygpOiBudW1iZXIgeyByZXR1cm4gRUxFTUVOVFMuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IGVsZW1lbnRzKHg6IG51bWJlcikgeyBFTEVNRU5UUy5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIC8qKiBVbnByb2Nlc3NlZCBleHBlcmllbmNlIHJld2FyZCAoJDUyMCx4KS4gKi9cbiAgZ2V0IGV4cFJld2FyZCgpOiBudW1iZXIgeyByZXR1cm4gRVhQX1JFV0FSRC5nZXQodGhpcy5kYXRhKTsgfVxuICBzZXQgZXhwUmV3YXJkKHg6IG51bWJlcikgeyBFWFBfUkVXQVJELnNldCh0aGlzLmRhdGEsIHgpOyB9XG5cbiAgZ2V0IGF0dGFja1R5cGUoKTogbnVtYmVyIHsgcmV0dXJuIEFUVEFDS19UWVBFLmdldCh0aGlzLmRhdGEpOyB9XG4gIHNldCBhdHRhY2tUeXBlKHg6IG51bWJlcikgeyBBVFRBQ0tfVFlQRS5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIGdldCBzdGF0dXNFZmZlY3QoKTogbnVtYmVyIHsgcmV0dXJuIFNUQVRVU19FRkZFQ1QuZ2V0KHRoaXMuZGF0YSk7IH1cbiAgc2V0IHN0YXR1c0VmZmVjdCh4OiBudW1iZXIpIHsgU1RBVFVTX0VGRkVDVC5zZXQodGhpcy5kYXRhLCB4KTsgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBzdXBlci50b1N0cmluZygpICsgKHRoaXMubmFtZSA/ICcgJyArIHRoaXMubmFtZSA6ICcnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9wKC4uLnNwZWM6IFtudW1iZXIsIG51bWJlcj8sIG51bWJlcj9dW10pIHtcbiAgcmV0dXJuIG5ldyBTdGF0KC4uLnNwZWMpO1xufVxuXG5jbGFzcyBTdGF0IHtcbiAgcmVhZG9ubHkgc3BlYzogW251bWJlciwgbnVtYmVyPywgbnVtYmVyP11bXTtcblxuICBjb25zdHJ1Y3RvciguLi5zcGVjOiBbbnVtYmVyLCBudW1iZXI/LCBudW1iZXI/XVtdKSB7XG4gICAgdGhpcy5zcGVjID0gc3BlYztcbiAgfVxuXG4gIGdldChkYXRhOiBudW1iZXJbXSkge1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgZm9yIChjb25zdCBbYWRkciwgbWFzayA9IDB4ZmYsIHNoaWZ0ID0gMF0gb2YgdGhpcy5zcGVjKSB7XG4gICAgICBjb25zdCBpbmRleCA9IChhZGRyIC0gMHgzMDApID4+PiA1O1xuICAgICAgY29uc3QgbHNoID0gc2hpZnQgPCAwID8gLXNoaWZ0IDogMDtcbiAgICAgIGNvbnN0IHJzaCA9IHNoaWZ0IDwgMCA/IDAgOiBzaGlmdDtcbiAgICAgIHZhbHVlIHw9ICgoZGF0YVtpbmRleF0gJiBtYXNrKSA+Pj4gcnNoKSA8PCBsc2g7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHNldChkYXRhOiBudW1iZXJbXSwgdmFsdWU6IG51bWJlcikge1xuICAgIGZvciAoY29uc3QgW2FkZHIsIG1hc2sgPSAweGZmLCBzaGlmdCA9IDBdIG9mIHRoaXMuc3BlYykge1xuICAgICAgY29uc3QgaW5kZXggPSAoYWRkciAtIDB4MzAwKSA+Pj4gNTtcbiAgICAgIGNvbnN0IGxzaCA9IHNoaWZ0IDwgMCA/IC1zaGlmdCA6IDA7XG4gICAgICBjb25zdCByc2ggPSBzaGlmdCA8IDAgPyAwIDogc2hpZnQ7XG4gICAgICBjb25zdCB2ID0gKHZhbHVlID4+PiBsc2gpIDw8IHJzaCAmIG1hc2s7XG4gICAgICBkYXRhW2luZGV4XSA9IGRhdGFbaW5kZXhdICYgfm1hc2sgfCB2O1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBNRVRBU1BSSVRFID0gcHJvcChbMHgzMDBdKTtcbmNvbnN0IFNQRUVEID0gcHJvcChbMHgzNDAsIDB4Zl0pO1xuY29uc3QgQ09MTElTSU9OX1BMQU5FID0gcHJvcChbMHgzYTAsIDB4ZjAsIDRdKTtcbmNvbnN0IEhJVEJPWCA9IHByb3AoWzB4NDIwLCAweDQwLCAyXSwgWzB4M2EwLCAweDBmXSk7XG5jb25zdCBIUCA9IHByb3AoWzB4M2MwXSk7XG5jb25zdCBBVEsgPSBwcm9wKFsweDNlMF0pO1xuY29uc3QgREVGID0gcHJvcChbMHg0MDBdKTtcbmNvbnN0IExFVkVMID0gcHJvcChbMHg0MjAsIDB4MWZdKTtcbmNvbnN0IFBPSVNPTiA9IHByb3AoWzB4NDIwLCAweDgwLCA3XSk7XG5jb25zdCBDSElMRCA9IHByb3AoWzB4NDQwXSk7IC8vIGFkLWhvYyBzcGF3biBpbmRleFxuY29uc3QgVEVSUkFJTl9TVVNDRVBUSUJJTElUWSA9IHByb3AoWzB4NDYwXSk7XG5jb25zdCBJTU1PQklMRSA9IHByb3AoWzB4NGEwLCAweDgwLCA3XSk7IC8vIHdpbGwgbm90IGJlIGtub2NrZWQgYmFja1xuY29uc3QgQUNUSU9OID0gcHJvcChbMHg0YTAsIDB4N2ZdKTtcbmNvbnN0IFJFUExBQ0VNRU5UID0gcHJvcChbMHg0YzBdKTtcbmNvbnN0IEdPTERfRFJPUCA9IHByb3AoWzB4NTAwLCAweGYwLCA0XSk7XG5jb25zdCBFTEVNRU5UUyA9IHByb3AoWzB4NTAwLCAweGZdKTtcbmNvbnN0IEVYUF9SRVdBUkQgPSBwcm9wKFsweDUyMF0pO1xuY29uc3QgQVRUQUNLX1RZUEUgPSBwcm9wKFsweDU0MF0pO1xuY29uc3QgU1RBVFVTX0VGRkVDVCA9IHByb3AoWzB4NTYwLCAweGZdKTtcbiJdfQ==