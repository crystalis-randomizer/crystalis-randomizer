import { Spawn } from '../rom/location.js';
import { MessageId } from '../rom/messageid.js';
import { GlobalDialog, LocalDialog } from '../rom/npc.js';
import { ShopType } from '../rom/shop.js';
import { hex } from '../rom/util.js';
import { assert } from '../util.js';
import { Monster } from '../rom/monster.js';
import { Patterns } from '../rom/pattern.js';
const [] = [hex];
function write(arr, start, ...data) {
    let j = start;
    let i = 0;
    let value;
    while ((value = data[i++]) != null) {
        if (typeof value === 'number') {
            arr[j++] = value;
        }
        else if (typeof value === 'string') {
            for (const c of value) {
                arr[j++] = c.charCodeAt(0);
            }
        }
        else {
            throw new Error('bad data');
        }
    }
}
export function deterministicPreParse(prg) {
    prg[0x1a594] = 0xff;
    prg[0x1cdc5] = 0xa8;
    prg[0x1a176] = 0xff;
    prg[0x1a84c] = 0xff;
    prg[0x1d843] = 0xa0;
    prg[0x1e06b] &= 7;
    prg[0x1e06f] &= 7;
    prg[0x1e073] &= 7;
    prg[0x1e077] &= 7;
    prg[0x1e07b] &= 7;
    prg[0x1e084] &= 7;
    prg[0x1e09b] &= 7;
    prg[0x1e0b9] &= 7;
    prg[0x1e105] = 0x2f;
    prg[0x1e277] = 0x00;
    prg[0x1e366] = 0x40;
    prg[0x1e371] = 0x00;
    prg[0x1e387] = 0x00;
    prg[0x1e391] = 0x00;
    write(prg, 0x1a168, 0x33, 0x33);
    write(prg, 0x1a48e, 0x33, 0x33);
    prg[0x19bb1] = 0x70;
    prg[0x19bb5] = 0x71;
    prg[0x19a77] = 0x72;
    prg[0x19deb] = 0x73;
    prg[0x1a045] = 0x74;
    prg[0x1a0e1] = 0x75;
    prg[0x1a0e5] = 0x76;
    prg[0x1a0e9] = 0x77;
    prg[0x1a605] = 0x78;
    prg[0x1a3c1] = 0x79;
    prg[0x1a3c5] = 0x7a;
    prg[0x1a3c9] = 0x7b;
    write(prg, 0x1e0b7, 0xc0, 0x00);
    write(prg, 0x1e32a, 0xc0, 0x00);
    write(prg, 0x1e330, 0xc0, 0x00);
    write(prg, 0x1e336, 0xc0, 0x00);
    write(prg, 0x1e0e0, 0xc0, 0x00);
    write(prg, 0x1e0e6, 0xc0, 0x00);
    prg[0x1c803] = 0x00;
    write(prg, 0x1c80d, 0xa2, 0xb3);
    prg[0x1aa86] = 0xfe;
    write(prg, 0x3d6d5, 0x25, 0x29, 0x39, 0x3a, 0x3b, 0x47, 0x3c, 0x3e, 0x84, 0x46, 0xb2, 0x42, 0xb4, 0x41, 0xff);
    for (const addr of [0x38757, 0x38777, 0x3877b, 0x38797, 0x3879b,
        0x387db, 0x387df, 0x387fb, 0x387ff, 0x3881b, 0x3881f,
        0x38865, 0x38885, 0x38889, 0x388a5]) {
        prg[addr] |= 1;
    }
    write(prg, 0x2656e, "Simea", 0x10, 0, "     ", 0x10, 0);
}
export function deterministic(rom, flags) {
    addZombieWarp(rom);
    removeWarpTriggers(rom);
    consolidateItemGrants(rom);
    addMezameTrigger(rom);
    normalizeSwords(rom, flags);
    fixFlyableWalls(rom);
    fixMonsterTerrain(rom);
    fixCrystalis(rom);
    fixOpelStatue(rom);
    fixCoinSprites(rom);
    fixChests(rom);
    preventBossSoftlocks(rom);
    makeBraceletsProgressive(rom);
    adjustGoaFortressTriggers(rom);
    preventNpcDespawns(rom, flags);
    leafElderInSabreHeals(rom);
    if (flags.requireHealedDolphinToRide())
        requireHealedDolphin(rom);
    if (flags.saharaRabbitsRequireTelepathy())
        requireTelepathyForDeo(rom);
    adjustItemNames(rom, flags);
    alarmFluteIsKeyItem(rom, flags);
    brokahanaWantsMado1(rom);
    if (flags.teleportOnThunderSword()) {
        teleportOnThunderSword(rom);
        rom.townWarp.thunderSwordWarp = [rom.locations.Shyron.id, 0x41];
    }
    else {
        noTeleportOnThunderSword(rom);
    }
    undergroundChannelLandBridge(rom);
    if (flags.fogLampNotRequired())
        fogLampNotRequired(rom, flags);
    evilSpiritIslandRequiresDolphin(rom);
    simplifyInvisibleChests(rom);
    addCordelWestTriggers(rom, flags);
    if (flags.disableRabbitSkip())
        fixRabbitSkip(rom);
    if (flags.disableFlightStatueSkip())
        fixFlightStatueSkip(rom);
    if (flags.disableRageSkip())
        patchLimeTreeLake(rom);
    fixReverseWalls(rom);
    if (flags.chargeShotsOnly())
        disableStabs(rom);
    if (flags.orbsOptional())
        orbsOptional(rom);
    if (flags.noBowMode())
        noBowMode(rom);
    patchTooManyItemsMessage(rom);
    if (flags.hardcoreMode())
        hardcoreMode(rom);
    if (flags.shouldUpdateHud())
        useNewStatusBarGraphics(rom);
    if (flags.shouldColorSwordElements())
        useElementSwordColors(rom);
}
function useElementSwordColors(rom) {
    function swapTiles(start, thunder) {
        for (let addr = 0; addr <= 0xa; addr++) {
            if (addr === 8)
                continue;
            const p = rom.patterns.get(addr | start);
            const orig = [...p.pixels];
            for (let i = 0; i < p.pixels.length; i++) {
                p.pixels[i] = orig[i ^ 8];
                if ((i >>> 3) === thunder)
                    p.pixels[i] |= orig[i];
            }
        }
    }
    swapTiles(0x1090);
    swapTiles(0x10d0);
    swapTiles(0x1110);
    swapTiles(0x1150);
    swapTiles(0x1190);
}
function useNewStatusBarGraphics(rom) {
    const page = 0x38 << 6;
    rom.patterns.set(page, 0x0, Patterns.HUD_LF);
    rom.patterns.set(page, 0x1, Patterns.HUD_PW);
    rom.patterns.set(page, 0x2, Patterns.HUD_EY);
    rom.patterns.set(page, 0x3, Patterns.HUD_LV);
    rom.patterns.set(page, 0x4, Patterns.HUD_DL);
    rom.patterns.set(page, 0x5, Patterns.HUD_MP);
    rom.patterns.set(page, 0x6, Patterns.HUD_EX);
    rom.patterns.set(page, 0x1a, Patterns.HUD_CLOSE_LEFT);
    rom.patterns.set(page, 0x1b, Patterns.HUD_CLOSE_RIGHT);
}
function consolidateItemGrants(rom) {
    rom.items.GlowingLamp.itemUseData[0].message.action = 0x0b;
}
function addMezameTrigger(rom) {
    const trigger = rom.nextFreeTrigger('mezame');
    trigger.used = true;
    trigger.conditions = [~rom.flags.AlwaysTrue.id];
    trigger.message = MessageId.of({ action: 4 });
    trigger.flags = [rom.flags.AlwaysTrue.id];
    const mezame = rom.locations.MezameShrine;
    mezame.spawns.push(Spawn.of({ tile: 0x88, type: 2, id: trigger.id }));
}
function removeWarpTriggers(rom) {
    const warpTriggers = new Set([
        0x81,
        0x8b,
        0x90,
        0x99,
        0xa6,
        0xa7,
        0xa8,
        0xa9,
        0xaa,
        0xab,
        0xac,
        rom.allocatedTriggers.get('zombie warp'),
    ]);
    for (const location of rom.locations) {
        if (!location.used)
            continue;
        location.spawns = location.spawns.filter(spawn => !spawn.isTrigger() || !warpTriggers.has(spawn.id));
    }
}
function normalizeSwords(rom, flags) {
    rom.objects[0x10].atk = 3;
    rom.objects[0x11].atk = 6;
    rom.objects[0x12].atk = 8;
    rom.objects[0x18].atk = 3;
    rom.objects[0x13].atk = 5;
    rom.objects[0x19].atk = 5;
    rom.objects[0x17].atk = 7;
    rom.objects[0x1a].atk = 7;
    rom.objects[0x14].atk = 3;
    rom.objects[0x15].atk = 6;
    rom.objects[0x16].atk = 8;
    rom.objects[0x1c].atk = 3;
    rom.objects[0x1d].atk = 3;
    rom.objects[0x1e].atk = 5;
    rom.objects[0x1b].atk = 7;
    rom.objects[0x1f].atk = 7;
    if (flags.slowDownTornado()) {
        const tornado = rom.objects[0x12];
        tornado.speed = 0x07;
        tornado.data[0x0c] = 0x60;
    }
}
function preventBossSoftlocks(rom) {
    const trigger = rom.trigger(0xa0);
    trigger.used = true;
    trigger.conditions = [];
    trigger.flags = [];
    trigger.message = MessageId.of({ part: 0, index: 0, action: 0x15 });
    rom.objects[0x5e].data[0xd] = 0xfe;
    rom.items.InsectFlute.itemUseData[0].flags = [rom.flags.UsedInsectFlute.id];
}
function fixOpelStatue(rom) {
    rom.items.OpelStatue.selectedItemValue = 0;
}
function fixCoinSprites(rom) {
    for (const page of [0x60, 0x64, 0x65, 0x66, 0x67, 0x68,
        0x69, 0x6a, 0x6b, 0x6c, 0x6d, 0x6f]) {
        for (const pat of [0, 1, 2]) {
            rom.patterns.set(page << 6, pat, rom.patterns.get(0x5e << 6, pat).pixels);
        }
    }
    rom.objects[0x0c].metasprite = 0xa9;
}
function fixReverseWalls(rom) {
    for (const t in [0x04, 0x05, 0x08, 0x09]) {
        rom.tileEffects[0xbc - 0xb3].effects[t] = 0x18;
        rom.tileEffects[0xb5 - 0xb3].effects[t] = 0x18;
    }
}
function undergroundChannelLandBridge(rom) {
    const { tiles } = rom.screens[0xa1];
    tiles[0x28] = 0x9f;
    tiles[0x37] = 0x23;
    tiles[0x38] = 0x23;
    tiles[0x39] = 0x21;
    tiles[0x47] = 0x8d;
    tiles[0x48] = 0x8f;
    tiles[0x56] = 0x99;
    tiles[0x57] = 0x9a;
    tiles[0x58] = 0x8c;
}
function fogLampNotRequired(rom, flags) {
    const { flags: { AlwaysTrue, InjuredDolphin, FogLamp, KensuInCabin, ReturnedFogLamp }, items: { ShellFlute }, locations: { BoatHouse, Portoa_FishermanHouse }, npcs, } = rom;
    const requireHealed = flags.requireHealedDolphinToRide();
    ShellFlute.itemUseData[0].want =
        requireHealed ? InjuredDolphin.id : AlwaysTrue.id;
    npcs.KensuInCabin.data[0] = 0x67;
    npcs.KensuInCabin.localDialogs.get(-1)[0].message.action = 0x0a;
    npcs.KensuInCabin.localDialogs.get(-1)[0].flags = [];
    npcs.KensuInCabin.spawnConditions.set(BoatHouse.id, [ReturnedFogLamp.id, ~KensuInCabin.id]);
    npcs.Fisherman.spawnConditions.set(Portoa_FishermanHouse.id, [FogLamp.id]);
    rom.itemGets[0x64].flags = [];
    rom.itemGets[0x67].copyFrom(rom.itemGets[0x64]);
}
function fixChests(rom) {
    for (const loc of rom.locations) {
        for (const s of loc.spawns) {
            if (s.isChest())
                s.timed = false;
        }
    }
}
function adjustGoaFortressTriggers(rom) {
    const l = rom.locations;
    l.GoaFortress_Kelbesque.spawns[0].x -= 16;
    l.GoaFortress_Zebu.spawns.splice(1, 1);
    l.GoaFortress_Tornel.spawns.splice(2, 1);
    l.GoaFortress_Asina.spawns.splice(2, 1);
    l.GoaFortress_Kensu.spawns.splice(3, 1);
    l.GoaFortress_Kensu.spawns.splice(1, 1);
}
function alarmFluteIsKeyItem(rom, flags) {
    const { items: { AlarmFlute }, flags: { TalkedToZebuStudent, ZebuStudent }, locations: { MezameShrine, Leaf_StudentHouse, WaterfallCave4, ZebuCave }, npcs: { WindmillGuard, Zebu }, } = rom;
    rom.itemGets[0x31].inventoryRowStart = 0x20;
    AlarmFlute.unique = true;
    AlarmFlute.basePrice = 0;
    if (flags.zebuStudentGivesItem()) {
        WindmillGuard.data[1] = 0x31;
    }
    else {
        WindmillGuard.data[1] = 0xff;
        const dialog = WindmillGuard.dialog(Leaf_StudentHouse)[0];
        dialog.condition = ~TalkedToZebuStudent.id;
        dialog.flags.push(TalkedToZebuStudent.id);
        replace(Zebu.spawns(ZebuCave), ZebuStudent.id, TalkedToZebuStudent.id);
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x9b, type: 2, id: 0x31 }));
        MezameShrine.spawns.push(Spawn.of({ screen: 0, tile: 0x95, type: 2, id: 0x49 }));
        rom.itemGets[0x49].itemId = rom.items.MedicalHerb.id;
    }
    const replacements = [
        [0x21, 0.72],
        [0x1f, 0.9],
    ];
    let j = 0;
    for (const shop of rom.shops) {
        if (shop.type !== ShopType.TOOL)
            continue;
        for (let i = 0, len = shop.contents.length; i < len; i++) {
            if (shop.contents[i] !== 0x31)
                continue;
            const [item, priceRatio] = replacements[(j++) % replacements.length];
            shop.contents[i] = item;
            if (rom.shopDataTablesAddress) {
                shop.prices[i] = Math.round(shop.prices[i] * priceRatio);
            }
        }
    }
    rom.itemGets[0x5b].itemId = 0x1d;
    WaterfallCave4.spawn(0x19).id = 0x10;
}
function brokahanaWantsMado1(rom) {
    const { flags: { Karmine, Mado1 }, npcs: { Brokahana } } = rom;
    const dialog = assert(Brokahana.localDialogs.get(-1))[0];
    if (dialog.condition !== ~Karmine.id) {
        throw new Error(`Bad brokahana condition: ${dialog.condition}`);
    }
    dialog.condition = ~Mado1.id;
}
function requireHealedDolphin(rom) {
    const { flags: { InjuredDolphin, ShellFlute }, npcs: { Fisherman, FishermanDaughter }, } = rom;
    Fisherman.spawnConditions.set(0xd6, [ShellFlute.id, InjuredDolphin.id]);
    const daughterDialog = FishermanDaughter.localDialogs.get(-1);
    daughterDialog.unshift(daughterDialog[0].clone());
    daughterDialog[0].condition = ~InjuredDolphin.id;
    daughterDialog[1].condition = ~ShellFlute.id;
}
function requireTelepathyForDeo(rom) {
    const { flags: { Telepathy }, npcs: { Deo, SaharaBunny }, } = rom;
    SaharaBunny.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x12]));
    Deo.globalDialogs.push(GlobalDialog.of(~Telepathy.id, [0x1a, 0x13]));
}
function teleportOnThunderSword(rom) {
    const { flags: { WarpShyron }, } = rom;
    rom.itemGets[0x03].flags.push(WarpShyron.id);
}
function noTeleportOnThunderSword(rom) {
    rom.itemGets[0x03].acquisitionAction.action = 0x16;
}
function adjustItemNames(rom, flags) {
    if (flags.leatherBootsGiveSpeed()) {
        const leatherBoots = rom.items[0x2f];
        leatherBoots.menuName = 'Speed Boots';
        leatherBoots.messageName = 'Speed Boots';
        if (flags.changeGasMaskToHazmatSuit()) {
            const gasMask = rom.items[0x29];
            gasMask.menuName = 'Hazmat Suit';
            gasMask.messageName = 'Hazmat Suit';
        }
    }
    for (let i = 0x05; i < 0x0c; i += 2) {
        rom.items[i].menuName = rom.items[i].menuName.replace('Ball', 'Orb');
        rom.items[i].messageName = rom.items[i].messageName.replace('Ball', 'Orb');
    }
}
function makeBraceletsProgressive(rom) {
    const { flags: { BallOfWind, TornadoBracelet }, npcs: { Tornel }, } = rom;
    const vanilla = Tornel.localDialogs.get(0x21);
    const patched = [
        vanilla[0],
        vanilla[2],
        vanilla[2].clone(),
        vanilla[1],
    ];
    patched[1].condition = ~TornadoBracelet.id;
    patched[2].condition = ~BallOfWind.id;
    patched[3].condition = ~0;
    Tornel.localDialogs.set(0x21, patched);
}
function simplifyInvisibleChests(rom) {
    const { CordelPlainEast, KirisaMeadow, UndergroundChannel } = rom.locations;
    for (const location of [CordelPlainEast, KirisaMeadow, UndergroundChannel]) {
        for (const spawn of location.spawns) {
            if (spawn.isChest())
                spawn.data[2] |= 0x20;
        }
    }
}
function addCordelWestTriggers(rom, flags) {
    const { CordelPlainEast, CordelPlainWest } = rom.locations;
    for (const spawn of CordelPlainEast.spawns) {
        if (spawn.isChest() || (flags.disableTeleportSkip() && spawn.isTrigger())) {
            CordelPlainWest.spawns.push(spawn.clone());
        }
    }
}
function fixRabbitSkip(rom) {
    for (const spawn of rom.locations.MtSabreNorth_Main.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x86) {
            if (spawn.x === 0x740) {
                spawn.x += 16;
                spawn.y += 16;
            }
        }
    }
}
function fixFlightStatueSkip(rom) {
    const oldHitbox = rom.hitboxes[rom.objects.guardianStatueMissile.hitbox];
    const newHitbox = rom.hitboxes[6];
    rom.objects.guardianStatueMissile.hitbox = newHitbox.id;
    newHitbox.x0 = oldHitbox.x0 - 6;
    newHitbox.w = oldHitbox.w + 12;
    newHitbox.y0 = oldHitbox.y0 - 2;
    newHitbox.h = oldHitbox.h + 4;
}
function patchTooManyItemsMessage(rom) {
    rom.messages.parts[0x20][0x0f].text += '\nItem: [:ITEM:]';
}
function addZombieWarp(rom) {
    const { flags: { WarpZombie }, locations: { ZombieTown }, } = rom;
    rom.flags.insertZombieWarpFlag();
    const message = rom.messages.parts[0x21][0];
    message.text = [
        ' {1a:Leaf}      {16:Brynmaer} {1d:Oak} ',
        '{0c:Nadare}\'s  {1e:Portoa}   {14:Amazones} ',
        '{19:Joel}      Zombie   {20:Swan} ',
        '{23:Shyron}    {18:Goa}      {21:Sahara}',
    ].join('\n');
    const trigger = rom.nextFreeTrigger('zombie warp');
    trigger.used = true;
    trigger.conditions = [];
    trigger.message = MessageId.of({});
    trigger.flags = [WarpZombie.id];
    for (const spawn of ZombieTown.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8a)
            spawn.id = trigger.id;
    }
    rom.townWarp.locations.splice(7, 0, ZombieTown.id);
    if (rom.townWarp.locations.pop() !== 0xff)
        throw new Error('unexpected');
}
function evilSpiritIslandRequiresDolphin(rom) {
    rom.trigger(0x8a).conditions = [~rom.flags.CurrentlyRidingDolphin.id];
    rom.messages.parts[0x1d][0x10].text = `The cave entrance appears
to be underwater. You'll
need to swim.`;
}
function leafElderInSabreHeals(rom) {
    const leafElder = rom.npcs[0x0d];
    const summitDialog = leafElder.localDialogs.get(0x35)[0];
    summitDialog.message.action = 0x17;
}
function patchLimeTreeLake(rom) {
    rom.metatilesets.lime.getTile(0x7c).setEffects(6);
    rom.metatilesets.lime.getTile(0x7f).setEffects(6);
    rom.metatilesets.lime.getTile(0x7b).setTiles([0x7f, 0x7f, 0x7f, 0x7f])
        .setAttrs(0).setEffects(6);
    rom.screens[0x74].set2d(0x90, [
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
        [0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, null, null,
            0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b, 0x7b],
    ]);
}
function preventNpcDespawns(rom, opts) {
    function remove(arr, elem) {
        const index = arr.indexOf(elem);
        if (index < 0)
            throw new Error(`Could not find element ${elem} in ${arr}`);
        arr.splice(index, 1);
    }
    function removeIf(arr, pred) {
        const index = arr.findIndex(pred);
        if (index < 0)
            throw new Error(`Could not find element in ${arr}`);
        arr.splice(index, 1);
    }
    const { locations: { BoatHouse, Brynmaer, Crypt_Draygon2, Joel_Shed, Leaf_ElderHouse, MtSabreNorth_SummitCave, MtSabreWest_Upper, PortoaPalace_ThroneRoom, Portoa_PalaceEntrance, Portoa_AsinaRoom, Portoa_FortuneTeller, Shyron_Temple, StomHouse, Swan_DanceHall, Swan_Tavern, WindmillCave, WaterfallCave4, WaterfallValleyNorth, ZebuCave, ZombieTown_HouseBasement, }, items: { GlowingLamp, KeyToPrison, LovePendant, StatueOfOnyx, }, npcs: { Akahana, AkahanaInBrynmaer, Asina, AztecaInShyron, Clark, Draygon, FortuneTeller, Kensu, KensuInCabin, KensuInSwan, LeafElder, LeafRabbit, OakChild, OakElder, OakMother, PortoaPalaceFrontGuard, PortoaQueen, PortoaThroneRoomBackDoorGuard, Rage, Stom, StonedAkahana, Tornel, WindmillGuard, Zebu, }, flags, } = rom;
    Kensu.localDialogs.delete(Swan_Tavern.id);
    KensuInSwan.link(Kensu.id);
    KensuInSwan.used = true;
    KensuInSwan.data = [...Kensu.data];
    Kensu.data[0] = GlowingLamp.id;
    Swan_DanceHall.spawns.find(s => s.isNpc() && s.id === Kensu.id).id =
        KensuInSwan.id;
    LovePendant.itemUseData[0].want = 0x100 | KensuInSwan.id;
    StonedAkahana.linkDialog(Akahana.id);
    AkahanaInBrynmaer.used = true;
    AkahanaInBrynmaer.link(Akahana.id);
    AkahanaInBrynmaer.data = [...Akahana.data];
    Brynmaer.spawns.find(s => s.isNpc() && s.id === Akahana.id).id =
        AkahanaInBrynmaer.id;
    StatueOfOnyx.itemUseData[0].want = 0x100 | AkahanaInBrynmaer.id;
    LeafElder.dialog(Leaf_ElderHouse)
        .splice(0, 0, ...LeafElder.dialog(Leaf_ElderHouse).splice(2, 1));
    LeafRabbit.dialog()[2].condition = flags.RescuedLeafElder.id;
    LeafRabbit.dialog()[2].flags.push(flags.TalkedToLeafRabbit.id);
    LeafRabbit.dialog()[3].flags.push(flags.TalkedToLeafRabbit.id);
    WindmillGuard.spawns(WindmillCave)[1] =
        ~flags.WindmillGuardAlarmFluteTradein.id;
    remove(Akahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    remove(StonedAkahana.spawns(WaterfallCave4), ~flags.BehindWhirlpool.id);
    function reverseDialog(ds) {
        ds.reverse();
        for (let i = 0; i < ds.length; i++) {
            const next = ds[i + 1];
            ds[i].condition = next ? ~next.condition : ~0;
        }
    }
    ;
    for (let i = 0; i < 4; i++) {
        const dlg = OakElder.dialog()[i];
        if (dlg.condition !== rom.flags.OakElder.id)
            dlg.message.action = 0x03;
    }
    (() => {
        const [killedInsect, gotItem, getItem, findChild] = OakMother.dialog();
        findChild.condition = ~flags.RescuedChild.id;
        gotItem.condition = ~0;
        OakMother.dialog().splice(0, 4, findChild, getItem, killedInsect, gotItem);
    })();
    for (const i of [0x20, 0x21, 0x22, 0x7c, 0x7d]) {
        reverseDialog(rom.npcs[i].dialog());
    }
    OakChild.dialog().unshift(...OakChild.dialog().splice(1, 1));
    PortoaThroneRoomBackDoorGuard.spawnConditions.set(PortoaPalace_ThroneRoom.id, [~flags.QueenNotInThroneRoom.id, ~flags.MesiaRecording.id]);
    PortoaPalaceFrontGuard.dialog()[1].condition = flags.MesiaRecording.id;
    PortoaQueen.dialog()[3].condition = flags.SwordOfWater.id;
    PortoaQueen.dialog()[3].message.action = 0x03;
    PortoaQueen.dialog()[4].flags.push(flags.PortoaQueenGoingAway.id);
    PortoaQueen.spawns(PortoaPalace_ThroneRoom)[1] = ~flags.MesiaRecording.id;
    PortoaQueen.spawns(Portoa_AsinaRoom)[0] = flags.MesiaRecording.id;
    PortoaQueen.dialog()[1].condition = flags.MesiaRecording.id;
    FortuneTeller.spawns(Portoa_FortuneTeller)[1] = ~flags.MesiaRecording.id;
    Clark.spawnConditions.set(ZombieTown_HouseBasement.id, [~flags.Clark.id]);
    Clark.spawnConditions.set(Joel_Shed.id, [flags.Clark.id]);
    Zebu.localDialogs.set(ZebuCave.id, [
        LocalDialog.of(~flags.TalkedToZebuInCave.id, [0x00, 0x1a], [flags.TalkedToZebuInCave.id]),
        LocalDialog.of(flags.LeafVillagersRescued.id, [0x00, 0x1d]),
        LocalDialog.of(flags.LeafAbduction.id, [0x00, 0x1c]),
        LocalDialog.of(flags.ZebuAtWindmill.id, [0x00, 0x1d]),
        LocalDialog.of(flags.UsedWindmillKey.id, [0x00, 0x1b, 0x03]),
        LocalDialog.of(~0, [0x00, 0x1d]),
    ]);
    remove(Zebu.spawns(ZebuCave), ~flags.BehindWhirlpool.id);
    Tornel.spawnConditions.delete(MtSabreWest_Upper.id);
    Stom.spawnConditions.delete(StomHouse.id);
    remove(Asina.spawns(Portoa_AsinaRoom), ~flags.CalmedAngrySea.id);
    const guard2 = rom.npcs[0x34];
    guard2.spawnConditions.set(PortoaPalace_ThroneRoom.id, [flags.MesiaRecording.id,
        ~flags.PortoaQueen.id]);
    guard2.localDialogs.set(Portoa_PalaceEntrance.id, guard2.localDialogs.get(-1));
    guard2.data[0] = rom.items.FluteOfLime.id;
    const guard2Message = rom.messages.alloc();
    guard2Message.text = "The queen left this for you.";
    guard2.localDialogs.set(PortoaPalace_ThroneRoom.id, [
        LocalDialog.of(~flags.PortoaQueen.id, [guard2Message.part,
            guard2Message.id, 0x03]),
        LocalDialog.of(~0, [0x0a, 0x0e]),
    ]);
    PortoaPalace_ThroneRoom.spawns.push(Spawn.of({ yt: 3, xt: 12, type: 1,
        patternBank: 1,
        id: guard2.id }));
    KensuInCabin.spawnConditions.set(BoatHouse.id, [~flags.AbleToRideDolphin.id,
        flags.ReturnedFogLamp.id]);
    KensuInCabin.dialog()[0].message.action = 0x02;
    AztecaInShyron.spawns(Shyron_Temple).push(~flags.ShyronMassacre.id);
    rom.trigger(0x82).conditions.push(~flags.ShyronMassacre.id);
    Rage.dialog()[0].condition = flags.SwordOfWater.id;
    Draygon.spawnConditions.set(Crypt_Draygon2.id, [~flags.Draygon2.id]);
    Zebu.dialog(Shyron_Temple)
        .unshift(...Zebu.dialog(Shyron_Temple).splice(1, 1));
    rom.trigger(0x80).conditions = [
        ~flags.ShyronMassacre.id,
        flags.TalkedToZebuInShyron.id,
        flags.SwordOfThunder.id,
    ];
    rom.trigger(0x81).conditions = [];
    if (opts.barrierRequiresCalmSea()) {
        rom.trigger(0x84).conditions.push(flags.CalmedAngrySea.id);
    }
    rom.trigger(0x8c).conditions.push(flags.TalkedToZebuInCave.id);
    rom.trigger(0x8d).used = false;
    for (const spawn of MtSabreNorth_SummitCave.spawns) {
        if (spawn.isTrigger() && spawn.id === 0x8d)
            spawn.id = 0xb2;
    }
    removeIf(WaterfallValleyNorth.spawns, spawn => spawn.isTrigger() && spawn.id === 0x8d);
    rom.trigger(0xb2).conditions.push(flags.Kelbesque1.id);
    rom.trigger(0xb2).flags.push(~flags.LeafVillagersCurrentlyAbducted.id, ~flags.LeafElderCurrentlyAbducted.id, flags.LeafVillagersRescued.id);
    rom.trigger(0x8c).conditions.push(~flags.Kelbesque1.id);
    rom.trigger(0x86).conditions.push(~flags.Kelbesque1.id);
    remove(KeyToPrison.itemUseData[0].flags, ~flags.LeafVillagersCurrentlyAbducted.id);
    replace(rom.trigger(0xbb).conditions, ~flags.Rage.id, ~flags.MesiaRecording.id);
}
function disableStabs(rom) {
    for (const o of [0x08, 0x09, 0x27]) {
        rom.objects[o].collisionPlane = 0;
    }
    rom.npcs.Brokahana.data[0] = rom.items.FruitOfLime.id;
}
function orbsOptional(rom) {
    for (const obj of [0x10, 0x14, 0x18, 0x1d]) {
        rom.objects[obj].terrainSusceptibility &= ~0x04;
        rom.objects[obj].level = 2;
    }
}
function noBowMode(rom) {
    const { flags: { UsedBowOfTruth }, locations: { Crypt_Draygon2, MezameShrine }, } = rom;
    let trigger;
    for (const spawn of MezameShrine.spawns) {
        if (spawn.isTrigger() && spawn.tile === 0x88) {
            trigger = rom.trigger(spawn.id);
        }
    }
    if (!trigger)
        throw new Error(`Could not find start trigger`);
    trigger.flags.push(UsedBowOfTruth.id);
    rom.tileEffects[0xb9 - 0xb3].effects[0x58] = 0;
    MezameShrine.meta.setExit(0, 'door', [Crypt_Draygon2.meta.id << 8 | 0x10, 'edge:bottom']);
}
function fixCrystalis(rom) {
    rom.objects[0x33].elements = 0xf;
}
function fixFlyableWalls(rom) {
    rom.tileEffects[0xb5 - 0xb3].effects[0x74] = 6;
    rom.tileEffects[0xb6 - 0xb3].effects[0x46] = 6;
}
function fixMonsterTerrain(rom) {
    for (const obj of rom.objects) {
        if (!(obj instanceof Monster))
            continue;
        if (obj.isProjectile() || obj.isBoss() || obj.isFlyer())
            continue;
        if (obj === rom.objects.mimic)
            continue;
        obj.terrainSusceptibility |= 0x3;
    }
}
function replace(array, old, replacement) {
    for (let i = 0; i < array.length; i++) {
        if (array[i] !== old)
            continue;
        array[i] = replacement;
        return;
    }
    throw new Error(`Could not find ${old} in ${array.join(',')}`);
}
function hardcoreMode(rom) {
    for (const loc of rom.locations) {
        loc.checkpoint = loc.saveable = false;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV0ZXJtaW5pc3RpYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy9wYXNzL2RldGVybWluaXN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUM5QyxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEMsT0FBTyxFQUFDLEdBQUcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ25DLE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDbEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzFDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUUzQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWpCLFNBQVMsS0FBSyxDQUFDLEdBQWUsRUFBRSxLQUFhLEVBQUUsR0FBRyxJQUF1QjtJQUN2RSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDZCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVixJQUFJLEtBQXFCLENBQUM7SUFDMUIsT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNsQyxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtZQUM3QixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUM7U0FDbEI7YUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtZQUNwQyxLQUFLLE1BQU0sQ0FBQyxJQUFJLEtBQUssRUFBRTtnQkFDckIsR0FBRyxDQUFD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TUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0MsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDdEQsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDekQsQ0FBQztBQUlELFNBQVMscUJBQXFCLENBQUMsR0FBUTtJQUNyQyxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDN0QsQ0FBQztBQUdELFNBQVMsZ0JBQWdCLENBQUMsR0FBUTtJQUNoQyxNQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLE9BQU8sQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELE9BQU8sQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzVDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMxQyxNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQztJQUMxQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFLRCxTQUFTLGtCQUFrQixDQUFDLEdBQVE7SUFDbEMsTUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLENBQUM7UUFDM0IsSUFBSTtRQUNKLElBQUk7UUFDSixJQUFJO1FBRUosSUFBSTtRQUNKLElBQUk7UUFDSixJQUFJO1FBQ0osSUFBSTtRQUNKLElBQUk7UUFDSixJQUFJO1FBQ0osSUFBSTtRQUNKLElBQUk7UUFDSixHQUFHLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztLQUN6QyxDQUFDLENBQUM7SUFDSCxLQUFLLE1BQU0sUUFBUSxJQUFJLEdBQUcsQ0FBQyxTQUFTLEVBQUU7UUFDcEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJO1lBQUUsU0FBUztRQUM3QixRQUFRLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUVwQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUNqRTtBQUVILENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxHQUFRLEVBQUUsS0FBYztJQWlCL0MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFFMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUMxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztJQUUxQixHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0lB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b250ZW50IjpbIi8vIFBlcmZvcm0gaW5pdGlhbCBjbGVhbnVwL3NldHVwIG9mIHRoZSBST00uXG5cbmltcG9ydCB7RmxhZ1NldH0gZnJvbSAnLi4vZmxhZ3NldC5qcyc7XG5pbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7U3Bhd259IGZyb20gJy4uL3JvbS9sb2NhdGlvbi5qcyc7XG5pbXBvcnQge01lc3NhZ2VJZH0gZnJvbSAnLi4vcm9tL21lc3NhZ2VpZC5qcyc7XG5pbXBvcnQge0dsb2JhbERpYWxvZywgTG9jYWxEaWFsb2d9IGZyb20gJy4uL3JvbS9ucGMuanMnO1xuaW1wb3J0IHtTaG9wVHlwZX0gZnJvbSAnLi4vcm9tL3Nob3AuanMnO1xuaW1wb3J0IHtUcmlnZ2VyfSBmcm9tICcuLi9yb20vdHJpZ2dlci5qcyc7XG5pbXBvcnQge2hleH0gZnJvbSAnLi4vcm9tL3V0aWwuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtNb25zdGVyfSBmcm9tICcuLi9yb20vbW9uc3Rlci5qcyc7XG5pbXBvcnQge1BhdHRlcm5zfSBmcm9tICcuLi9yb20vcGF0dGVybi5qcyc7XG5cbmNvbnN0IFtdID0gW2hleF07IC8vIGdlbmVyYWxseSB1c2VmdWxcblxuZnVuY3Rpb24gd3JpdGUoYXJyOiBVaW50OEFycmF5LCBzdGFydDogbnVtYmVyLCAuLi5kYXRhOiAobnVtYmVyfHN0cmluZylbXSkge1xuICBsZXQgaiA9IHN0YXJ0O1xuICBsZXQgaSA9IDA7XG4gIGxldCB2YWx1ZSE6IHN0cmluZ3xudW1iZXI7XG4gIHdoaWxlICgodmFsdWUgPSBkYXRhW2krK10pICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgYXJyW2orK10gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZvciAoY29uc3QgYyBvZiB2YWx1ZSkge1xuICAgICAgICBhcnJbaisrXSA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgZGF0YScpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5pc3RpY1ByZVBhcnNlKHByZzogVWludDhBcnJheSk6IHZvaWQge1xuICAvLyBSZW1vdmUgdW5uZWNlc3Nhcnkgc3RhdHVlIGZpZ2h0IHRyaWdnZXJzLiAgVE9ETyAtIHJlbW92ZSAxZCBsb2NhdGlvbiBjaGVja1xuICBwcmdbMHgxYTU5NF0gPSAweGZmOyAvLyBqdXN0IGN1dCBvZmYgdHdvIG9iamVjdHMgZWFybHkuXG5cbiAgLy8gUmVtb3ZlIHVubmVjZXNzYXJ5IG9hayBlbnRyYW5jZSB0cmlnZ2VyIChhYSkuICBSZWRpcmVjdCB0aGUgZGlhbG9nIGZsYWcuXG4gIHByZ1sweDFjZGM1XSA9IDB4YTg7IC8vIGNoYW5nZSBmbGFnIHRvIG5vdCB1c2UgMDQzLlxuICBwcmdbMHgxYTE3Nl0gPSAweGZmOyAvLyByZW1vdmUgdGhlIDgzIHRyaWdnZXIgZnJvbSBnb2EgZm9ydHJlc3MgZW50cmFuY2UuXG4gIHByZ1sweDFhODRjXSA9IDB4ZmY7IC8vIHJlbW92ZSB0aGUgYWEgdHJpZ2dlciAobGFzdCBzcGF3biBpbiBvYWspLlxuXG4gIC8vIFJlbW92ZSBicm9rZW4gKHVudXNlZCkga2Vuc3UgZGlhbG9nIGluIHN3YW4gdGF2ZXJuIC0gb3JpZ2luYWwgcmVhZHNcbiAgLy8gcGFydCBvZiB0aGUgbmV4dCBhcmVhJ3MgbG9jYWwgZGlhbG9ncyBhcyBmbGFncyB0byBzZXQsIGluY2x1ZGluZyAxNDAuXG4gIHByZ1sweDFkODQzXSA9IDB4YTA7IC8vIGNoYW5nZSBlMCAoZXhwZWN0aW5nIGZvbGxvdy11cCBmbGFncykgdG8gYTAuXG5cbiAgLy8gUmVtb3ZlIHVudXNlZCBpdGVtL3RyaWdnZXIgYWN0aW9uc1xuICBwcmdbMHgxZTA2Yl0gJj0gNzsgLy8gbWVkaWNhbCBoZXJiIG5vcm1hbCB1c2FnZSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDZmXSAmPSA3OyAvLyBtYWdpYyByaW5nIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3M10gJj0gNzsgLy8gZnJ1aXQgb2YgbGltZSBpdGVtdXNlWzBdID0+IGFjdGlvbiAwNSB0byBhY3Rpb24gMDBcbiAgcHJnWzB4MWUwNzddICY9IDc7IC8vIGFudGlkb3RlIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA3Yl0gJj0gNzsgLy8gb3BlbCBzdGF0dWUgaXRlbXVzZVswXSA9PiBhY3Rpb24gMDUgdG8gYWN0aW9uIDAwXG4gIHByZ1sweDFlMDg0XSAmPSA3OyAvLyB3YXJwIGJvb3RzIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA0IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTA5Yl0gJj0gNzsgLy8gd2luZG1pbGwga2V5IGl0ZW11c2VbMV0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuICBwcmdbMHgxZTBiOV0gJj0gNzsgLy8gZ2xvd2luZyBsYW1wIGl0ZW11c2VbMF0gPT4gYWN0aW9uIDA1IHRvIGFjdGlvbiAwMFxuXG4gIHByZ1sweDFlMTA1XSA9IDB4MmY7IC8vIGNoYW5nZSBVc2VkQm93T2ZUcnV0aCBmcm9tIDA4NiB0byBmaXhlZCAwMmYgKDY0ODU6ODApXG5cbiAgcHJnWzB4MWUyNzddID0gMHgwMDsgLy8gcmVtb3ZlIGZsYWcgMGExIGZyb20gYW1hem9uZXMgd2FycCAodHJpZ2dlciA5MClcbiAgcHJnWzB4MWUzNjZdID0gMHg0MDsgLy8gcmVtb3ZlIHVucmVhZCAwOGUgZmxhZyBmcm9tIHNhYmVyYSB0cmFwICh0cmlnZ2VyIGI2KVxuICBwcmdbMHgxZTM3MV0gPSAweDAwOyAvLyByZW1vdmUgZmxhZyAwYTIgZnJvbSBwb3J0b2EgY2FzdGxlIGJyaWRnZSAodHJpZ2dlciBiNylcblxuICAvLyBndWFyZCBwYXJhbHlzaXMgZmxhZ3MgYXJlIG1vdmVkIGhhcmRjb2RlZCBub3dcbiAgcHJnWzB4MWUzODddID0gMHgwMDsgLy8gcmVtb3ZlIGNvbmRpdGlvbiAwOWUgZnJvbSBwYWxhY2UgZ3VhcmQgKHRyaWdnZXIgYmIpXG4gIHByZ1sweDFlMzkxXSA9IDB4MDA7IC8vIHJlbW92ZSBjb25kaXRpb24gMDk5IGZyb20gYW1hem9uZXMgZ3VhcmQgKHRyaWdnZXIgYmMpXG5cbiAgLy8gQ3VzdG9tIHNob290aW5nIHdhbGxzOiBtYXJrIHdhbGxzIGFzIHNob290aW5nXG4gIHdyaXRlKHByZywgMHgxYTE2OCwgMHgzMywgMHgzMyk7IC8vIGZyb250IG9mIGdvYSBmb3J0cmVzc1xuICB3cml0ZShwcmcsIDB4MWE0OGUsIDB4MzMsIDB4MzMpOyAvLyBvYXNpcyBjYXZlXG5cbiAgLy8gUmVudW1iZXIgbWltaWNzXG4gIHByZ1sweDE5YmIxXSA9IDB4NzA7IC8vIGZvZyBsYW1wIGNhdmUgMyAoNGEpIG5vcnRoIG1pbWljXG4gIHByZ1sweDE5YmI1XSA9IDB4NzE7IC8vIGZvZyBsYW1wIGNhdmUgMyAoNGEpIHNvdXRod2VzdCBtaW1pY1xuICBwcmdbMHgxOWE3N10gPSAweDcyOyAvLyB3YXRlcmZhbGwgY2F2ZSAxICg1NCkgbWltaWNcbiAgcHJnWzB4MTlkZWJdID0gMHg3MzsgLy8gZXZpbCBzcGlyaXQgaXNsYW5kIDQgKDZiKSByaXZlciByaWdodCBtaW1pY1xuICBwcmdbMHgxYTA0NV0gPSAweDc0OyAvLyBtdCBoeWRyYSBjYXZlIDggKDg1KSBtaW1pY1xuICBwcmdbMHgxYTBlMV0gPSAweDc1OyAvLyBzdHh5IGxlZnQgKDg5KSBub3J0aCBtaW1pY1xuICBwcmdbMHgxYTBlNV0gPSAweDc2OyAvLyBzdHh5IHJpZ2h0ICg4OSkgbm9ydGggcml2ZXJzaWRlIG1pbWljXG4gIHByZ1sweDFhMGU5XSA9IDB4Nzc7IC8vIHN0eHkgcmlnaHQgKDg5KSBzb3V0aCByaXZlcnNpZGUgbWltaWNcbiAgcHJnWzB4MWE2MDVdID0gMHg3ODsgLy8gY3J5cHQgbGVmdCBwaXQgKGEzKSBtaW1pY1xuICBwcmdbMHgxYTNjMV0gPSAweDc5OyAvLyBrYXJtaW5lIGJhc2VtZW50IChiNSkgdG9wIG1pZGRsZSBtaW1pY1xuICBwcmdbMHgxYTNjNV0gPSAweDdhOyAvLyBrYXJtaW5lIGJhc2VtZW50IChiNSkgdG9wIHJpZ2h0IG1pbWljXG4gIHByZ1sweDFhM2M5XSA9IDB4N2I7IC8vIGthcm1pbmUgYmFzZW1lbnQgKGI1KSBib3R0b20gcmlnaHQgbWltaWNcblxuICB3cml0ZShwcmcsIDB4MWUwYjcsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgc2hlbGwgZmx1dGUgdXNlIGZsYWcgKG5ldmVyIHJlYWQpXG4gIHdyaXRlKHByZywgMHgxZTMyYSwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSBwcmlzb24gb3BlbmFibGUgZmxhZyAodHJpZ2dlciBhZClcbiAgd3JpdGUocHJnLCAweDFlMzMwLCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIHN0eHkgb3BlbmFibGUgZmxhZyAodHJpZ2dlciBhZSlcbiAgd3JpdGUocHJnLCAweDFlMzM2LCAweGMwLCAweDAwKTsgLy8gUmVtb3ZlIGFsdGFyIHVzYWJsZSBmbGFnICh0cmlnZ2VyIGFmKVxuICB3cml0ZShwcmcsIDB4MWUwZTAsIDB4YzAsIDB4MDApOyAvLyBSZW1vdmUgdW51c2VkIGZsdXRlIG9mIGxpbWUgaXRlbXVzZSBmbGFnXG4gIHdyaXRlKHByZywgMHgxZTBlNiwgMHhjMCwgMHgwMCk7IC8vIFJlbW92ZSB1bnVzZWQgZmx1dGUgb2YgbGltZSBpdGVtdXNlIGZsYWdcblxuICAvLyBTd2FuIGdhdGUgZ3VhcmRzIHNwYXduIGV4YWN0bHkgYmFzZWQgb24gZ2F0ZSBiZWluZyBjbG9zZWQgKDJiMykuXG4gIC8vIEFsc28gcmVtb3ZlIHRoZSBkZXNwYXduIHRyaWdnZXIgKHdlIGNhbid0IG1vdmUgdGhlIGd1YXJkcyBiZWNhdXNlXG4gIC8vIHRoZSBnYXRlIGFuaW1hdGlvbiBuZWVkcyB0byBiZSBpbiBzbG90IGUpLlxuICBwcmdbMHgxYzgwM10gPSAweDAwOyAvLyByZW1vdmUgfjA2NiBmcm9tIHNwYXduIGNvbmRpdGlvbiAyYyBAIDM4XG4gIHdyaXRlKHByZywgMHgxYzgwZCwgMHhhMiwgMHhiMyk7IC8vIHNwYXduIGNvbmRpdGlvbiAyZCBAIDczXG4gIHByZ1sweDFhYTg2XSA9IDB4ZmU7IC8vIHRyaWdnZXIgLT4gdW51c2VkIHNwYXduXG5cbiAgLy8gVE9ETyAtIHRoZXNlIGFyZSB0cmFuc2l0aW9uYWwgdW50aWwgd2UgbW92ZSB0aGUgbG9naWMgZWxzZXdoZXJlXG4gIHdyaXRlKHByZywgMHgzZDZkNSxcbiAgICAgICAgMHgyNSwgMHgyOSwgIC8vIDI1IHN0YXR1ZSBvZiBvbnl4IHVzZSAtPiAyOSBnYXMgbWFza1xuICAgICAgICAweDM5LCAweDNhLCAgLy8gMzkgZ2xvd2luZyBsYW1wIHVzZSAtPiAzYSBzdGF0dWUgb2YgZ29sZFxuICAgICAgICAweDNiLCAweDQ3LCAgLy8gM2IgbG92ZSBwZW5kYW50IHVzZSAtPiA0NyBjaGFuZ2VcbiAgICAgICAgMHgzYywgMHgzZSwgIC8vIDNjIGtpcmlzYSBwbGFudCB1c2UgLT4gM2UgYm93IG9mIG1vb25cbiAgICAgICAgMHg4NCwgMHg0NiwgIC8vIDg0IGFuZ3J5IHNlYSB0cmlnZ2VyIC0+IDQ2IGJhcnJpZXJcbiAgICAgICAgMHhiMiwgMHg0MiwgIC8vIGIyIHN1bW1pdCB0cmlnZ2VyIC0+IDQyIHBhcmFseXNpc1xuICAgICAgICAweGI0LCAweDQxLCAgLy8gYjQgd2luZG1pbGwgY2F2ZSB0cmlnZ2VyIC0+IDQxIHJlZnJlc2hcbiAgICAgICAgMHhmZik7ICAgICAgIC8vIGZvciBib29ra2VlcGluZyBwdXJwb3Nlcywgbm90IGFjdHVhbGx5IHVzZWRcblxuICAvLyBNYWtlIHRoZSBzd29yZCB1c2UgdGhlIGVsZW1lbnQncyBwYWxldHRlIGluc3RlYWQgb2YgdGhlIHBsYXllci5cbiAgLy8gVE9ETyAtIG1vdmUgdGhpcyBpbnRvIHBvc3QtcGFyc2UgYXMgYSBtZXRhc3ByaXRlIGVkaXQgKHdlJ2xsIG5lZWQgdG9cbiAgLy8gZG8gYSBmdWxsIHdyaXRlIG9uIHRoYXQgdGFibGUuLi4pLiAgSWYgd2UgZG9uJ3QgY29sb3IgdGhlIHN3b3JkXG4gIC8vIGVsZW1lbnRzIHRoZW4gdGhpcyB0dXJucyB0aGUgc3dvcmRzIGEgYnJpZ2h0ZXIgd2hpdGUuXG4gIGZvciAoY29uc3QgYWRkciBvZiBbMHgzODc1NywgMHgzODc3NywgMHgzODc3YiwgMHgzODc5NywgMHgzODc5YixcbiAgICAgICAgICAgICAgICAgICAgICAweDM4N2RiLCAweDM4N2RmLCAweDM4N2ZiLCAweDM4N2ZmLCAweDM4ODFiLCAweDM4ODFmLFxuICAgICAgICAgICAgICAgICAgICAgIDB4Mzg4NjUsIDB4Mzg4ODUsIDB4Mzg4ODksIDB4Mzg4YTVdKSB7XG4gICAgcHJnW2FkZHJdIHw9IDE7XG4gIH1cblxuICAvLyBSZW5hbWUgdGhlIGRlZmF1bHQgbmFtZSB0byBcIlNpbWVhXCIuXG4gIHdyaXRlKHByZywgMHgyNjU2ZSwgXCJTaW1lYVwiLCAweDEwLCAwLCBcIiAgICAgXCIsIDB4MTAsIDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5pc3RpYyhyb206IFJvbSwgZmxhZ3M6IEZsYWdTZXQpOiB2b2lkIHtcbiAgLy8gTk9URTogZG8gdGhpcyB2ZXJ5IGVhcmx5IHRvIG1ha2Ugc3VyZSByZWZzIHRvIHdhcnAgcG9pbnQgZmxhZ3MgYXJlXG4gIC8vIHVwZGF0ZWQgdG8gcmVmbGVjdCBzaGlmdHMgKHByb2JhYmx5IG5vdCBhbiBpc3N1ZSBhbnltb3JlIG5vdyB0aGF0XG4gIC8vIHdlIHRyYWNrIGZsYWcgbW92ZXMgc2VwYXJhdGVseSkuXG4gIGFkZFpvbWJpZVdhcnAocm9tKTtcblxuICByZW1vdmVXYXJwVHJpZ2dlcnMocm9tKTtcbiAgY29uc29saWRhdGVJdGVtR3JhbnRzKHJvbSk7XG4gIGFkZE1lemFtZVRyaWdnZXIocm9tKTtcbiAgbm9ybWFsaXplU3dvcmRzKHJvbSwgZmxhZ3MpO1xuXG4gIGZpeEZseWFibGVXYWxscyhyb20pO1xuICBmaXhNb25zdGVyVGVycmFpbihyb20pO1xuICBmaXhDcnlzdGFsaXMocm9tKTtcbiAgZml4T3BlbFN0YXR1ZShyb20pO1xuICBmaXhDb2luU3ByaXRlcyhyb20pO1xuICBmaXhDaGVzdHMocm9tKTtcbiAgcHJldmVudEJvc3NTb2Z0bG9ja3Mocm9tKTtcblxuICBtYWtlQnJhY2VsZXRzUHJvZ3Jlc3NpdmUocm9tKTtcblxuICBhZGp1c3RHb2FGb3J0cmVzc1RyaWdnZXJzKHJvbSk7XG4gIHByZXZlbnROcGNEZXNwYXducyhyb20sIGZsYWdzKTtcbiAgbGVhZkVsZGVySW5TYWJyZUhlYWxzKHJvbSk7XG4gIGlmIChmbGFncy5yZXF1aXJlSGVhbGVkRG9scGhpblRvUmlkZSgpKSByZXF1aXJlSGVhbGVkRG9scGhpbihyb20pO1xuICBpZiAoZmxhZ3Muc2FoYXJhUmFiYml0c1JlcXVpcmVUZWxlcGF0aHkoKSkgcmVxdWlyZVRlbGVwYXRoeUZvckRlbyhyb20pO1xuXG4gIGFkanVzdEl0ZW1OYW1lcyhyb20sIGZsYWdzKTtcblxuICAvLyBUT0RPIC0gY29uc2lkZXIgbWFraW5nIGEgVHJhbnNmb3JtYXRpb24gaW50ZXJmYWNlLCB3aXRoIG9yZGVyaW5nIGNoZWNrc1xuICBhbGFybUZsdXRlSXNLZXlJdGVtKHJvbSwgZmxhZ3MpOyAvLyBOT1RFOiBwcmUtc2h1ZmZsZVxuICBicm9rYWhhbmFXYW50c01hZG8xKHJvbSk7XG4gIGlmIChmbGFncy50ZWxlcG9ydE9uVGh1bmRlclN3b3JkKCkpIHtcbiAgICB0ZWxlcG9ydE9uVGh1bmRlclN3b3JkKHJvbSk7XG4gICAgLy8gbm90IFNoeXJvbl9UZW1wbGUgc2luY2Ugbm8tdGh1bmRlci1zd29yZC1mb3ItbWFzc2FjcmVcbiAgICByb20udG93bldhcnAudGh1bmRlclN3b3JkV2FycCA9IFtyb20ubG9jYXRpb25zLlNoeXJvbi5pZCwgMHg0MV07XG4gIH0gZWxzZSB7XG4gICAgbm9UZWxlcG9ydE9uVGh1bmRlclN3b3JkKHJvbSk7XG4gIH1cblxuICB1bmRlcmdyb3VuZENoYW5uZWxMYW5kQnJpZGdlKHJvbSk7XG4gIGlmIChmbGFncy5mb2dMYW1wTm90UmVxdWlyZWQoKSkgZm9nTGFtcE5vdFJlcXVpcmVkKHJvbSwgZmxhZ3MpO1xuXG4gIGV2aWxTcGlyaXRJc2xhbmRSZXF1aXJlc0RvbHBoaW4ocm9tKTtcbiAgc2ltcGxpZnlJbnZpc2libGVDaGVzdHMocm9tKTtcbiAgYWRkQ29yZGVsV2VzdFRyaWdnZXJzKHJvbSwgZmxhZ3MpO1xuICBpZiAoZmxhZ3MuZGlzYWJsZVJhYmJpdFNraXAoKSkgZml4UmFiYml0U2tpcChyb20pO1xuICBpZiAoZmxhZ3MuZGlzYWJsZUZsaWdodFN0YXR1ZVNraXAoKSkgZml4RmxpZ2h0U3RhdHVlU2tpcChyb20pO1xuICBpZiAoZmxhZ3MuZGlzYWJsZVJhZ2VTa2lwKCkpIHBhdGNoTGltZVRyZWVMYWtlKHJvbSk7XG5cbiAgZml4UmV2ZXJzZVdhbGxzKHJvbSk7XG4gIGlmIChmbGFncy5jaGFyZ2VTaG90c09ubHkoKSkgZGlzYWJsZVN0YWJzKHJvbSk7XG4gIGlmIChmbGFncy5vcmJzT3B0aW9uYWwoKSkgb3Jic09wdGlvbmFsKHJvbSk7XG4gIGlmIChmbGFncy5ub0Jvd01vZGUoKSkgbm9Cb3dNb2RlKHJvbSk7XG5cbiAgcGF0Y2hUb29NYW55SXRlbXNNZXNzYWdlKHJvbSk7XG5cbiAgaWYgKGZsYWdzLmhhcmRjb3JlTW9kZSgpKSBoYXJkY29yZU1vZGUocm9tKTtcblxuICBpZiAoZmxhZ3Muc2hvdWxkVXBkYXRlSHVkKCkpIHVzZU5ld1N0YXR1c0JhckdyYXBoaWNzKHJvbSk7XG4gIGlmIChmbGFncy5zaG91bGRDb2xvclN3b3JkRWxlbWVudHMoKSkgdXNlRWxlbWVudFN3b3JkQ29sb3JzKHJvbSk7XG59XG5cbmZ1bmN0aW9uIHVzZUVsZW1lbnRTd29yZENvbG9ycyhyb206IFJvbSk6IHZvaWQge1xuICBmdW5jdGlvbiBzd2FwVGlsZXMoc3RhcnQ6IG51bWJlciwgdGh1bmRlcj86IG51bWJlcikge1xuICAgIGZvciAobGV0IGFkZHIgPSAwOyBhZGRyIDw9IDB4YTsgYWRkcisrKSB7XG4gICAgICBpZiAoYWRkciA9PT0gOCkgY29udGludWU7XG4gICAgICBjb25zdCBwID0gcm9tLnBhdHRlcm5zLmdldChhZGRyIHwgc3RhcnQpO1xuICAgICAgY29uc3Qgb3JpZyA9IFsuLi5wLnBpeGVsc107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAucGl4ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHAucGl4ZWxzW2ldID0gb3JpZ1tpIF4gOF07XG4gICAgICAgIGlmICgoaSA+Pj4gMykgPT09IHRodW5kZXIpIHAucGl4ZWxzW2ldIHw9IG9yaWdbaV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHN3YXBUaWxlcygweDEwOTApOyAvLyB3aW5kXG4gIHN3YXBUaWxlcygweDEwZDApOyAvLyBmaXJlXG4gIHN3YXBUaWxlcygweDExMTApOyAvLyB3YXRlclxuICBzd2FwVGlsZXMoMHgxMTUwKTsgLy8gdGh1bmRlclxuICBzd2FwVGlsZXMoMHgxMTkwKTsgLy8gY3J5c3RhbGlzXG59XG5cbmZ1bmN0aW9uIHVzZU5ld1N0YXR1c0JhckdyYXBoaWNzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHBhZ2UgPSAweDM4IDw8IDZcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDAsIFBhdHRlcm5zLkhVRF9MRik7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHgxLCBQYXR0ZXJucy5IVURfUFcpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4MiwgUGF0dGVybnMuSFVEX0VZKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDMsIFBhdHRlcm5zLkhVRF9MVik7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHg0LCBQYXR0ZXJucy5IVURfREwpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4NSwgUGF0dGVybnMuSFVEX01QKTtcbiAgcm9tLnBhdHRlcm5zLnNldChwYWdlLCAweDYsIFBhdHRlcm5zLkhVRF9FWCk7XG4gIHJvbS5wYXR0ZXJucy5zZXQocGFnZSwgMHgxYSwgUGF0dGVybnMuSFVEX0NMT1NFX0xFRlQpO1xuICByb20ucGF0dGVybnMuc2V0KHBhZ2UsIDB4MWIsIFBhdHRlcm5zLkhVRF9DTE9TRV9SSUdIVCk7XG59XG5cbi8vIFVwZGF0ZXMgYSBmZXcgaXRlbXVzZSBhbmQgdHJpZ2dlciBhY3Rpb25zIGluIGxpZ2h0IG9mIGNvbnNvbGlkYXRpb25cbi8vIGFyb3VuZCBpdGVtIGdyYW50aW5nLlxuZnVuY3Rpb24gY29uc29saWRhdGVJdGVtR3JhbnRzKHJvbTogUm9tKTogdm9pZCB7XG4gIHJvbS5pdGVtcy5HbG93aW5nTGFtcC5pdGVtVXNlRGF0YVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MGI7XG59XG5cbi8vIEFkZHMgYSB0cmlnZ2VyIGFjdGlvbiB0byBtZXphbWUuICBVc2UgODcgbGVmdG92ZXIgZnJvbSByZXNjdWluZyB6ZWJ1LlxuZnVuY3Rpb24gYWRkTWV6YW1lVHJpZ2dlcihyb206IFJvbSk6IHZvaWQge1xuICBjb25zdCB0cmlnZ2VyID0gcm9tLm5leHRGcmVlVHJpZ2dlcignbWV6YW1lJyk7XG4gIHRyaWdnZXIudXNlZCA9IHRydWU7XG4gIHRyaWdnZXIuY29uZGl0aW9ucyA9IFt+cm9tLmZsYWdzLkFsd2F5c1RydWUuaWRdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe2FjdGlvbjogNH0pO1xuICB0cmlnZ2VyLmZsYWdzID0gW3JvbS5mbGFncy5BbHdheXNUcnVlLmlkXTtcbiAgY29uc3QgbWV6YW1lID0gcm9tLmxvY2F0aW9ucy5NZXphbWVTaHJpbmU7XG4gIG1lemFtZS5zcGF3bnMucHVzaChTcGF3bi5vZih7dGlsZTogMHg4OCwgdHlwZTogMiwgaWQ6IHRyaWdnZXIuaWR9KSk7XG59XG5cbi8vIFRoZSBfV0FSUF9GTEFHU19UQUJMRSBhc20gb3B0aW9uIHJlbW92ZXMgdGhlIG5lZWQgZm9yIGV4cGxpY2l0IHRyaWdnZXJzXG4vLyB0byBzZXQgdGhlIHdhcnAgcG9pbnQgZmxhZ3MsIGFuZCBpbnN0ZWFkIHdvcmtzIGJ5IGNoZWNraW5nIHRoZSBuZXcgbG9jYXRpb25cbi8vIGFnYWluc3QgdGhlIFRvd25XYXJwIHRhYmxlIGJldHdlZW4gbG9hZGluZyB0aGUgbWFwIGFuZCBsb2FkaW5nIHRoZSBOUENzLlxuZnVuY3Rpb24gcmVtb3ZlV2FycFRyaWdnZXJzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHdhcnBUcmlnZ2VycyA9IG5ldyBTZXQoW1xuICAgIDB4ODEsIC8vIGVudGVyIHNoeXJvblxuICAgIDB4OGIsIC8vIGVudGVyIGpvZWxcbiAgICAweDkwLCAvLyBlbnRlciBhbWF6b25lc1xuICAgIC8vIDB4OTIsIC8vIGVudGVyIHVuZGVyZ3JvdW5kIGNoYW5uZWwgLSBOT1RFOiBub3QgYSB0b3duIHdhcnAuLi4hXG4gICAgMHg5OSwgLy8gZW50ZXIgbGVhZlxuICAgIDB4YTYsIC8vIGVudGVyIGJyeW5tYWVyXG4gICAgMHhhNywgLy8gZW50ZXIgbmFkYXJlXG4gICAgMHhhOCwgLy8gZW50ZXIgcG9ydG9hXG4gICAgMHhhOSwgLy8gZW50ZXIgc3dhblxuICAgIDB4YWEsIC8vIGVudGVyIG9ha1xuICAgIDB4YWIsIC8vIGVudGVyIGdvYVxuICAgIDB4YWMsIC8vIGVudGVyIHNhaGFyYVxuICAgIHJvbS5hbGxvY2F0ZWRUcmlnZ2Vycy5nZXQoJ3pvbWJpZSB3YXJwJyksIC8vIE5PVEU6IG1heSBiZSB1bmRlZmluZWRcbiAgXSk7XG4gIGZvciAoY29uc3QgbG9jYXRpb24gb2Ygcm9tLmxvY2F0aW9ucykge1xuICAgIGlmICghbG9jYXRpb24udXNlZCkgY29udGludWU7XG4gICAgbG9jYXRpb24uc3Bhd25zID0gbG9jYXRpb24uc3Bhd25zLmZpbHRlcihcbiAgICAgICAgLy8gcmV0YWluIGFsbCBub24tdHJpZ2dlcnMgYW5kIGFsbCBub24tbWF0Y2hpbmcgdHJpZ2dlcnNcbiAgICAgICAgc3Bhd24gPT4gIXNwYXduLmlzVHJpZ2dlcigpIHx8ICF3YXJwVHJpZ2dlcnMuaGFzKHNwYXduLmlkKSk7XG4gIH1cbiAgLy8gVE9ETzogZGVhbGxvY2F0ZSB0aGVzZSB0cmlnZ2VycyBzbyB0aGV5IGNhbiBiZSByZWFzc2lnbmVkIVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVTd29yZHMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KSB7XG4gIC8vIHdpbmQgMSA9PiAxIGhpdCAgICAgICAgICAgICAgID0+IDNcbiAgLy8gd2luZCAyID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gNlxuICAvLyB3aW5kIDMgPT4gMi0zIGhpdHMgOE1QICAgICAgICA9PiA4XG5cbiAgLy8gZmlyZSAxID0+IDEgaGl0ICAgICAgICAgICAgICAgPT4gM1xuICAvLyBmaXJlIDIgPT4gMyBoaXRzICAgICAgICAgICAgICA9PiA1XG4gIC8vIGZpcmUgMyA9PiA0LTYgaGl0cyAxNk1QICAgICAgID0+IDdcblxuICAvLyB3YXRlciAxID0+IDEgaGl0ICAgICAgICAgICAgICA9PiAzXG4gIC8vIHdhdGVyIDIgPT4gMS0yIGhpdHMgICAgICAgICAgID0+IDZcbiAgLy8gd2F0ZXIgMyA9PiAzLTYgaGl0cyAxNk1QICAgICAgPT4gOFxuXG4gIC8vIHRodW5kZXIgMSA9PiAxLTIgaGl0cyBzcHJlYWQgID0+IDNcbiAgLy8gdGh1bmRlciAyID0+IDEtMyBoaXRzIHNwcmVhZCAgPT4gNVxuICAvLyB0aHVuZGVyIDMgPT4gNy0xMCBoaXRzIDQwTVAgICA9PiA3XG5cbiAgcm9tLm9iamVjdHNbMHgxMF0uYXRrID0gMzsgLy8gd2luZCAxXG4gIHJvbS5vYmplY3RzWzB4MTFdLmF0ayA9IDY7IC8vIHdpbmQgMlxuICByb20ub2JqZWN0c1sweDEyXS5hdGsgPSA4OyAvLyB3aW5kIDNcblxuICByb20ub2JqZWN0c1sweDE4XS5hdGsgPSAzOyAvLyBmaXJlIDFcbiAgcm9tLm9iamVjdHNbMHgxM10uYXRrID0gNTsgLy8gZmlyZSAyXG4gIHJvbS5vYmplY3RzWzB4MTldLmF0ayA9IDU7IC8vIGZpcmUgMlxuICByb20ub2JqZWN0c1sweDE3XS5hdGsgPSA3OyAvLyBmaXJlIDNcbiAgcm9tLm9iamVjdHNbMHgxYV0uYXRrID0gNzsgLy8gZmlyZSAzXG5cbiAgcm9tLm9iamVjdHNbMHgxNF0uYXRrID0gMzsgLy8gd2F0ZXIgMVxuICByb20ub2JqZWN0c1sweDE1XS5hdGsgPSA2OyAvLyB3YXRlciAyXG4gIHJvbS5vYmplY3RzWzB4MTZdLmF0ayA9IDg7IC8vIHdhdGVyIDNcblxuICByb20ub2JqZWN0c1sweDFjXS5hdGsgPSAzOyAvLyB0aHVuZGVyIDEgKHVudXNlZCBhbGlhcz8pXG4gIHJvbS5vYmplY3RzWzB4MWRdLmF0ayA9IDM7IC8vIHRodW5kZXIgMVxuICByb20ub2JqZWN0c1sweDFlXS5hdGsgPSA1OyAvLyB0aHVuZGVyIDJcbiAgcm9tLm9iamVjdHNbMHgxYl0uYXRrID0gNzsgLy8gdGh1bmRlciAzXG4gIHJvbS5vYmplY3RzWzB4MWZdLmF0ayA9IDc7IC8vIHRodW5kZXIgM1xuXG4gIGlmIChmbGFncy5zbG93RG93blRvcm5hZG8oKSkge1xuICAgIC8vIFRPRE8gLSB0b3JuYWRvIChvYmogMTIpID0+IHNwZWVkIDA3IGluc3RlYWQgb2YgMDhcbiAgICAvLyAgICAgIC0gbGlmZXRpbWUgaXMgNDgwID0+IDcwIG1heWJlIHRvbyBsb25nLCA2MCBzd2VldCBzcG90P1xuICAgIGNvbnN0IHRvcm5hZG8gPSByb20ub2JqZWN0c1sweDEyXTtcbiAgICB0b3JuYWRvLnNwZWVkID0gMHgwNztcbiAgICB0b3JuYWRvLmRhdGFbMHgwY10gPSAweDYwOyAvLyBpbmNyZWFzZSBsaWZldGltZSAoNDgwKSBieSAyMCVcbiAgfVxufVxuXG4vLyBBZGQgY29kZSB0byBlbnN1cmUgRHJheWdvbiAyIGFuZCBHaWFudCBJbnNlY3QgcmVzcGF3biB3aXRob3V0IHRoZWlyXG4vLyBpdGVtcyBvbmNlIHRoZXkndmUgYmVlbiB1c2VkLlxuZnVuY3Rpb24gcHJldmVudEJvc3NTb2Z0bG9ja3Mocm9tOiBSb20pIHtcbiAgY29uc3QgdHJpZ2dlciA9IHJvbS50cmlnZ2VyKDB4YTApO1xuICB0cmlnZ2VyLnVzZWQgPSB0cnVlO1xuICB0cmlnZ2VyLmNvbmRpdGlvbnMgPSBbXTtcbiAgdHJpZ2dlci5mbGFncyA9IFtdO1xuICB0cmlnZ2VyLm1lc3NhZ2UgPSBNZXNzYWdlSWQub2Yoe3BhcnQ6IDAsIGluZGV4OiAwLCBhY3Rpb246IDB4MTV9KTtcblxuICByb20ub2JqZWN0c1sweDVlXS5kYXRhWzB4ZF0gPSAweGZlOyAvLyBvYmplY3QgYWN0aW9uIDdlIGluc3RlYWQgb2YgN2ZcbiAgcm9tLml0ZW1zLkluc2VjdEZsdXRlLml0ZW1Vc2VEYXRhWzBdLmZsYWdzID0gW3JvbS5mbGFncy5Vc2VkSW5zZWN0Rmx1dGUuaWRdO1xufVxuXG5mdW5jdGlvbiBmaXhPcGVsU3RhdHVlKHJvbTogUm9tKSB7XG4gIC8vIERvbid0IHNlbGVjdCBPcGVsIFN0YXR1ZSBhdCBhbGwuICBUaGlzIHBhdGNoZXMgdGhlIHRhYmxlIGF0ICQyMTAzYlxuICAvLyB0aGF0IHRyYW5zbGF0ZXMgYW4gaXRlbSBJRCB0byBhIFwic2VsZWN0ZWQgaXRlbVwiIGluZGV4LCBpLmUuIGVhY2hcbiAgLy8gdHlwZSBvZiBpdGVtIG1hcHMgdG8gYSBzZXJpZXMgMS4uTi4gIEluIHRoaXMgY2FzZSwgd2UganVzdCByZW1hcFxuICAvLyBPcGVsIFN0YXR1ZSB0byB6ZXJvIHNvIHRoYXQgaXQgbG9va3MgbGlrZSBub3RoaW5nIGlzIHNlbGVjdGVkLlxuICByb20uaXRlbXMuT3BlbFN0YXR1ZS5zZWxlY3RlZEl0ZW1WYWx1ZSA9IDA7XG59XG5cbmZ1bmN0aW9uIGZpeENvaW5TcHJpdGVzKHJvbTogUm9tKTogdm9pZCB7XG4gIGZvciAoY29uc3QgcGFnZSBvZiBbMHg2MCwgMHg2NCwgMHg2NSwgMHg2NiwgMHg2NywgMHg2OCxcbiAgICAgICAgICAgICAgICAgICAgICAweDY5LCAweDZhLCAweDZiLCAweDZjLCAweDZkLCAweDZmXSkge1xuICAgIGZvciAoY29uc3QgcGF0IG9mIFswLCAxLCAyXSkge1xuICAgICAgcm9tLnBhdHRlcm5zLnNldChwYWdlIDw8IDYsIHBhdCwgcm9tLnBhdHRlcm5zLmdldCgweDVlIDw8IDYsIHBhdCkucGl4ZWxzKTtcbiAgICB9XG4gIH1cbiAgcm9tLm9iamVjdHNbMHgwY10ubWV0YXNwcml0ZSA9IDB4YTk7XG59XG5cbi8qKlxuICogRml4IHRoZSBzb2Z0bG9jayB0aGF0IGhhcHBlbnMgd2hlbiB5b3UgZ28gdGhyb3VnaFxuICogYSB3YWxsIGJhY2t3YXJkcyBieSBtb3ZpbmcgdGhlIGV4aXQvZW50cmFuY2UgdGlsZXNcbiAqIHVwIGEgYml0IGFuZCBhZGp1c3Rpbmcgc29tZSB0aWxlRWZmZWN0cyB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGZpeFJldmVyc2VXYWxscyhyb206IFJvbSkge1xuICAvLyBhZGp1c3QgdGlsZSBlZmZlY3QgZm9yIGJhY2sgdGlsZXMgb2YgaXJvbiB3YWxsXG4gIGZvciAoY29uc3QgdCBpbiBbMHgwNCwgMHgwNSwgMHgwOCwgMHgwOV0pIHtcbiAgICByb20udGlsZUVmZmVjdHNbMHhiYyAtIDB4YjNdLmVmZmVjdHNbdF0gPSAweDE4O1xuICAgIHJvbS50aWxlRWZmZWN0c1sweGI1IC0gMHhiM10uZWZmZWN0c1t0XSA9IDB4MTg7XG4gIH1cbiAgLy8gVE9ETyAtIG1vdmUgYWxsIHRoZSBlbnRyYW5jZXMgdG8geT0yMCBhbmQgZXhpdHMgdG8geXQ9MDFcbn1cblxuLyoqIE1ha2UgYSBsYW5kIGJyaWRnZSBpbiB1bmRlcmdyb3VuZCBjaGFubmVsICovXG5mdW5jdGlvbiB1bmRlcmdyb3VuZENoYW5uZWxMYW5kQnJpZGdlKHJvbTogUm9tKSB7XG4gIGNvbnN0IHt0aWxlc30gPSByb20uc2NyZWVuc1sweGExXTtcbiAgdGlsZXNbMHgyOF0gPSAweDlmO1xuICB0aWxlc1sweDM3XSA9IDB4MjM7XG4gIHRpbGVzWzB4MzhdID0gMHgyMzsgLy8gMHg4ZTtcbiAgdGlsZXNbMHgzOV0gPSAweDIxO1xuICB0aWxlc1sweDQ3XSA9IDB4OGQ7XG4gIHRpbGVzWzB4NDhdID0gMHg4ZjtcbiAgdGlsZXNbMHg1Nl0gPSAweDk5O1xuICB0aWxlc1sweDU3XSA9IDB4OWE7XG4gIHRpbGVzWzB4NThdID0gMHg4Yztcbn1cblxuZnVuY3Rpb24gZm9nTGFtcE5vdFJlcXVpcmVkKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCkge1xuICBjb25zdCB7XG4gICAgZmxhZ3M6IHtBbHdheXNUcnVlLCBJbmp1cmVkRG9scGhpbiwgRm9nTGFtcCxcbiAgICAgICAgICAgIEtlbnN1SW5DYWJpbiwgUmV0dXJuZWRGb2dMYW1wfSxcbiAgICBpdGVtczoge1NoZWxsRmx1dGV9LFxuICAgIGxvY2F0aW9uczoge0JvYXRIb3VzZSwgUG9ydG9hX0Zpc2hlcm1hbkhvdXNlfSxcbiAgICBucGNzLFxuICB9ID0gcm9tO1xuICAgIFxuICAvLyBOZWVkIHRvIG1ha2Ugc2V2ZXJhbCBjaGFuZ2VzLlxuICAvLyAoMSkgZG9scGhpbiBvbmx5IHJlcXVpcmVzIHNoZWxsIGZsdXRlLCBtYWtlIHRoZSBmbGFnIGNoZWNrIGZyZWVcbiAgLy8gICAgIHVubGVzcyBoZWFsaW5nIGlzIHJlcXVpcmVkLlxuICBjb25zdCByZXF1aXJlSGVhbGVkID0gZmxhZ3MucmVxdWlyZUhlYWxlZERvbHBoaW5Ub1JpZGUoKTtcbiAgU2hlbGxGbHV0ZS5pdGVtVXNlRGF0YVswXS53YW50ID1cbiAgICAgIHJlcXVpcmVIZWFsZWQgPyBJbmp1cmVkRG9scGhpbi5pZCA6IEFsd2F5c1RydWUuaWQ7XG4gIC8vICgyKSBrZW5zdSA2OCAoQDYxKSBkcm9wcyBhbiBpdGVtICg2NyBtYWdpYyByaW5nKVxuICBucGNzLktlbnN1SW5DYWJpbi5kYXRhWzBdID0gMHg2NztcbiAgbnBjcy5LZW5zdUluQ2FiaW4ubG9jYWxEaWFsb2dzLmdldCgtMSkhWzBdLm1lc3NhZ2UuYWN0aW9uID0gMHgwYTtcbiAgbnBjcy5LZW5zdUluQ2FiaW4ubG9jYWxEaWFsb2dzLmdldCgtMSkhWzBdLmZsYWdzID0gW107XG4gIG5wY3MuS2Vuc3VJbkNhYmluLnNwYXduQ29uZGl0aW9ucy5zZXQoQm9hdEhvdXNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtSZXR1cm5lZEZvZ0xhbXAuaWQsIH5LZW5zdUluQ2FiaW4uaWRdKTtcbiAgLy8gKDMpIGZpc2hlcm1hbiA2NCBzcGF3bnMgb24gZm9nIGxhbXAgcmF0aGVyIHRoYW4gc2hlbGwgZmx1dGVcbiAgbnBjcy5GaXNoZXJtYW4uc3Bhd25Db25kaXRpb25zLnNldChQb3J0b2FfRmlzaGVybWFuSG91c2UuaWQsIFtGb2dMYW1wLmlkXSk7XG5cbiAgLy8gKDQpIGZpeCB1cCBpdGVtZ2V0IDY3IGZyb20gaXRlbWdldCA2NCAoZGVsZXRlIHRoZSBmbGFnKVxuICByb20uaXRlbUdldHNbMHg2NF0uZmxhZ3MgPSBbXTtcbiAgcm9tLml0ZW1HZXRzWzB4NjddLmNvcHlGcm9tKHJvbS5pdGVtR2V0c1sweDY0XSk7XG4gIC8vcm9tLml0ZW1HZXRzWzB4NjddLmZsYWdzID0gWzB4MGMxXTtcblxuICAvLyBUT0RPIC0gZ3JhcGhpY3Mgc2NyZXdlZCB1cCAtIGZpZ3VyZSBvdXQgaWYgb2JqZWN0IGFjdGlvbiBpcyBjaGFuZ2luZ1xuICAvLyB0aGUgcGF0dGVybiB0YWJsZXMgYmFzZWQgb24gKGUuZy4pICQ2MDAseCBtYXliZT8gIENhbiB3ZSBwcmV2ZW50IGl0P1xuXG4gIC8vIFRPRE8gLSBhZGQgYSBub3RlcyBmaWxlIGFib3V0IHRoaXMuXG5cbn1cblxuLyoqXG4gKiBSZW1vdmUgdGltZXIgc3Bhd25zIGZyb20gYWxsIGNoZXN0cy4gIE1pbWljcyBoYXZlIGFscmVhZHkgYmVlblxuICogcmVudW1iZXJlZCB0byBiZSB1bmlxdWUgKHByZS1wYXJzZSkuICBOb3RlIHRoYXQgdGhlIHJlbnVtYmVyaW5nXG4gKiByZXF1aXJlcyBhbiBhc3NlbWJseSBjaGFuZ2UgKCQzZDNmZCBpbiBwcmVzaHVmZmxlLnMpLlxuICovXG5mdW5jdGlvbiBmaXhDaGVzdHMocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBsb2Mgb2Ygcm9tLmxvY2F0aW9ucykge1xuICAgIGZvciAoY29uc3QgcyBvZiBsb2Muc3Bhd25zKSB7XG4gICAgICBpZiAocy5pc0NoZXN0KCkpIHMudGltZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gVE9ETyAtIGZpbmQgYSBiZXR0ZXIgd2F5IHRvIGJ1bmRsZSBhc20gY2hhbmdlcz8gLSBidXQgaXQncyBhIG1lc3NcbiAgLy8gICAgICAgIHdpdGggc2hhcmluZyBsYWJlbHMsIHRyYWNraW5nIGNsb2JiZXJpbmcsIGV0Yy5cbiAgLy8gcm9tLmFzc2VtYmxlKClcbiAgLy8gICAgIC4kKCdhZGMgJDEwJylcbiAgLy8gICAgIC5iZXEoJ2xhYmVsJylcbiAgLy8gICAgIC5sc2goKVxuICAvLyAgICAgLmxzaChgJHthZGRyfSx4YClcbiAgLy8gICAgIC5sYWJlbCgnbGFiZWwnKTtcbiAgLy8gcm9tLnBhdGNoKClcbiAgLy8gICAgIC5vcmcoMHgzZDNmZClcbiAgLy8gICAgIC5ieXRlKDB4YjApO1xuXG4gIC8vIHJvbS5jb2RlLnJlcGxhY2UoMHgzYzE5MiwgMHgzYzFhNywgYFxuICAvLyAgICAgYXNsXG4gIC8vICAgICBhZGMgJDEwICA7IGRvIHNvbWV0aGluZ1xuICAvLyAgICAgYm5lICtcbiAgLy8gICAgICBydHNcbiAgLy8gICArIGptcCBGb29CYXJgKTtcbiAgLy8gcm9tLmNvZGUucmVwbGFjZUV4YWN0KHN0YXJ0LCBlbmQsIGNvZGUpO1xuICAvLyByb20uY29kZS5pbnNlcnQocGFnZSwgYFxuICAvLyAgICAgTGFiZWw6ICA7IHVzYWJsZSBmcm9tIGVsc2V3aGVyZT9cbiAgLy8gICAgIC0gYXNsXG4gIC8vICAgICAgIGJjYyAtXG4gIC8vICAgICAgIHJ0c2ApO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RHb2FGb3J0cmVzc1RyaWdnZXJzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IGwgPSByb20ubG9jYXRpb25zO1xuICAvLyBNb3ZlIEtlbGJlc3F1ZSAyIG9uZSBmdWxsIHRpbGUgbGVmdC5cbiAgbC5Hb2FGb3J0cmVzc19LZWxiZXNxdWUuc3Bhd25zWzBdLnggLT0gMTY7XG4gIC8vIFJlbW92ZSBzYWdlIHNjcmVlbiBsb2NrcyAoZXhjZXB0IEtlbnN1KS5cbiAgbC5Hb2FGb3J0cmVzc19aZWJ1LnNwYXducy5zcGxpY2UoMSwgMSk7IC8vIHplYnUgc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX1Rvcm5lbC5zcGF3bnMuc3BsaWNlKDIsIDEpOyAvLyB0b3JuZWwgc2NyZWVuIGxvY2sgdHJpZ2dlclxuICBsLkdvYUZvcnRyZXNzX0FzaW5hLnNwYXducy5zcGxpY2UoMiwgMSk7IC8vIGFzaW5hIHNjcmVlbiBsb2NrIHRyaWdnZXJcbiAgbC5Hb2FGb3J0cmVzc19LZW5zdS5zcGF3bnMuc3BsaWNlKDMsIDEpOyAvLyBrZW5zdSBodW1hbiBzY3JlZW4gbG9jayB0cmlnZ2VyXG4gIGwuR29hRm9ydHJlc3NfS2Vuc3Uuc3Bhd25zLnNwbGljZSgxLCAxKTsgLy8ga2Vuc3Ugc2xpbWUgc2NyZWVuIGxvY2sgdHJpZ2dlclxufVxuXG5mdW5jdGlvbiBhbGFybUZsdXRlSXNLZXlJdGVtKHJvbTogUm9tLCBmbGFnczpGbGFnU2V0KTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBpdGVtczoge0FsYXJtRmx1dGV9LFxuICAgIGZsYWdzOiB7VGFsa2VkVG9aZWJ1U3R1ZGVudCwgWmVidVN0dWRlbnR9LFxuICAgIGxvY2F0aW9uczoge01lemFtZVNocmluZSwgTGVhZl9TdHVkZW50SG91c2UsIFdhdGVyZmFsbENhdmU0LCBaZWJ1Q2F2ZX0sXG4gICAgbnBjczoge1dpbmRtaWxsR3VhcmQsIFplYnV9LFxuICB9ID0gcm9tO1xuXG4gIC8vIE1vdmUgYWxhcm0gZmx1dGUgdG8gdGhpcmQgcm93XG4gIHJvbS5pdGVtR2V0c1sweDMxXS5pbnZlbnRvcnlSb3dTdGFydCA9IDB4MjA7XG4gIC8vIEVuc3VyZSBhbGFybSBmbHV0ZSBjYW5ub3QgYmUgZHJvcHBlZFxuICAvLyByb20ucHJnWzB4MjEwMjFdID0gMHg0MzsgLy8gVE9ETyAtIHJvbS5pdGVtc1sweDMxXS4/Pz9cbiAgQWxhcm1GbHV0ZS51bmlxdWUgPSB0cnVlO1xuICAvLyBFbnN1cmUgYWxhcm0gZmx1dGUgY2Fubm90IGJlIHNvbGRcbiAgQWxhcm1GbHV0ZS5iYXNlUHJpY2UgPSAwO1xuXG4gIFxuICBpZiAoZmxhZ3MuemVidVN0dWRlbnRHaXZlc0l0ZW0oKSkge1xuICAgIC8vIFplYnUgc3R1ZGVudCAoYWthIHdpbmRtaWxsIGd1YXJkKTogc2Vjb25kYXJ5IGl0ZW0gLT4gYWxhcm0gZmx1dGVcbiAgICBXaW5kbWlsbEd1YXJkLmRhdGFbMV0gPSAweDMxO1xuICB9IGVsc2Uge1xuICAgIC8vIEFjdHVhbGx5IG1ha2UgdXNlIG9mIHRoZSBUYWxrZWRUb1plYnVTdHVkZXQgZmxhZztcbiAgICBXaW5kbWlsbEd1YXJkLmRhdGFbMV0gPSAweGZmOyAvLyBpbmRpY2F0ZSBub3RoaW5nIHRoZXJlOiBubyBzbG90LlxuICAgIGNvbnN0IGRpYWxvZyA9IFdpbmRtaWxsR3VhcmQuZGlhbG9nKExlYWZfU3R1ZGVudEhvdXNlKVswXTtcbiAgICBkaWFsb2cuY29uZGl0aW9uID0gflRhbGtlZFRvWmVidVN0dWRlbnQuaWQ7XG4gICAgZGlhbG9nLmZsYWdzLnB1c2goVGFsa2VkVG9aZWJ1U3R1ZGVudC5pZCk7XG4gICAgcmVwbGFjZShaZWJ1LnNwYXducyhaZWJ1Q2F2ZSksIFplYnVTdHVkZW50LmlkLCBUYWxrZWRUb1plYnVTdHVkZW50LmlkKTtcbiAgICAvLyBBbGFybSBmbHV0ZSBhbmQgYSBtZWRpY2FsIGhlcmIgYXJlIGluIGNoZXN0cyBpbiBtZXphbWVcbiAgICBNZXphbWVTaHJpbmUuc3Bhd25zLnB1c2goU3Bhd24ub2Yoe3NjcmVlbjogMCwgdGlsZTogMHg5YiwgdHlwZTogMiwgaWQ6IDB4MzF9KSk7XG4gICAgTWV6YW1lU2hyaW5lLnNwYXducy5wdXNoKFNwYXduLm9mKHtzY3JlZW46IDAsIHRpbGU6IDB4OTUsIHR5cGU6IDIsIGlkOiAweDQ5fSkpO1xuICAgIHJvbS5pdGVtR2V0c1sweDQ5XS5pdGVtSWQgPSByb20uaXRlbXMuTWVkaWNhbEhlcmIuaWQ7XG4gIH1cblxuICAvLyBSZW1vdmUgYWxhcm0gZmx1dGUgZnJvbSBzaG9wcyAocmVwbGFjZSB3aXRoIG90aGVyIGl0ZW1zKVxuICAvLyBOT1RFIC0gd2UgY291bGQgc2ltcGxpZnkgdGhpcyB3aG9sZSB0aGluZyBieSBqdXN0IGhhcmRjb2RpbmcgaW5kaWNlcy5cbiAgLy8gICAgICAtIGlmIHRoaXMgaXMgZ3VhcmFudGVlZCB0byBoYXBwZW4gZWFybHksIGl0J3MgYWxsIHRoZSBzYW1lLlxuICBjb25zdCByZXBsYWNlbWVudHMgPSBbXG4gICAgWzB4MjEsIDAuNzJdLCAvLyBmcnVpdCBvZiBwb3dlciwgNzIlIG9mIGNvc3RcbiAgICBbMHgxZiwgMC45XSwgLy8gbHlzaXMgcGxhbnQsIDkwJSBvZiBjb3N0XG4gIF07XG4gIGxldCBqID0gMDtcbiAgZm9yIChjb25zdCBzaG9wIG9mIHJvbS5zaG9wcykge1xuICAgIGlmIChzaG9wLnR5cGUgIT09IFNob3BUeXBlLlRPT0wpIGNvbnRpbnVlO1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBzaG9wLmNvbnRlbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoc2hvcC5jb250ZW50c1tpXSAhPT0gMHgzMSkgY29udGludWU7XG4gICAgICBjb25zdCBbaXRlbSwgcHJpY2VSYXRpb10gPSByZXBsYWNlbWVudHNbKGorKykgJSByZXBsYWNlbWVudHMubGVuZ3RoXTtcbiAgICAgIHNob3AuY29udGVudHNbaV0gPSBpdGVtO1xuICAgICAgaWYgKHJvbS5zaG9wRGF0YVRhYmxlc0FkZHJlc3MpIHtcbiAgICAgICAgLy8gTk9URTogdGhpcyBpcyBicm9rZW4gLSBuZWVkIGEgY29udHJvbGxlZCB3YXkgdG8gY29udmVydCBwcmljZSBmb3JtYXRzXG4gICAgICAgIHNob3AucHJpY2VzW2ldID0gTWF0aC5yb3VuZChzaG9wLnByaWNlc1tpXSAqIHByaWNlUmF0aW8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIENoYW5nZSBmbHV0ZSBvZiBsaW1lIGNoZXN0J3MgKG5vdy11bnVzZWQpIGl0ZW1nZXQgdG8gaGF2ZSBtZWRpY2FsIGhlcmJcbiAgcm9tLml0ZW1HZXRzWzB4NWJdLml0ZW1JZCA9IDB4MWQ7XG4gIC8vIENoYW5nZSB0aGUgYWN0dWFsIHNwYXduIGZvciB0aGF0IGNoZXN0IHRvIGJlIHRoZSBtaXJyb3JlZCBzaGllbGQgY2hlc3RcbiAgV2F0ZXJmYWxsQ2F2ZTQuc3Bhd24oMHgxOSkuaWQgPSAweDEwO1xuXG4gIC8vIFRPRE8gLSByZXF1aXJlIG5ldyBjb2RlIGZvciB0d28gdXNlc1xufVxuXG5mdW5jdGlvbiBicm9rYWhhbmFXYW50c01hZG8xKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtmbGFnczoge0thcm1pbmUsIE1hZG8xfSwgbnBjczoge0Jyb2thaGFuYX19ID0gcm9tO1xuICBjb25zdCBkaWFsb2cgPSBhc3NlcnQoQnJva2FoYW5hLmxvY2FsRGlhbG9ncy5nZXQoLTEpKVswXTtcbiAgaWYgKGRpYWxvZy5jb25kaXRpb24gIT09IH5LYXJtaW5lLmlkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBCYWQgYnJva2FoYW5hIGNvbmRpdGlvbjogJHtkaWFsb2cuY29uZGl0aW9ufWApO1xuICB9XG4gIGRpYWxvZy5jb25kaXRpb24gPSB+TWFkbzEuaWQ7XG59XG5cbmZ1bmN0aW9uIHJlcXVpcmVIZWFsZWREb2xwaGluKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge0luanVyZWREb2xwaGluLCBTaGVsbEZsdXRlfSxcbiAgICBucGNzOiB7RmlzaGVybWFuLCBGaXNoZXJtYW5EYXVnaHRlcn0sXG4gIH0gPSByb207XG4gIC8vIE5vcm1hbGx5IHRoZSBmaXNoZXJtYW4gKCQ2NCkgc3Bhd25zIGluIGhpcyBob3VzZSAoJGQ2KSBpZiB5b3UgaGF2ZVxuICAvLyB0aGUgc2hlbGwgZmx1dGUgKDIzNikuICBIZXJlIHdlIGFsc28gYWRkIGEgcmVxdWlyZW1lbnQgb24gdGhlIGhlYWxlZFxuICAvLyBkb2xwaGluIHNsb3QgKDAyNSksIHdoaWNoIHdlIGtlZXAgYXJvdW5kIHNpbmNlIGl0J3MgYWN0dWFsbHkgdXNlZnVsLlxuICBGaXNoZXJtYW4uc3Bhd25Db25kaXRpb25zLnNldCgweGQ2LCBbU2hlbGxGbHV0ZS5pZCwgSW5qdXJlZERvbHBoaW4uaWRdKTtcbiAgLy8gQWxzbyBmaXggZGF1Z2h0ZXIncyBkaWFsb2cgKCQ3YikuXG4gIGNvbnN0IGRhdWdodGVyRGlhbG9nID0gRmlzaGVybWFuRGF1Z2h0ZXIubG9jYWxEaWFsb2dzLmdldCgtMSkhO1xuICBkYXVnaHRlckRpYWxvZy51bnNoaWZ0KGRhdWdodGVyRGlhbG9nWzBdLmNsb25lKCkpO1xuICBkYXVnaHRlckRpYWxvZ1swXS5jb25kaXRpb24gPSB+SW5qdXJlZERvbHBoaW4uaWQ7XG4gIGRhdWdodGVyRGlhbG9nWzFdLmNvbmRpdGlvbiA9IH5TaGVsbEZsdXRlLmlkO1xufVxuXG5mdW5jdGlvbiByZXF1aXJlVGVsZXBhdGh5Rm9yRGVvKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge1RlbGVwYXRoeX0sXG4gICAgbnBjczoge0RlbywgU2FoYXJhQnVubnl9LFxuICB9ID0gcm9tO1xuICAvLyBOb3QgaGF2aW5nIHRlbGVwYXRoeSAoMjQzKSB3aWxsIHRyaWdnZXIgYSBcImt5dSBreXVcIiAoMWE6MTIsIDFhOjEzKSBmb3JcbiAgLy8gYm90aCBnZW5lcmljIGJ1bm5pZXMgKDU5KSBhbmQgZGVvICg1YSkuXG4gIFNhaGFyYUJ1bm55Lmdsb2JhbERpYWxvZ3MucHVzaChHbG9iYWxEaWFsb2cub2YoflRlbGVwYXRoeS5pZCwgWzB4MWEsIDB4MTJdKSk7XG4gIERlby5nbG9iYWxEaWFsb2dzLnB1c2goR2xvYmFsRGlhbG9nLm9mKH5UZWxlcGF0aHkuaWQsIFsweDFhLCAweDEzXSkpO1xufVxuXG5mdW5jdGlvbiB0ZWxlcG9ydE9uVGh1bmRlclN3b3JkKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge1dhcnBTaHlyb259LFxuICB9ID0gcm9tO1xuICAvLyBpdGVtZ2V0IDAzIHN3b3JkIG9mIHRodW5kZXIgPT4gc2V0IDJmZCBzaHlyb24gd2FycCBwb2ludFxuICByb20uaXRlbUdldHNbMHgwM10uZmxhZ3MucHVzaChXYXJwU2h5cm9uLmlkKTtcbn1cblxuZnVuY3Rpb24gbm9UZWxlcG9ydE9uVGh1bmRlclN3b3JkKHJvbTogUm9tKTogdm9pZCB7XG4gIC8vIENoYW5nZSBzd29yZCBvZiB0aHVuZGVyJ3MgYWN0aW9uIHRvIGJiZSB0aGUgc2FtZSBhcyBvdGhlciBzd29yZHMgKDE2KVxuICByb20uaXRlbUdldHNbMHgwM10uYWNxdWlzaXRpb25BY3Rpb24uYWN0aW9uID0gMHgxNjtcbn1cblxuZnVuY3Rpb24gYWRqdXN0SXRlbU5hbWVzKHJvbTogUm9tLCBmbGFnczogRmxhZ1NldCk6IHZvaWQge1xuICBpZiAoZmxhZ3MubGVhdGhlckJvb3RzR2l2ZVNwZWVkKCkpIHtcbiAgICAvLyByZW5hbWUgbGVhdGhlciBib290cyB0byBzcGVlZCBib290c1xuICAgIGNvbnN0IGxlYXRoZXJCb290cyA9IHJvbS5pdGVtc1sweDJmXSE7XG4gICAgbGVhdGhlckJvb3RzLm1lbnVOYW1lID0gJ1NwZWVkIEJvb3RzJztcbiAgICBsZWF0aGVyQm9vdHMubWVzc2FnZU5hbWUgPSAnU3BlZWQgQm9vdHMnO1xuICAgIGlmIChmbGFncy5jaGFuZ2VHYXNNYXNrVG9IYXptYXRTdWl0KCkpIHtcbiAgICAgIGNvbnN0IGdhc01hc2sgPSByb20uaXRlbXNbMHgyOV07XG4gICAgICBnYXNNYXNrLm1lbnVOYW1lID0gJ0hhem1hdCBTdWl0JztcbiAgICAgIGdhc01hc2subWVzc2FnZU5hbWUgPSAnSGF6bWF0IFN1aXQnO1xuICAgIH1cbiAgfVxuXG4gIC8vIHJlbmFtZSBiYWxscyB0byBvcmJzXG4gIGZvciAobGV0IGkgPSAweDA1OyBpIDwgMHgwYzsgaSArPSAyKSB7XG4gICAgcm9tLml0ZW1zW2ldLm1lbnVOYW1lID0gcm9tLml0ZW1zW2ldLm1lbnVOYW1lLnJlcGxhY2UoJ0JhbGwnLCAnT3JiJyk7XG4gICAgcm9tLml0ZW1zW2ldLm1lc3NhZ2VOYW1lID0gcm9tLml0ZW1zW2ldLm1lc3NhZ2VOYW1lLnJlcGxhY2UoJ0JhbGwnLCAnT3JiJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFrZUJyYWNlbGV0c1Byb2dyZXNzaXZlKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge0JhbGxPZldpbmQsIFRvcm5hZG9CcmFjZWxldH0sXG4gICAgbnBjczoge1Rvcm5lbH0sXG4gIH0gPSByb207XG4gIC8vIHRvcm5lbCdzIHRyaWdnZXIgbmVlZHMgYm90aCBpdGVtc1xuICBjb25zdCB2YW5pbGxhID0gVG9ybmVsLmxvY2FsRGlhbG9ncy5nZXQoMHgyMSkhO1xuICBjb25zdCBwYXRjaGVkID0gW1xuICAgIHZhbmlsbGFbMF0sIC8vIGFscmVhZHkgbGVhcm5lZCB0ZWxlcG9ydFxuICAgIHZhbmlsbGFbMl0sIC8vIGRvbid0IGhhdmUgdG9ybmFkbyBicmFjZWxldFxuICAgIHZhbmlsbGFbMl0uY2xvbmUoKSwgLy8gd2lsbCBjaGFuZ2UgdG8gZG9uJ3QgaGF2ZSBvcmJcbiAgICB2YW5pbGxhWzFdLCAvLyBoYXZlIGJyYWNlbGV0LCBsZWFybiB0ZWxlcG9ydFxuICBdO1xuICBwYXRjaGVkWzFdLmNvbmRpdGlvbiA9IH5Ub3JuYWRvQnJhY2VsZXQuaWQ7IC8vIGRvbid0IGhhdmUgYnJhY2VsZXRcbiAgcGF0Y2hlZFsyXS5jb25kaXRpb24gPSB+QmFsbE9mV2luZC5pZDsgLy8gZG9uJ3QgaGF2ZSBvcmJcbiAgcGF0Y2hlZFszXS5jb25kaXRpb24gPSB+MDsgICAgIC8vIGRlZmF1bHRcbiAgVG9ybmVsLmxvY2FsRGlhbG9ncy5zZXQoMHgyMSwgcGF0Y2hlZCk7XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5SW52aXNpYmxlQ2hlc3RzKHJvbTogUm9tKTogdm9pZCB7XG4gIGNvbnN0IHtDb3JkZWxQbGFpbkVhc3QsIEtpcmlzYU1lYWRvdywgVW5kZXJncm91bmRDaGFubmVsfSA9IHJvbS5sb2NhdGlvbnM7XG4gIGZvciAoY29uc3QgbG9jYXRpb24gb2YgW0NvcmRlbFBsYWluRWFzdCwgS2lyaXNhTWVhZG93LCBVbmRlcmdyb3VuZENoYW5uZWxdKSB7XG4gICAgZm9yIChjb25zdCBzcGF3biBvZiBsb2NhdGlvbi5zcGF3bnMpIHtcbiAgICAgIC8vIHNldCB0aGUgbmV3IFwiaW52aXNpYmxlXCIgZmxhZyBvbiB0aGUgY2hlc3QuXG4gICAgICBpZiAoc3Bhd24uaXNDaGVzdCgpKSBzcGF3bi5kYXRhWzJdIHw9IDB4MjA7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCB0aGUgc3RhdHVlIG9mIG9ueXggYW5kIHBvc3NpYmx5IHRoZSB0ZWxlcG9ydCBibG9jayB0cmlnZ2VyIHRvIENvcmRlbCBXZXN0XG5mdW5jdGlvbiBhZGRDb3JkZWxXZXN0VHJpZ2dlcnMocm9tOiBSb20sIGZsYWdzOiBGbGFnU2V0KSB7XG4gIGNvbnN0IHtDb3JkZWxQbGFpbkVhc3QsIENvcmRlbFBsYWluV2VzdH0gPSByb20ubG9jYXRpb25zO1xuICBmb3IgKGNvbnN0IHNwYXduIG9mIENvcmRlbFBsYWluRWFzdC5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNDaGVzdCgpIHx8IChmbGFncy5kaXNhYmxlVGVsZXBvcnRTa2lwKCkgJiYgc3Bhd24uaXNUcmlnZ2VyKCkpKSB7XG4gICAgICAvLyBDb3B5IGlmICgxKSBpdCdzIHRoZSBjaGVzdCwgb3IgKDIpIHdlJ3JlIGRpc2FibGluZyB0ZWxlcG9ydCBza2lwXG4gICAgICBDb3JkZWxQbGFpbldlc3Quc3Bhd25zLnB1c2goc3Bhd24uY2xvbmUoKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpeFJhYmJpdFNraXAocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBzcGF3biBvZiByb20ubG9jYXRpb25zLk10U2FicmVOb3J0aF9NYWluLnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4Nikge1xuICAgICAgaWYgKHNwYXduLnggPT09IDB4NzQwKSB7XG4gICAgICAgIHNwYXduLnggKz0gMTY7XG4gICAgICAgIHNwYXduLnkgKz0gMTY7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpeEZsaWdodFN0YXR1ZVNraXAocm9tOiBSb20pOiB2b2lkIHtcbiAgLy8gU3dpdGNoIHRvIGEgd2lkZXIgaGl0Ym94IHRoYXQgcHJldmVudHMgc25lYWtpbmcgYXJvdW5kIHRoZSBlZGdlLlxuICAvLyBPcHRpb25zOlxuICAvLyAgICQxNyBpcyByaWRpY3Vsb3VzbHkgd2lkZSwgYnV0IGFjdHVhbGx5IGEgbGl0dGxlIHNob3J0ZXIuXG4gIC8vICAgICAgIE1haW4gZG93bnNpZGUgaXMgdGhhdCB0aGUgdmVydGljYWwgYWxpZ25tZW50IGlzIGRpZmZlcmVudCxcbiAgLy8gICAgICAgc28gaXQgaGl0cyB3aGVuIHBsYXllciBpcyBiZWxvdyBhbmQgZG9lc24ndCBoaXQgcmlnaHQgYWJvdmUuXG4gIC8vICAgJDBlIGlzIG9ubHkgc2xpZ2h0bHkgd2lkZXIsIGJ1dCB0YWxsZXIuICBUaGlzIGNhdXNlcyB0aGUgYmVhbVxuICAvLyAgICAgICB0byBoaXQgc2V2ZXJhbCBwaXhlbHMgYXdheSBmcm9tIGFuIGFjdHVhbCB2aXN1YWwgY29sbGlzaW9uLlxuICAvLyAgICQwNiBpcyB1bnVzZWQsIHNvIHdlIGNhbiByZXB1cnBvc2UgaXQuICBXZSBhZGQgNiBob3Jpem9udGFsXG4gIC8vICAgICAgIHBpeGVscyBhbmQgMiB2ZXJ0aWNhbCBwaXhlbHMgdG8gZWFjaCBzaWRlIGZyb20gdGhlIG9yaWdpbmFsXG4gIC8vICAgICAgIGhpdGJveCAxLCB3aGljaCBzZWVtcyB0b1xuICAvLyAgICAgICBiZSB0aGUgbWluaW11bVxuICBjb25zdCBvbGRIaXRib3ggPSByb20uaGl0Ym94ZXNbcm9tLm9iamVjdHMuZ3VhcmRpYW5TdGF0dWVNaXNzaWxlLmhpdGJveF07XG4gIGNvbnN0IG5ld0hpdGJveCA9IHJvbS5oaXRib3hlc1s2XTtcbiAgcm9tLm9iamVjdHMuZ3VhcmRpYW5TdGF0dWVNaXNzaWxlLmhpdGJveCA9IG5ld0hpdGJveC5pZDtcbiAgbmV3SGl0Ym94LngwID0gb2xkSGl0Ym94LngwIC0gNjtcbiAgbmV3SGl0Ym94LncgID0gb2xkSGl0Ym94LncgICsgMTI7XG4gIG5ld0hpdGJveC55MCA9IG9sZEhpdGJveC55MCAtIDI7XG4gIG5ld0hpdGJveC5oICA9IG9sZEhpdGJveC5oICArIDQ7XG59XG5cbmZ1bmN0aW9uIHBhdGNoVG9vTWFueUl0ZW1zTWVzc2FnZShyb206IFJvbSkge1xuICByb20ubWVzc2FnZXMucGFydHNbMHgyMF1bMHgwZl0udGV4dCArPSAnXFxuSXRlbTogWzpJVEVNOl0nO1xufVxuXG5mdW5jdGlvbiBhZGRab21iaWVXYXJwKHJvbTogUm9tKSB7XG4gIGNvbnN0IHtcbiAgICBmbGFnczoge1dhcnBab21iaWV9LFxuICAgIGxvY2F0aW9uczoge1pvbWJpZVRvd259LFxuICB9ID0gcm9tO1xuICAvLyBNYWtlIHNwYWNlIGZvciB0aGUgbmV3IGZsYWcgYmV0d2VlbiBKb2VsIGFuZCBTd2FuXG4gIHJvbS5mbGFncy5pbnNlcnRab21iaWVXYXJwRmxhZygpO1xuICAvLyBVcGRhdGUgdGhlIG1lbnVcbiAgY29uc3QgbWVzc2FnZSA9IHJvbS5tZXNzYWdlcy5wYXJ0c1sweDIxXVswXTtcbiAgbWVzc2FnZS50ZXh0ID0gW1xuICAgICcgezFhOkxlYWZ9ICAgICAgezE2OkJyeW5tYWVyfSB7MWQ6T2FrfSAnLFxuICAgICd7MGM6TmFkYXJlfVxcJ3MgIHsxZTpQb3J0b2F9ICAgezE0OkFtYXpvbmVzfSAnLFxuICAgICd7MTk6Sm9lbH0gICAgICBab21iaWUgICB7MjA6U3dhbn0gJyxcbiAgICAnezIzOlNoeXJvbn0gICAgezE4OkdvYX0gICAgICB7MjE6U2FoYXJhfScsXG4gIF0uam9pbignXFxuJyk7XG4gIC8vIEFkZCBhIHRyaWdnZXIgdG8gdGhlIGVudHJhbmNlIC0gdGhlcmUncyBhbHJlYWR5IGEgc3Bhd24gZm9yIDhhXG4gIC8vIGJ1dCB3ZSBjYW4ndCByZXVzZSB0aGF0IHNpbmNlIGl0J3MgdGhlIHNhbWUgYXMgdGhlIG9uZSBvdXRzaWRlXG4gIC8vIHRoZSBtYWluIEVTSSBlbnRyYW5jZTsgc28gcmV1c2UgYSBkaWZmZXJlbnQgb25lLlxuICBjb25zdCB0cmlnZ2VyID0gcm9tLm5leHRGcmVlVHJpZ2dlcignem9tYmllIHdhcnAnKTtcbiAgdHJpZ2dlci51c2VkID0gdHJ1ZTtcbiAgdHJpZ2dlci5jb25kaXRpb25zID0gW107XG4gIHRyaWdnZXIubWVzc2FnZSA9IE1lc3NhZ2VJZC5vZih7fSk7XG4gIHRyaWdnZXIuZmxhZ3MgPSBbV2FycFpvbWJpZS5pZF07IC8vIG5ldyB3YXJwIHBvaW50IGZsYWdcbiAgLy8gQWN0dWFsbHkgcmVwbGFjZSB0aGUgdHJpZ2dlci5cbiAgZm9yIChjb25zdCBzcGF3biBvZiBab21iaWVUb3duLnNwYXducykge1xuICAgIGlmIChzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4YSkgc3Bhd24uaWQgPSB0cmlnZ2VyLmlkO1xuICB9XG4gIC8vIEluc2VydCBpbnRvIHRoZSB3YXJwIHRhYmxlLlxuICByb20udG93bldhcnAubG9jYXRpb25zLnNwbGljZSg3LCAwLCBab21iaWVUb3duLmlkKTtcbiAgaWYgKHJvbS50b3duV2FycC5sb2NhdGlvbnMucG9wKCkgIT09IDB4ZmYpIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCcpO1xuICAvLyBBU00gZml4ZXMgc2hvdWxkIGhhdmUgaGFwcGVuZWQgaW4gcHJlc2h1ZmZsZS5zXG59XG5cbmZ1bmN0aW9uIGV2aWxTcGlyaXRJc2xhbmRSZXF1aXJlc0RvbHBoaW4ocm9tOiBSb20pIHtcbiAgcm9tLnRyaWdnZXIoMHg4YSkuY29uZGl0aW9ucyA9IFt+cm9tLmZsYWdzLkN1cnJlbnRseVJpZGluZ0RvbHBoaW4uaWRdO1xuICByb20ubWVzc2FnZXMucGFydHNbMHgxZF1bMHgxMF0udGV4dCA9IGBUaGUgY2F2ZSBlbnRyYW5jZSBhcHBlYXJzXG50byBiZSB1bmRlcndhdGVyLiBZb3UnbGxcbm5lZWQgdG8gc3dpbS5gO1xufVxuXG5mdW5jdGlvbiBsZWFmRWxkZXJJblNhYnJlSGVhbHMocm9tOiBSb20pOiB2b2lkIHtcbiAgY29uc3QgbGVhZkVsZGVyID0gcm9tLm5wY3NbMHgwZF07XG4gIGNvbnN0IHN1bW1pdERpYWxvZyA9IGxlYWZFbGRlci5sb2NhbERpYWxvZ3MuZ2V0KDB4MzUpIVswXTtcbiAgc3VtbWl0RGlhbG9nLm1lc3NhZ2UuYWN0aW9uID0gMHgxNzsgLy8gaGVhbCBhbmQgZGlzYXBwZWFyLlxufVxuXG4vLyBQcmV2ZW50IFJhZ2Ugc2tpcCBieSBhZGRpbmcgdHJlZXMgb24gZWl0aGVyIHNpZGUgb2YgZW50cmFuY2UuXG4vLyBUT0RPIC0gbWFrZSB0aGlzIG9wdGlvbmFsPyBhY2NvdW50IGZvciBpdCBpbiBsb2dpYz9cbmZ1bmN0aW9uIHBhdGNoTGltZVRyZWVMYWtlKHJvbTogUm9tKTogdm9pZCB7XG4gIHJvbS5tZXRhdGlsZXNldHMubGltZS5nZXRUaWxlKDB4N2MpLnNldEVmZmVjdHMoNik7XG4gIHJvbS5tZXRhdGlsZXNldHMubGltZS5nZXRUaWxlKDB4N2YpLnNldEVmZmVjdHMoNik7XG4gIHJvbS5tZXRhdGlsZXNldHMubGltZS5nZXRUaWxlKDB4N2IpLnNldFRpbGVzKFsweDdmLCAweDdmLCAweDdmLCAweDdmXSlcbiAgICAgIC5zZXRBdHRycygwKS5zZXRFZmZlY3RzKDYpOyAvLy5yZXBsYWNlSW4ocm9tLm1ldGFzY3JlZW5zLmxpbWVUcmVlTGFrZSk7XG5cblxuICByb20uc2NyZWVuc1sweDc0XS5zZXQyZCgweDkwLCBbXG4gICAgWzB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIG51bGwsIG51bGwsXG4gICAgIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2IsIDB4N2JdLFxuICAgIFsweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCBudWxsLCBudWxsLFxuICAgICAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiLCAweDdiXSxcbiAgXG5cblxuICAvLyByb20uc2NyZWVuc1sweDc0XS5zZXQyZCgweDkwLCBbXG4gIC8vICAgWzB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2QsIDB4N2UsXG4gIC8vICAgIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2MsIDB4N2YsIDB4N2NdLFxuICAvLyAgIFsweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCBudWxsLCBudWxsLFxuICAvLyAgICAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwLCAweDMwXSxcbiAgLy8gICBbMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgbnVsbCwgbnVsbCxcbiAgLy8gICAgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMCwgMHgzMF0sXG5cblxuXG4gICAgLy8gRGlmZmVyZW50IG9wdGlvbnMgdG8gZmlsbCBpbiB0aGUgc3BhY2VzLi4uXG4gICAgLy8gWzB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzMsIDB4NzNdLFxuICAgIC8vIFsweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCBudWxsLCBudWxsLFxuICAgIC8vICAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1LCAweDY1XSxcbiAgICAvLyBbMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgbnVsbCwgbnVsbCxcbiAgICAvLyAgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2NywgMHg2N10sXG4gICAgLy8gWzB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIG51bGwsIG51bGwsXG4gICAgLy8gIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzAsIDB4MzBdLFxuICAgIC8vIFsweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCBudWxsLCBudWxsLFxuICAgIC8vICAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmLCAweDdjLCAweDdmXSxcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnROcGNEZXNwYXducyhyb206IFJvbSwgb3B0czogRmxhZ1NldCk6IHZvaWQge1xuICBmdW5jdGlvbiByZW1vdmU8VD4oYXJyOiBUW10sIGVsZW06IFQpOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IGFyci5pbmRleE9mKGVsZW0pO1xuICAgIGlmIChpbmRleCA8IDApIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgZWxlbWVudCAke2VsZW19IGluICR7YXJyfWApO1xuICAgIGFyci5zcGxpY2UoaW5kZXgsIDEpO1xuICB9XG4gIGZ1bmN0aW9uIHJlbW92ZUlmPFQ+KGFycjogVFtdLCBwcmVkOiAoZWxlbTogVCkgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyLmZpbmRJbmRleChwcmVkKTtcbiAgICBpZiAoaW5kZXggPCAwKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIGVsZW1lbnQgaW4gJHthcnJ9YCk7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cblxuICAvLyBmdW5jdGlvbiBkaWFsb2coaWQ6IG51bWJlciwgbG9jOiBudW1iZXIgPSAtMSk6IExvY2FsRGlhbG9nW10ge1xuICAvLyAgIGNvbnN0IHJlc3VsdCA9IHJvbS5ucGNzW2lkXS5sb2NhbERpYWxvZ3MuZ2V0KGxvYyk7XG4gIC8vICAgaWYgKCFyZXN1bHQpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBkaWFsb2cgJCR7aGV4KGlkKX0gYXQgJCR7aGV4KGxvYyl9YCk7XG4gIC8vICAgcmV0dXJuIHJlc3VsdDtcbiAgLy8gfVxuICAvLyBmdW5jdGlvbiBzcGF3bnMoaWQ6IG51bWJlciwgbG9jOiBudW1iZXIpOiBudW1iZXJbXSB7XG4gIC8vICAgY29uc3QgcmVzdWx0ID0gcm9tLm5wY3NbaWRdLnNwYXduQ29uZGl0aW9ucy5nZXQobG9jKTtcbiAgLy8gICBpZiAoIXJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHNwYXduIGNvbmRpdGlvbiAkJHtoZXgoaWQpfSBhdCAkJHtoZXgobG9jKX1gKTtcbiAgLy8gICByZXR1cm4gcmVzdWx0O1xuICAvLyB9XG5cbiAgLy8gTGluayBzb21lIHJlZHVuZGFudCBOUENzOiBLZW5zdSAoN2UsIDc0KSBhbmQgQWthaGFuYSAoODgsIDE2KVxuXG4gIGNvbnN0IHtcbiAgICBsb2NhdGlvbnM6IHtcbiAgICAgIEJvYXRIb3VzZSwgQnJ5bm1hZXIsXG4gICAgICBDcnlwdF9EcmF5Z29uMixcbiAgICAgIEpvZWxfU2hlZCxcbiAgICAgIExlYWZfRWxkZXJIb3VzZSxcbiAgICAgIE10U2FicmVOb3J0aF9TdW1taXRDYXZlLCBNdFNhYnJlV2VzdF9VcHBlcixcbiAgICAgIFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLCBQb3J0b2FfUGFsYWNlRW50cmFuY2UsXG4gICAgICBQb3J0b2FfQXNpbmFSb29tLCBQb3J0b2FfRm9ydHVuZVRlbGxlcixcbiAgICAgIFNoeXJvbl9UZW1wbGUsIFN0b21Ib3VzZSwgU3dhbl9EYW5jZUhhbGwsIFN3YW5fVGF2ZXJuLFxuICAgICAgV2luZG1pbGxDYXZlLCBXYXRlcmZhbGxDYXZlNCwgV2F0ZXJmYWxsVmFsbGV5Tm9ydGgsXG4gICAgICBaZWJ1Q2F2ZSwgWm9tYmllVG93bl9Ib3VzZUJhc2VtZW50LFxuICAgIH0sXG4gICAgaXRlbXM6IHtcbiAgICAgIEdsb3dpbmdMYW1wLCBLZXlUb1ByaXNvbiwgTG92ZVBlbmRhbnQsIFN0YXR1ZU9mT255eCxcbiAgICB9LFxuICAgIG5wY3M6IHtcbiAgICAgIEFrYWhhbmEgLyogMTYgKi8sIEFrYWhhbmFJbkJyeW5tYWVyLCAvKiA4MiAqLyBBc2luYSAvKiA2MiAqLyxcbiAgICAgIEF6dGVjYUluU2h5cm9uIC8qIDZlICovLFxuICAgICAgQ2xhcmsgLyogNDQgKi8sIERyYXlnb24gLyogY2IgKi8sIEZvcnR1bmVUZWxsZXIgLyogMzkgKi8sXG4gICAgICBLZW5zdSAvKiA3ZSAqLywgS2Vuc3VJbkNhYmluIC8qIDY4ICovLCBLZW5zdUluU3dhbiAvKiA3NCAqLyxcbiAgICAgIExlYWZFbGRlciAvKiAwZCAqLywgTGVhZlJhYmJpdCAvKiAxMyAqLyxcbiAgICAgIE9ha0NoaWxkIC8qIDFmICovLCBPYWtFbGRlciAvKiAxZCAqLywgT2FrTW90aGVyIC8qIDFlICovLFxuICAgICAgUG9ydG9hUGFsYWNlRnJvbnRHdWFyZCAvKiAzNCAqLywgUG9ydG9hUXVlZW4gLyogMzggKi8sXG4gICAgICBQb3J0b2FUaHJvbmVSb29tQmFja0Rvb3JHdWFyZCAvKiAzMyAqLywgUmFnZSAvKiBjMyAqLyxcbiAgICAgIFN0b20gLyogNjAgKi8sIFN0b25lZEFrYWhhbmEgLyogODggKi8sXG4gICAgICBUb3JuZWwgLyogNWYgKi8sIFdpbmRtaWxsR3VhcmQgLyogMTQgKi8sIFplYnUgLyogNWUgKi8sXG4gICAgfSxcbiAgICBmbGFncyxcbiAgfSA9IHJvbTtcblxuICBLZW5zdS5sb2NhbERpYWxvZ3MuZGVsZXRlKFN3YW5fVGF2ZXJuLmlkKTsgLy8gdW51c2VkIGRpYWxvZ1xuICBLZW5zdUluU3dhbi5saW5rKEtlbnN1LmlkKTtcbiAgS2Vuc3VJblN3YW4udXNlZCA9IHRydWU7XG4gIEtlbnN1SW5Td2FuLmRhdGEgPSBbLi4uS2Vuc3UuZGF0YV0gYXMgYW55O1xuICBLZW5zdS5kYXRhWzBdID0gR2xvd2luZ0xhbXAuaWQ7XG4gIFN3YW5fRGFuY2VIYWxsLnNwYXducy5maW5kKHMgPT4gcy5pc05wYygpICYmIHMuaWQgPT09IEtlbnN1LmlkKSEuaWQgPVxuICAgICAgS2Vuc3VJblN3YW4uaWQ7XG4gIExvdmVQZW5kYW50Lml0ZW1Vc2VEYXRhWzBdLndhbnQgPSAweDEwMCB8IEtlbnN1SW5Td2FuLmlkO1xuXG4gIC8vIGRpYWxvZyBpcyBzaGFyZWQgYmV0d2VlbiA4OCBhbmQgMTYuXG4gIFN0b25lZEFrYWhhbmEubGlua0RpYWxvZyhBa2FoYW5hLmlkKTtcblxuICAvLyBNYWtlIGEgbmV3IE5QQyBmb3IgQWthaGFuYSBpbiBCcnlubWFlcjsgb3RoZXJzIHdvbid0IGFjY2VwdCB0aGUgU3RhdHVlIG9mIE9ueXguXG4gIC8vIExpbmtpbmcgc3Bhd24gY29uZGl0aW9ucyBhbmQgZGlhbG9ncyBpcyBzdWZmaWNpZW50LCBzaW5jZSB0aGUgYWN0dWFsIE5QQyBJRFxuICAvLyAoMTYgb3IgODIpIGlzIHdoYXQgbWF0dGVycyBmb3IgdGhlIHRyYWRlLWluXG4gIEFrYWhhbmFJbkJyeW5tYWVyLnVzZWQgPSB0cnVlO1xuICBBa2FoYW5hSW5CcnlubWFlci5saW5rKEFrYWhhbmEuaWQpO1xuICBBa2FoYW5hSW5CcnlubWFlci5kYXRhID0gWy4uLkFrYWhhbmEuZGF0YV0gYXMgYW55OyAvLyBlbnN1cmUgZ2l2ZSBpdGVtXG4gIEJyeW5tYWVyLnNwYXducy5maW5kKHMgPT4gcy5pc05wYygpICYmIHMuaWQgPT09IEFrYWhhbmEuaWQpIS5pZCA9XG4gICAgICBBa2FoYW5hSW5CcnlubWFlci5pZDtcbiAgU3RhdHVlT2ZPbnl4Lml0ZW1Vc2VEYXRhWzBdLndhbnQgPSAweDEwMCB8IEFrYWhhbmFJbkJyeW5tYWVyLmlkO1xuXG4gIC8vIExlYWYgZWxkZXIgaW4gaG91c2UgKCQwZCBAICRjMCkgfiBzd29yZCBvZiB3aW5kIHJlZHVuZGFudCBmbGFnXG4gIC8vIGRpYWxvZygweDBkLCAweGMwKVsyXS5mbGFncyA9IFtdO1xuICAvL3JvbS5pdGVtR2V0c1sweDAwXS5mbGFncyA9IFtdOyAvLyBjbGVhciByZWR1bmRhbnQgZmxhZ1xuXG4gIC8vIExlYWQgZWxkZXIgbmVlZHMgdG8gZ2l2ZSBpdGVtIGV2ZW4gaWYgd2luZG1pbGwga2V5IHdhcyB1c2VkLlxuICAvLyBUaGlzIGlzIG1vc3RseSBpcnJlbGV2YW50IHdpdGggdmFuaWxsYSBwbGFjZW1lbnQsIGJ1dCBpZiB0aGUgZWxkZXIgaXMgbm90XG4gIC8vIGltbWVkaWF0ZWx5IGF2YWlsYWJsZSwgaXQgY2FuIGJlY29tZSBhIHByb2JsZW0uXG4gIExlYWZFbGRlci5kaWFsb2coTGVhZl9FbGRlckhvdXNlKVxuICAgICAgLnNwbGljZSgwLCAwLCAuLi5MZWFmRWxkZXIuZGlhbG9nKExlYWZfRWxkZXJIb3VzZSkuc3BsaWNlKDIsIDEpKTtcblxuICAvLyBMZWFmIHJhYmJpdCAoJDEzKSBub3JtYWxseSBzdG9wcyBzZXR0aW5nIGl0cyBmbGFnIGFmdGVyIHByaXNvbiBkb29yIG9wZW5lZCxcbiAgLy8gYnV0IHRoYXQgZG9lc24ndCBuZWNlc3NhcmlseSBvcGVuIG10IHNhYnJlLiAgSW5zdGVhZCAoYSkgdHJpZ2dlciBvbiAwNDdcbiAgLy8gKHNldCBieSA4ZCB1cG9uIGVudGVyaW5nIGVsZGVyJ3MgY2VsbCkuICBBbHNvIG1ha2Ugc3VyZSB0aGF0IHRoYXQgcGF0aCBhbHNvXG4gIC8vIHByb3ZpZGVzIHRoZSBuZWVkZWQgZmxhZyB0byBnZXQgaW50byBtdCBzYWJyZS5cbiAgTGVhZlJhYmJpdC5kaWFsb2coKVsyXS5jb25kaXRpb24gPSBmbGFncy5SZXNjdWVkTGVhZkVsZGVyLmlkO1xuICBMZWFmUmFiYml0LmRpYWxvZygpWzJdLmZsYWdzLnB1c2goZmxhZ3MuVGFsa2VkVG9MZWFmUmFiYml0LmlkKTtcbiAgTGVhZlJhYmJpdC5kaWFsb2coKVszXS5mbGFncy5wdXNoKGZsYWdzLlRhbGtlZFRvTGVhZlJhYmJpdC5pZCk7XG5cbiAgLy8gV2luZG1pbGwgZ3VhcmQgaW4gY2F2ZSAoJDE0IEAgJDBlKSBzaG91bGRuJ3QgZGVzcGF3biBhZnRlciBhYmR1Y3Rpb24gKDAzOCksXG4gIC8vIGJ1dCBpbnN0ZWFkIGFmdGVyIGdpdmluZyB0aGUgaXRlbSAoMDg4KVxuICBXaW5kbWlsbEd1YXJkLnNwYXducyhXaW5kbWlsbENhdmUpWzFdID1cbiAgICAgIH5mbGFncy5XaW5kbWlsbEd1YXJkQWxhcm1GbHV0ZVRyYWRlaW4uaWQ7XG4gIC8vZGlhbG9nKDB4MTQsIDB4MGUpWzBdLmZsYWdzID0gW107IC8vIHJlbW92ZSByZWR1bmRhbnQgZmxhZyB+IHdpbmRtaWxsIGtleVxuXG4gIC8vIEFrYWhhbmEgKCQxNiAvIDg4KSB+IHNoaWVsZCByaW5nIHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4MTYsIDB4NTcpWzBdLmZsYWdzID0gW107XG4gIC8vIERvbid0IGRpc2FwcGVhciBhZnRlciBnZXR0aW5nIGJhcnJpZXIgKG5vdGUgODgncyBzcGF3bnMgKm5vdCogbGlua2VkIHRvIDE2KVxuICByZW1vdmUoQWthaGFuYS5zcGF3bnMoV2F0ZXJmYWxsQ2F2ZTQpLCB+ZmxhZ3MuQmVoaW5kV2hpcmxwb29sLmlkKTtcbiAgcmVtb3ZlKFN0b25lZEFrYWhhbmEuc3Bhd25zKFdhdGVyZmFsbENhdmU0KSwgfmZsYWdzLkJlaGluZFdoaXJscG9vbC5pZCk7XG5cbiAgZnVuY3Rpb24gcmV2ZXJzZURpYWxvZyhkczogTG9jYWxEaWFsb2dbXSk6IHZvaWQge1xuICAgIGRzLnJldmVyc2UoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBuZXh0ID0gZHNbaSArIDFdO1xuICAgICAgZHNbaV0uY29uZGl0aW9uID0gbmV4dCA/IH5uZXh0LmNvbmRpdGlvbiA6IH4wO1xuICAgIH1cbiAgfTtcblxuICAvLyBPYWsgZWxkZXIgKCQxZCkgfiBzd29yZCBvZiBmaXJlIHJlZHVuZGFudCBmbGFnXG4gIC8vb2FrRWxkZXJEaWFsb2dbNF0uZmxhZ3MgPSBbXTtcbiAgLy8gTWFrZSBzdXJlIHRoYXQgd2UgdHJ5IHRvIGdpdmUgdGhlIGl0ZW0gZnJvbSAqYWxsKiBwb3N0LWluc2VjdCBkaWFsb2dzXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgY29uc3QgZGxnID0gT2FrRWxkZXIuZGlhbG9nKClbaV07XG4gICAgaWYgKGRsZy5jb25kaXRpb24gIT09IHJvbS5mbGFncy5PYWtFbGRlci5pZCkgZGxnLm1lc3NhZ2UuYWN0aW9uID0gMHgwMztcbiAgfVxuXG4gIC8vIE9hayBtb3RoZXIgKCQxZSkgfiBpbnNlY3QgZmx1dGUgcmVkdW5kYW50IGZsYWdcbiAgLy8gVE9ETyAtIHJlYXJyYW5nZSB0aGVzZSBmbGFncyBhIGJpdCAobWF5YmUgfjA0NSwgfjBhMCB+MDQxIC0gc28gcmV2ZXJzZSlcbiAgLy8gICAgICAtIHdpbGwgbmVlZCB0byBjaGFuZ2UgYmFsbE9mRmlyZSBhbmQgaW5zZWN0Rmx1dGUgaW4gZGVwZ3JhcGhcbiAgKCgpID0+IHtcbiAgICBjb25zdCBba2lsbGVkSW5zZWN0LCBnb3RJdGVtLCBnZXRJdGVtLCBmaW5kQ2hpbGRdID0gT2FrTW90aGVyLmRpYWxvZygpO1xuICAgIGZpbmRDaGlsZC5jb25kaXRpb24gPSB+ZmxhZ3MuUmVzY3VlZENoaWxkLmlkO1xuICAgIC8vZ2V0SXRlbS5jb25kaXRpb24gPSB+MHgyMjc7XG4gICAgLy9nZXRJdGVtLmZsYWdzID0gW107XG4gICAgZ290SXRlbS5jb25kaXRpb24gPSB+MDsgLy8gYWx3YXlzIHRydWVcbiAgICBPYWtNb3RoZXIuZGlhbG9nKCkuc3BsaWNlKDAsIDQsIGZpbmRDaGlsZCwgZ2V0SXRlbSwga2lsbGVkSW5zZWN0LCBnb3RJdGVtKTtcbiAgfSkoKTtcbiAgLy8vIG9ha01vdGhlckRpYWxvZ1syXS5mbGFncyA9IFtdO1xuICAvLyAvLyBFbnN1cmUgd2UgYWx3YXlzIGdpdmUgaXRlbSBhZnRlciBpbnNlY3QuXG4gIC8vIG9ha01vdGhlckRpYWxvZ1swXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIC8vIG9ha01vdGhlckRpYWxvZ1sxXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDM7XG4gIC8vIHJldmVyc2VEaWFsb2cob2FrTW90aGVyRGlhbG9nKTtcblxuICAvLyBSZXZlcnNlIHRoZSBvdGhlciBvYWsgZGlhbG9ncywgdG9vLlxuICBmb3IgKGNvbnN0IGkgb2YgWzB4MjAsIDB4MjEsIDB4MjIsIDB4N2MsIDB4N2RdKSB7XG4gICAgcmV2ZXJzZURpYWxvZyhyb20ubnBjc1tpXS5kaWFsb2coKSk7XG4gIH1cblxuICAvLyBTd2FwIHRoZSBmaXJzdCB0d28gb2FrIGNoaWxkIGRpYWxvZ3MuXG4gIE9ha0NoaWxkLmRpYWxvZygpLnVuc2hpZnQoLi4uT2FrQ2hpbGQuZGlhbG9nKCkuc3BsaWNlKDEsIDEpKTtcblxuICAvLyBUaHJvbmUgcm9vbSBiYWNrIGRvb3IgZ3VhcmQgKCQzMyBAICRkZikgc2hvdWxkIGhhdmUgc2FtZSBzcGF3biBjb25kaXRpb24gYXMgcXVlZW5cbiAgLy8gKDAyMCBOT1QgcXVlZW4gbm90IGluIHRocm9uZSByb29tIEFORCAwMWIgTk9UIHZpZXdlZCBtZXNpYSByZWNvcmRpbmcpXG4gIFBvcnRvYVRocm9uZVJvb21CYWNrRG9vckd1YXJkLnNwYXduQ29uZGl0aW9ucy5zZXQoXG4gICAgICBQb3J0b2FQYWxhY2VfVGhyb25lUm9vbS5pZCxcbiAgICAgIFt+ZmxhZ3MuUXVlZW5Ob3RJblRocm9uZVJvb20uaWQsIH5mbGFncy5NZXNpYVJlY29yZGluZy5pZF0pO1xuXG4gIC8vIEZyb250IHBhbGFjZSBndWFyZCAoJDM0KSB2YWNhdGlvbiBtZXNzYWdlIGtleXMgb2ZmIDAxYiBpbnN0ZWFkIG9mIDAxZlxuICBQb3J0b2FQYWxhY2VGcm9udEd1YXJkLmRpYWxvZygpWzFdLmNvbmRpdGlvbiA9IGZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuXG4gIC8vIFF1ZWVuJ3MgKCQzOCkgZGlhbG9nIG5lZWRzIHF1aXRlIGEgYml0IG9mIHdvcmtcbiAgLy8gR2l2ZSBpdGVtIChmbHV0ZSBvZiBsaW1lKSBldmVuIGlmIGdvdCB0aGUgc3dvcmQgb2Ygd2F0ZXJcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbM10uY29uZGl0aW9uID0gZmxhZ3MuU3dvcmRPZldhdGVyLmlkOyAvLyBcInlvdSBmb3VuZCBzd29yZFwiXG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzNdLm1lc3NhZ2UuYWN0aW9uID0gMHgwMzsgLy8gID0+IGFjdGlvbiAzIGl0ZW1nZXRcbiAgLy8gRW5zdXJlIHlvdSBjYW4gYWx3YXlzIG1ha2UgdGhlIHF1ZWVuIGdvIGF3YXkuXG4gIFBvcnRvYVF1ZWVuLmRpYWxvZygpWzRdLmZsYWdzLnB1c2goZmxhZ3MuUG9ydG9hUXVlZW5Hb2luZ0F3YXkuaWQpO1xuICAvLyBRdWVlbiBzcGF3biBjb25kaXRpb24gZGVwZW5kcyBvbiAwMWIgKG1lc2lhIHJlY29yZGluZykgbm90IDAxZiAoYmFsbCBvZiB3YXRlcilcbiAgLy8gVGhpcyBlbnN1cmVzIHlvdSBoYXZlIGJvdGggc3dvcmQgYW5kIGJhbGwgdG8gZ2V0IHRvIGhlciAoPz8/KVxuICBQb3J0b2FRdWVlbi5zcGF3bnMoUG9ydG9hUGFsYWNlX1Rocm9uZVJvb20pWzFdID0gfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkO1xuICBQb3J0b2FRdWVlbi5zcGF3bnMoUG9ydG9hX0FzaW5hUm9vbSlbMF0gPSBmbGFncy5NZXNpYVJlY29yZGluZy5pZDtcbiAgUG9ydG9hUXVlZW4uZGlhbG9nKClbMV0uY29uZGl0aW9uID0gZmxhZ3MuTWVzaWFSZWNvcmRpbmcuaWQ7IC8vIHJldmVhbFxuXG4gIC8vIEZvcnR1bmUgdGVsbGVyICgkMzkpIHNob3VsZCBhbHNvIG5vdCBzcGF3biBiYXNlZCBvbiBtZXNpYSByZWNvcmRpbmcgcmF0aGVyIHRoYW4gb3JiXG4gIEZvcnR1bmVUZWxsZXIuc3Bhd25zKFBvcnRvYV9Gb3J0dW5lVGVsbGVyKVsxXSA9IH5mbGFncy5NZXNpYVJlY29yZGluZy5pZDtcblxuICAvLyBDbGFyayAoJDQ0KSBtb3ZlcyBhZnRlciB0YWxraW5nIHRvIGhpbSAoMDhkKSByYXRoZXIgdGhhbiBjYWxtaW5nIHNlYSAoMDhmKS5cbiAgLy8gVE9ETyAtIGNoYW5nZSAwOGQgdG8gd2hhdGV2ZXIgYWN0dWFsIGl0ZW0gaGUgZ2l2ZXMsIHRoZW4gcmVtb3ZlIGJvdGggZmxhZ3NcbiAgQ2xhcmsuc3Bhd25Db25kaXRpb25zLnNldChab21iaWVUb3duX0hvdXNlQmFzZW1lbnQuaWQsIFt+ZmxhZ3MuQ2xhcmsuaWRdKTtcbiAgQ2xhcmsuc3Bhd25Db25kaXRpb25zLnNldChKb2VsX1NoZWQuaWQsIFtmbGFncy5DbGFyay5pZF0pO1xuICAvL2RpYWxvZygweDQ0LCAweGU5KVsxXS5mbGFncy5wb3AoKTsgLy8gcmVtb3ZlIHJlZHVuZGFudCBpdGVtZ2V0IGZsYWdcblxuICAvLyBCcm9rYWhhbmEgKCQ1NCkgfiB3YXJyaW9yIHJpbmcgcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg1NClbMl0uZmxhZ3MgPSBbXTtcblxuICAvLyBEZW8gKCQ1YSkgfiBwZW5kYW50IHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NWEpWzFdLmZsYWdzID0gW107XG5cbiAgLy8gWmVidSAoJDVlKSBjYXZlIGRpYWxvZyAoQCAkMTApXG4gIC8vIFRPRE8gLSBkaWFsb2dzKDB4NWUsIDB4MTApLnJlYXJyYW5nZSh+MHgwM2EsIDB4MDBkLCAweDAzOCwgMHgwMzksIDB4MDBhLCB+MHgwMDApO1xuICBaZWJ1LmxvY2FsRGlhbG9ncy5zZXQoWmVidUNhdmUuaWQsIFtcbiAgICBMb2NhbERpYWxvZy5vZih+ZmxhZ3MuVGFsa2VkVG9aZWJ1SW5DYXZlLmlkLFxuICAgICAgICAgICAgICAgICAgIFsweDAwLCAweDFhXSwgW2ZsYWdzLlRhbGtlZFRvWmVidUluQ2F2ZS5pZF0pLFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLkxlYWZWaWxsYWdlcnNSZXNjdWVkLmlkLCBbMHgwMCwgMHgxZF0pLFxuICAgIExvY2FsRGlhbG9nLm9mKGZsYWdzLkxlYWZBYmR1Y3Rpb24uaWQsIFsweDAwLCAweDFjXSksIC8vIDAzOCBsZWFmIGF0dGFja2VkXG4gICAgTG9jYWxEaWFsb2cub2YoZmxhZ3MuWmVidUF0V2luZG1pbGwuaWQsIFsweDAwLCAweDFkXSksIC8vIDAzOSBsZWFybmVkIHJlZnJlc2hcbiAgICBMb2NhbERpYWxvZy5vZihmbGFncy5Vc2VkV2luZG1pbGxLZXkuaWQsIFsweDAwLCAweDFiLCAweDAzXSksIC8vID0+IHJlZnJlc2hcbiAgICBMb2NhbERpYWxvZy5vZih+MCwgWzB4MDAsIDB4MWRdKSxcbiAgXSk7XG4gIC8vIERvbid0IGRlc3Bhd24gb24gZ2V0dGluZyBiYXJyaWVyXG4gIHJlbW92ZShaZWJ1LnNwYXducyhaZWJ1Q2F2ZSksIH5mbGFncy5CZWhpbmRXaGlybHBvb2wuaWQpOyAvLyByZW1vdmUgMDUxIE5PVCBsZWFybmVkIGJhcnJpZXJcblxuICAvLyBUb3JuZWwgKCQ1ZikgaW4gc2FicmUgd2VzdCAoJDIxKSB+IHRlbGVwb3J0IHJlZHVuZGFudCBmbGFnXG4gIC8vZGlhbG9nKDB4NWYsIDB4MjEpWzFdLmZsYWdzID0gW107XG4gIC8vIERvbid0IGRlc3Bhd24gb24gZ2V0dGluZyBiYXJyaWVyXG4gIFRvcm5lbC5zcGF3bkNvbmRpdGlvbnMuZGVsZXRlKE10U2FicmVXZXN0X1VwcGVyLmlkKTsgLy8gYWx3YXlzIHNwYXduXG5cbiAgLy8gU3RvbSAoJDYwKTogZG9uJ3QgZGVzcGF3biBvbiBnZXR0aW5nIGJhcnJpZXJcbiAgU3RvbS5zcGF3bkNvbmRpdGlvbnMuZGVsZXRlKFN0b21Ib3VzZS5pZCk7IC8vIHJlbW92ZSAwNTEgTk9UIGxlYXJuZWQgYmFycmllclxuXG4gIC8vIFByZXZlbnQgZGVzcGF3biBmcm9tIGJhY2sgcm9vbSBhZnRlciBjYWxtaW5nIHNlYSAofjA4ZiBvciB+MjgzKVxuICByZW1vdmUoQXNpbmEuc3Bhd25zKFBvcnRvYV9Bc2luYVJvb20pLCB+ZmxhZ3MuQ2FsbWVkQW5ncnlTZWEuaWQpO1xuXG4gIC8vIEFkZCBhbiBleHRyYSBOUEMgaW4gUG9ydG9hIHRocm9uZSByb29tIHRvIGdpdmUgRmx1dGUgb2YgTGltZSBpZlxuICAvLyB0aGUgcXVlZW4gaXMgbm90IHRoZXJlLlxuICAvLyBJIHdhbnRlZCB0byBtYWtlIHRoaXMgYmUgdGhlIHF1ZWVuJ3MgbGFkeS1pbi13YWl0aW5nLCBidXQgaXQgZG9lc24ndFxuICAvLyByZWFsbHkgd29yayB3aXRoIHRoZSBwYXR0ZXJucyBhcyB0aGV5IGFyZS4gIFdlIGNvdWxkIHN3aXRjaCB0aGUgNGEgdG9cbiAgLy8gaW5zdGVhZCBiZSA0OSBhbmQgdGhlbiB0aGUgZ3VhcmQgYmVjb21lcyB0aGUgbGFkeSAod2UnZCB3YW50IHRvIHN3aXRjaFxuICAvLyB0byB0aGUgcGluayBwYWxldHRlIGFzIHdlbGwpLiAgQnV0IHRoYXQgZG9lc24ndCByZWFsbHkgYnV5IHVzIG11Y2guXG4gIGNvbnN0IGd1YXJkMiA9IHJvbS5ucGNzWzB4MzRdO1xuICBndWFyZDIuc3Bhd25Db25kaXRpb25zLnNldChQb3J0b2FQYWxhY2VfVGhyb25lUm9vbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfmZsYWdzLlBvcnRvYVF1ZWVuLmlkXSk7XG4gIGd1YXJkMi5sb2NhbERpYWxvZ3Muc2V0KFBvcnRvYV9QYWxhY2VFbnRyYW5jZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmQyLmxvY2FsRGlhbG9ncy5nZXQoLTEpISk7XG4gIGd1YXJkMi5kYXRhWzBdID0gcm9tLml0ZW1zLkZsdXRlT2ZMaW1lLmlkO1xuICBjb25zdCBndWFyZDJNZXNzYWdlID0gcm9tLm1lc3NhZ2VzLmFsbG9jKCk7XG4gIGd1YXJkMk1lc3NhZ2UudGV4dCA9IFwiVGhlIHF1ZWVuIGxlZnQgdGhpcyBmb3IgeW91LlwiO1xuICBndWFyZDIubG9jYWxEaWFsb2dzLnNldChQb3J0b2FQYWxhY2VfVGhyb25lUm9vbS5pZCwgW1xuICAgIExvY2FsRGlhbG9nLm9mKH5mbGFncy5Qb3J0b2FRdWVlbi5pZCwgW2d1YXJkMk1lc3NhZ2UucGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZDJNZXNzYWdlLmlkLCAweDAzXSksXG4gICAgTG9jYWxEaWFsb2cub2YofjAsIFsweDBhLCAweDBlXSksIC8vIFwiQmUgY2FyZWZ1bFwiIChvciAxNDowNCBcIkdvb2QgbHVjay5cIilcbiAgXSk7XG4gIFBvcnRvYVBhbGFjZV9UaHJvbmVSb29tLnNwYXducy5wdXNoKFNwYXduLm9mKHt5dDogMywgeHQ6IDEyLCB0eXBlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybkJhbms6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZ3VhcmQyLmlkfSkpO1xuXG4gIC8vIEtlbnN1IGluIGNhYmluICgkNjggQCAkNjEpIG5lZWRzIHRvIGJlIGF2YWlsYWJsZSBldmVuIGFmdGVyIHZpc2l0aW5nIEpvZWwuXG4gIC8vIENoYW5nZSBoaW0gdG8ganVzdCBkaXNhcHBlYXIgYWZ0ZXIgc2V0dGluZyB0aGUgcmlkZWFibGUgZG9scGhpbiBmbGFnICgwOWIpLFxuICAvLyBhbmQgdG8gbm90IGV2ZW4gc2hvdyB1cCBhdCBhbGwgdW5sZXNzIHRoZSBmb2cgbGFtcCB3YXMgcmV0dXJuZWQgKDAyMSkuXG4gIEtlbnN1SW5DYWJpbi5zcGF3bkNvbmRpdGlvbnMuc2V0KEJvYXRIb3VzZS5pZCwgW35mbGFncy5BYmxlVG9SaWRlRG9scGhpbi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MuUmV0dXJuZWRGb2dMYW1wLmlkXSk7XG4gIEtlbnN1SW5DYWJpbi5kaWFsb2coKVswXS5tZXNzYWdlLmFjdGlvbiA9IDB4MDI7IC8vIGRpc2FwcGVhclxuXG4gIC8vIEF6dGVjYSBpbiBTaHlyb24gKDZlKSBzaG91bGRuJ3Qgc3Bhd24gYWZ0ZXIgbWFzc2FjcmUgKDAyNylcbiAgQXp0ZWNhSW5TaHlyb24uc3Bhd25zKFNoeXJvbl9UZW1wbGUpLnB1c2gofmZsYWdzLlNoeXJvbk1hc3NhY3JlLmlkKTtcbiAgLy8gQWxzbyB0aGUgZGlhbG9nIHRyaWdnZXIgKDgyKSBzaG91bGRuJ3QgaGFwcGVuXG4gIHJvbS50cmlnZ2VyKDB4ODIpLmNvbmRpdGlvbnMucHVzaCh+ZmxhZ3MuU2h5cm9uTWFzc2FjcmUuaWQpO1xuXG4gIC8vIEtlbnN1IGluIGxpZ2h0aG91c2UgKCQ3NC8kN2UgQCAkNjIpIH4gcmVkdW5kYW50IGZsYWdcbiAgLy9kaWFsb2coMHg3NCwgMHg2MilbMF0uZmxhZ3MgPSBbXTtcblxuICAvLyBBenRlY2EgKCQ4MykgaW4gcHlyYW1pZCB+IGJvdyBvZiB0cnV0aCByZWR1bmRhbnQgZmxhZ1xuICAvL2RpYWxvZygweDgzKVswXS5jb25kaXRpb24gPSB+MHgyNDA7ICAvLyAyNDAgTk9UIGJvdyBvZiB0cnV0aFxuICAvL2RpYWxvZygweDgzKVswXS5mbGFncyA9IFtdO1xuXG4gIC8vIFJhZ2UgYmxvY2tzIG9uIHN3b3JkIG9mIHdhdGVyLCBub3QgcmFuZG9tIGl0ZW0gZnJvbSB0aGUgY2hlc3RcbiAgUmFnZS5kaWFsb2coKVswXS5jb25kaXRpb24gPSBmbGFncy5Td29yZE9mV2F0ZXIuaWQ7XG5cbiAgLy8gUmVtb3ZlIHVzZWxlc3Mgc3Bhd24gY29uZGl0aW9uIGZyb20gTWFkbyAxXG4gIC8vIHJvbS5ucGNzWzB4YzRdLnNwYXduQ29uZGl0aW9ucy5kZWxldGUoMHhmMik7IC8vIGFsd2F5cyBzcGF3blxuXG4gIC8vIERyYXlnb24gMiAoJGNiIEAgbG9jYXRpb24gJGE2KSBzaG91bGQgZGVzcGF3biBhZnRlciBiZWluZyBkZWZlYXRlZC5cbiAgRHJheWdvbi5zcGF3bkNvbmRpdGlvbnMuc2V0KENyeXB0X0RyYXlnb24yLmlkLCBbfmZsYWdzLkRyYXlnb24yLmlkXSk7XG5cbiAgLy8gRml4IFplYnUgdG8gZ2l2ZSBrZXkgdG8gc3R4eSBldmVuIGlmIHRodW5kZXIgc3dvcmQgaXMgZ290dGVuIChqdXN0IHN3aXRjaCB0aGVcbiAgLy8gb3JkZXIgb2YgdGhlIGZpcnN0IHR3bykuICBBbHNvIGRvbid0IGJvdGhlciBzZXR0aW5nIDAzYiBzaW5jZSB0aGUgbmV3IEl0ZW1HZXRcbiAgLy8gbG9naWMgb2J2aWF0ZXMgdGhlIG5lZWQuXG4gIFplYnUuZGlhbG9nKFNoeXJvbl9UZW1wbGUpXG4gICAgICAudW5zaGlmdCguLi5aZWJ1LmRpYWxvZyhTaHlyb25fVGVtcGxlKS5zcGxpY2UoMSwgMSkpO1xuICAvLyB6ZWJ1U2h5cm9uWzBdLmZsYWdzID0gW107XG5cbiAgLy8gU2h5cm9uIG1hc3NhY3JlICgkODApIHJlcXVpcmVzIGtleSB0byBzdHh5XG4gIHJvbS50cmlnZ2VyKDB4ODApLmNvbmRpdGlvbnMgPSBbXG4gICAgfmZsYWdzLlNoeXJvbk1hc3NhY3JlLmlkLFxuICAgIGZsYWdzLlRhbGtlZFRvWmVidUluU2h5cm9uLmlkLFxuICAgIGZsYWdzLlN3b3JkT2ZUaHVuZGVyLmlkLFxuICBdO1xuXG4gIC8vIEVudGVyIHNoeXJvbiAoJDgxKSBzaG91bGQgc2V0IHdhcnAgbm8gbWF0dGVyIHdoYXRcbiAgcm9tLnRyaWdnZXIoMHg4MSkuY29uZGl0aW9ucyA9IFtdO1xuXG4gIGlmIChvcHRzLmJhcnJpZXJSZXF1aXJlc0NhbG1TZWEoKSkge1xuICAgIC8vIExlYXJuIGJhcnJpZXIgKCQ4NCkgcmVxdWlyZXMgY2FsbSBzZWFcbiAgICByb20udHJpZ2dlcigweDg0KS5jb25kaXRpb25zLnB1c2goZmxhZ3MuQ2FsbWVkQW5ncnlTZWEuaWQpO1xuICAgIC8vIFRPRE8gLSBjb25zaWRlciBub3Qgc2V0dGluZyAwNTEgYW5kIGNoYW5naW5nIHRoZSBjb25kaXRpb24gdG8gbWF0Y2ggdGhlIGl0ZW1cbiAgfVxuICAvL3JvbS50cmlnZ2VyKDB4ODQpLmZsYWdzID0gW107XG5cbiAgLy8gQWRkIGFuIGV4dHJhIGNvbmRpdGlvbiB0byB0aGUgTGVhZiBhYmR1Y3Rpb24gdHJpZ2dlciAoYmVoaW5kIHplYnUpLiAgVGhpcyBlbnN1cmVzXG4gIC8vIGFsbCB0aGUgaXRlbXMgaW4gTGVhZiBwcm9wZXIgKGVsZGVyIGFuZCBzdHVkZW50KSBhcmUgZ290dGVuIGJlZm9yZSB0aGV5IGRpc2FwcGVhci5cbiAgcm9tLnRyaWdnZXIoMHg4YykuY29uZGl0aW9ucy5wdXNoKGZsYWdzLlRhbGtlZFRvWmVidUluQ2F2ZS5pZCk7XG5cbiAgLy8gTW9yZSB3b3JrIG9uIGFiZHVjdGlvbiB0cmlnZ2VyczpcbiAgLy8gMS4gUmVtb3ZlIHRoZSA4ZCB0cmlnZ2VyIGluIHRoZSBmcm9udCBvZiB0aGUgY2VsbCwgc3dhcCBpdCBvdXRcbiAgLy8gICAgZm9yIGIyIChsZWFybiBwYXJhbHlzaXMpLlxuICByb20udHJpZ2dlcigweDhkKS51c2VkID0gZmFsc2U7XG4gIGZvciAoY29uc3Qgc3Bhd24gb2YgTXRTYWJyZU5vcnRoX1N1bW1pdENhdmUuc3Bhd25zKSB7XG4gICAgaWYgKHNwYXduLmlzVHJpZ2dlcigpICYmIHNwYXduLmlkID09PSAweDhkKSBzcGF3bi5pZCA9IDB4YjI7XG4gIH1cbiAgcmVtb3ZlSWYoV2F0ZXJmYWxsVmFsbGV5Tm9ydGguc3Bhd25zLFxuICAgICAgICAgICBzcGF3biA9PiBzcGF3bi5pc1RyaWdnZXIoKSAmJiBzcGF3bi5pZCA9PT0gMHg4ZCk7XG4gIC8vIDIuIFNldCB0aGUgdHJpZ2dlciB0byByZXF1aXJlIGhhdmluZyBraWxsZWQga2VsYmVzcXVlLlxuICByb20udHJpZ2dlcigweGIyKS5jb25kaXRpb25zLnB1c2goZmxhZ3MuS2VsYmVzcXVlMS5pZCk7XG4gIC8vIDMuIEFsc28gc2V0IHRoZSB0cmlnZ2VyIHRvIGZyZWUgdGhlIHZpbGxhZ2VycyBhbmQgdGhlIGVsZGVyLlxuICByb20udHJpZ2dlcigweGIyKS5mbGFncy5wdXNoKFxuICAgIH5mbGFncy5MZWFmVmlsbGFnZXJzQ3VycmVudGx5QWJkdWN0ZWQuaWQsXG4gICAgfmZsYWdzLkxlYWZFbGRlckN1cnJlbnRseUFiZHVjdGVkLmlkLFxuICAgIGZsYWdzLkxlYWZWaWxsYWdlcnNSZXNjdWVkLmlkKTtcbiAgLy8gNC4gRG9uJ3QgdHJpZ2dlciB0aGUgYWJkdWN0aW9uIGluIHRoZSBmaXJzdCBwbGFjZSBpZiBrZWxiZXNxdWUgZGVhZFxuICByb20udHJpZ2dlcigweDhjKS5jb25kaXRpb25zLnB1c2gofmZsYWdzLktlbGJlc3F1ZTEuaWQpO1xuICAvLyA1LiBEb24ndCB0cmlnZ2VyIHJhYmJpdCBibG9jayBpZiBrZWxiZXNxdWUgZGVhZFxuICByb20udHJpZ2dlcigweDg2KS5jb25kaXRpb25zLnB1c2gofmZsYWdzLktlbGJlc3F1ZTEuaWQpOyAvLyBraWxsZWQga2VsYmVzcXVlXG4gIC8vIDYuIERvbid0IGZyZWUgdmlsbGFnZXJzIGZyb20gdXNpbmcgcHJpc29uIGtleVxuICByZW1vdmUoS2V5VG9Qcmlzb24uaXRlbVVzZURhdGFbMF0uZmxhZ3MsXG4gICAgICAgICB+ZmxhZ3MuTGVhZlZpbGxhZ2Vyc0N1cnJlbnRseUFiZHVjdGVkLmlkKTtcbiAgLy8gcm9tLnByZ1sweDFlMGEzXSA9IDB4YzA7XG4gIC8vIHJvbS5wcmdbMHgxZTBhNF0gPSAweDAwO1xuXG4gIC8vIFRPRE8gLSBhZGRpdGlvbmFsIHdvcmsgb24gYWJkdWN0aW9uIHRyaWdnZXI6XG4gIC8vICAgLSBnZXQgcmlkIG9mIHRoZSBmbGFncyBvbiBrZXkgdG8gcHJpc29uIHVzZVxuICAvLyAgIC0gYWRkIGEgY29uZGl0aW9uIHRoYXQgYWJkdWN0aW9uIGRvZXNuJ3QgaGFwcGVuIGlmIHJlc2N1ZWRcbiAgLy8gR2V0IHJpZCBvZiBCT1RIIHRyaWdnZXJzIGluIHN1bW1pdCBjYXZlLCAgSW5zdGVhZCwgdGllIGV2ZXJ5dGhpbmdcbiAgLy8gdG8gdGhlIGVsZGVyIGRpYWxvZyBvbiB0b3BcbiAgLy8gICAtIGlmIGtlbGJlc3F1ZSBzdGlsbCBhbGl2ZSwgbWF5YmUgZ2l2ZSBhIGhpbnQgYWJvdXQgd2Vha25lc3NcbiAgLy8gICAtIGlmIGtlbGJlc3F1ZSBkZWFkIHRoZW4gdGVhY2ggcGFyYWx5c2lzIGFuZCBzZXQvY2xlYXIgZmxhZ3NcbiAgLy8gICAtIGlmIHBhcmFseXNpcyBsZWFybmVkIHRoZW4gc2F5IHNvbWV0aGluZyBnZW5lcmljXG4gIC8vIFN0aWxsIG5lZWQgdG8ga2VlcCB0aGUgdHJpZ2dlciBpbiB0aGUgZnJvbnQgaW4gY2FzZSBub1xuICAvLyBhYmR1Y3Rpb24geWV0XG4gIC8vICAgLSBpZiBOT1QgcGFyYWx5c2lzIEFORCBpZiBOT1QgZWxkZXIgbWlzc2luZyBBTkQgaWYga2VsYmVxdWUgZGVhZFxuICAvLyAtLS0+IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgdHdvIHdheXMgdG8gZ2V0IChsaWtlIHJlZnJlc2gpP1xuICAvL1xuICAvLyBBbHNvIGFkZCBhIGNoZWNrIHRoYXQgdGhlIHJhYmJpdCB0cmlnZ2VyIGlzIGdvbmUgaWYgcmVzY3VlZCFcblxuXG5cbiAgLy8gUGFyYWx5c2lzIHRyaWdnZXIgKCRiMikgfiByZW1vdmUgcmVkdW5kYW50IGl0ZW1nZXQgZmxhZ1xuICAvL3JvbS50cmlnZ2VyKDB4YjIpLmNvbmRpdGlvbnNbMF0gPSB+MHgyNDI7XG4gIC8vcm9tLnRyaWdnZXIoMHhiMikuZmxhZ3Muc2hpZnQoKTsgLy8gcmVtb3ZlIDAzNyBsZWFybmVkIHBhcmFseXNpc1xuXG4gIC8vIExlYXJuIHJlZnJlc2ggdHJpZ2dlciAoJGI0KSB+IHJlbW92ZSByZWR1bmRhbnQgaXRlbWdldCBmbGFnXG4gIC8vcm9tLnRyaWdnZXIoMHhiNCkuY29uZGl0aW9uc1sxXSA9IH4weDI0MTtcbiAgLy9yb20udHJpZ2dlcigweGI0KS5mbGFncyA9IFtdOyAvLyByZW1vdmUgMDM5IGxlYXJuZWQgcmVmcmVzaFxuXG4gIC8vIFRlbGVwb3J0IGJsb2NrIG9uIG10IHNhYnJlIGlzIGZyb20gc3BlbGwsIG5vdCBzbG90XG4gIC8vIE5PVEU6IHRoaXMgaXMgbm93IGRvbmUgaW4gZmxhZ3MuZGVmcmFnXG4gIC8vcmVwbGFjZShyb20udHJpZ2dlcigweGJhKS5jb25kaXRpb25zLCB+MHgwM2YsIH5mbGFncy5UZWxlcG9ydC5pZCk7XG5cbiAgLy8gUG9ydG9hIHBhbGFjZSBndWFyZCBtb3ZlbWVudCB0cmlnZ2VyICgkYmIpIHN0b3BzIG9uIDAxYiAobWVzaWEpIG5vdCAwMWYgKG9yYilcbiAgcmVwbGFjZShyb20udHJpZ2dlcigweGJiKS5jb25kaXRpb25zLCB+ZmxhZ3MuUmFnZS5pZCwgfmZsYWdzLk1lc2lhUmVjb3JkaW5nLmlkKTtcblxuICAvLyBSZW1vdmUgcmVkdW5kYW50IHRyaWdnZXIgOGEgKHNsb3QgMTYpIGluIHpvbWJpZXRvd24gKCQ2NSlcbiAgLy8gIC0tIG5vdGU6IG5vIGxvbmdlciBuZWNlc3Nhcnkgc2luY2Ugd2UgcmVwdXJwb3NlIGl0IGluc3RlYWQuXG4gIC8vIGNvbnN0IHt6b21iaWVUb3dufSA9IHJvbS5sb2NhdGlvbnM7XG4gIC8vIHpvbWJpZVRvd24uc3Bhd25zID0gem9tYmllVG93bi5zcGF3bnMuZmlsdGVyKHggPT4gIXguaXNUcmlnZ2VyKCkgfHwgeC5pZCAhPSAweDhhKTtcblxuICAvLyAvLyBSZXBsYWNlIGFsbCBkaWFsb2cgY29uZGl0aW9ucyBmcm9tIDAwZSB0byAyNDNcbiAgLy8gZm9yIChjb25zdCBucGMgb2Ygcm9tLm5wY3MpIHtcbiAgLy8gICBmb3IgKGNvbnN0IGQgb2YgbnBjLmFsbERpYWxvZ3MoKSkge1xuICAvLyAgICAgaWYgKGQuY29uZGl0aW9uID09PSAweDAwZSkgZC5jb25kaXRpb24gPSAweDI0MztcbiAgLy8gICAgIGlmIChkLmNvbmRpdGlvbiA9PT0gfjB4MDBlKSBkLmNvbmRpdGlvbiA9IH4weDI0MztcbiAgLy8gICB9XG4gIC8vIH1cbn1cblxuLy8gSGFyZCBtb2RlIGZsYWc6IEhjIC0gemVybyBvdXQgdGhlIHN3b3JkJ3MgY29sbGlzaW9uIHBsYW5lXG5mdW5jdGlvbiBkaXNhYmxlU3RhYnMocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBvIG9mIFsweDA4LCAweDA5LCAweDI3XSkge1xuICAgIHJvbS5vYmplY3RzW29dLmNvbGxpc2lvblBsYW5lID0gMDtcbiAgfVxuICAvLyBBbHNvIHRha2Ugd2FycmlvciByaW5nIG91dCBvZiB0aGUgcGljdHVyZS4uLiA6dHJvbGw6XG4gIC8vIHJvbS5pdGVtR2V0c1sweDJiXS5pZCA9IDB4NWI7IC8vIG1lZGljYWwgaGVyYiBmcm9tIHNlY29uZCBmbHV0ZSBvZiBsaW1lIGNoZWNrXG4gIHJvbS5ucGNzLkJyb2thaGFuYS5kYXRhWzBdID0gcm9tLml0ZW1zLkZydWl0T2ZMaW1lLmlkO1xufVxuXG5mdW5jdGlvbiBvcmJzT3B0aW9uYWwocm9tOiBSb20pOiB2b2lkIHtcbiAgZm9yIChjb25zdCBvYmogb2YgWzB4MTAsIDB4MTQsIDB4MTgsIDB4MWRdKSB7XG4gICAgLy8gMS4gTG9vc2VuIHRlcnJhaW4gc3VzY2VwdGliaWxpdHkgb2YgbGV2ZWwgMSBzaG90c1xuICAgIHJvbS5vYmplY3RzW29ial0udGVycmFpblN1c2NlcHRpYmlsaXR5ICY9IH4weDA0O1xuICAgIC8vIDIuIEluY3JlYXNlIHRoZSBsZXZlbCB0byAyXG4gICAgcm9tLm9iamVjdHNbb2JqXS5sZXZlbCA9IDI7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9Cb3dNb2RlKHJvbTogUm9tKTogdm9pZCB7XG4gIC8vIEluaXRpYWwgdHJpZ2dlciBnaXZlcyBcInVzZWQgYm93IG9mIHRydXRoXCIuXG4gIGNvbnN0IHtcbiAgICBmbGFnczoge1VzZWRCb3dPZlRydXRofSxcbiAgICBsb2NhdGlvbnM6IHtDcnlwdF9EcmF5Z29uMiwgTWV6YW1lU2hyaW5lfSxcbiAgfSA9IHJvbTtcbiAgbGV0IHRyaWdnZXIhOiBUcmlnZ2VyO1xuICBmb3IgKGNvbnN0IHNwYXduIG9mIE1lemFtZVNocmluZS5zcGF3bnMpIHtcbiAgICBpZiAoc3Bhd24uaXNUcmlnZ2VyKCkgJiYgc3Bhd24udGlsZSA9PT0gMHg4OCkge1xuICAgICAgdHJpZ2dlciA9IHJvbS50cmlnZ2VyKHNwYXduLmlkKTtcbiAgICB9XG4gIH1cbiAgaWYgKCF0cmlnZ2VyKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHN0YXJ0IHRyaWdnZXJgKTtcbiAgdHJpZ2dlci5mbGFncy5wdXNoKFVzZWRCb3dPZlRydXRoLmlkKTtcbiAgLy8gQWRkIGFuIGV4aXQgc3RyYWlnaHQgdG8gZHJheWdvblxuICByb20udGlsZUVmZmVjdHNbMHhiOSAtIDB4YjNdLmVmZmVjdHNbMHg1OF0gPSAwO1xuICBNZXphbWVTaHJpbmUubWV0YS5zZXRFeGl0KFxuICAgICAgMCwgJ2Rvb3InLCBbQ3J5cHRfRHJheWdvbjIubWV0YS5pZCA8PCA4IHwgMHgxMCwgJ2VkZ2U6Ym90dG9tJ10pO1xufVxuXG4vLyBGb3Igbm93IHRoaXMganVzdCBmaXhlcyB0aGUgc2hvdCB0byBiZSBhbGwgZWxlbWVudHMgaW5zdGVhZCBvZiBub25lLlxuZnVuY3Rpb24gZml4Q3J5c3RhbGlzKHJvbTogUm9tKSB7XG4gIHJvbS5vYmplY3RzWzB4MzNdLmVsZW1lbnRzID0gMHhmO1xufVxuXG4vLyBUaGVyZSBhcmUgYSBmZXcgbWV0YXRpbGVzIHRoYXQgaGF2ZSBpbmNvcnJlY3QgYmVoYXZpb3IgKG9uZSBvZlxuLy8gdGhlIHBpbGxhciB0aWxlcyBpbiB0aGUgY3J5cHQgdGlsZXNldCBhbmQgYSBjb3JuZXIgdGlsZSBpbiB0aGVcbi8vIGNhdmUgdGlsZXNldCksIHdoaWNoIGFsbG93cyBmbHlpbmcgdGhyb3VnaCB0aGVtLiAgVGhlIGNyeXB0IHRpbGVcbi8vIGNhbiBjYXVzZSB0aGUgcGxheWVyIHRvIGdldCBzdHVjayBpZiB0aGV5IGdldCBoaXQgd2hpbGUgZmx5aW5nXG4vLyBuZWFyIGl0LiAgVGhlIGNhdmUgY29ybmVyIGNhbiBhbGxvdyBzbmVha2luZyBwYXN0IHRoZSBzdG9uZWRcbi8vIE5QQ3MgaW4gdGhlIHdhdGVyZmFsbCBjYXZlIHVzaW5nIGZsaWdodC5cbmZ1bmN0aW9uIGZpeEZseWFibGVXYWxscyhyb206IFJvbSkge1xuICByb20udGlsZUVmZmVjdHNbMHhiNSAtIDB4YjNdLmVmZmVjdHNbMHg3NF0gPSA2OyAvLyBjYXZlIGNvcm5lclxuICByb20udGlsZUVmZmVjdHNbMHhiNiAtIDB4YjNdLmVmZmVjdHNbMHg0Nl0gPSA2OyAvLyBjcnlwdCBwaWxsYXJcbn1cblxuLy8gVG9tYXRvcyAoYW5kIG90aGVycykgc2hvdWxkbid0IGJlIGFibGUgdG8gY3Jvc3Mgd2F0ZXIgb3Igcm9sbCB1cCByYW1wcy5cbmZ1bmN0aW9uIGZpeE1vbnN0ZXJUZXJyYWluKHJvbTogUm9tKSB7XG4gIGZvciAoY29uc3Qgb2JqIG9mIHJvbS5vYmplY3RzKSB7XG4gICAgaWYgKCEob2JqIGluc3RhbmNlb2YgTW9uc3RlcikpIGNvbnRpbnVlO1xuICAgIGlmIChvYmouaXNQcm9qZWN0aWxlKCkgfHwgb2JqLmlzQm9zcygpIHx8IG9iai5pc0ZseWVyKCkpIGNvbnRpbnVlO1xuICAgIGlmIChvYmogPT09IHJvbS5vYmplY3RzLm1pbWljKSBjb250aW51ZTtcbiAgICBvYmoudGVycmFpblN1c2NlcHRpYmlsaXR5IHw9IDB4MztcbiAgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlPFQ+KGFycmF5OiBUW10sIG9sZDogVCwgcmVwbGFjZW1lbnQ6IFQpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnJheVtpXSAhPT0gb2xkKSBjb250aW51ZTtcbiAgICBhcnJheVtpXSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybjtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kICR7b2xkfSBpbiAke2FycmF5LmpvaW4oJywnKX1gKTsgICAgICBcbn1cblxuZnVuY3Rpb24gaGFyZGNvcmVNb2RlKHJvbTogUm9tKSB7XG4gIGZvciAoY29uc3QgbG9jIG9mIHJvbS5sb2NhdGlvbnMpIHtcbiAgICBsb2MuY2hlY2twb2ludCA9IGxvYy5zYXZlYWJsZSA9IGZhbHNlO1xuICB9XG59XG4iXX0=