import{a as m}from"./chunk-6ZVA43WS.js";import"./chunk-PIDEUWOP.js";var w=class{constructor(t,h,x=1){this.element=document.createElement("canvas"),this.width=this.element.width=t,this.height=this.element.height=h,this.frames=x,this.delay=7,this.data=new Uint32Array(t*h*x),this.regions=new m,this.visibleRegions=new Set,this.handlers={},this.element.addEventListener("mousemove",n=>{let e={},F=n.offsetX,s=n.offsetY,i=n.target;for(;i&&i!=this.element.parentElement;)F+=i.offsetLeft,s+=i.offsetTop,i=i.parentElement;for(let r of this.regions.get(F,s))Object.assign(e,r.props);for(let r of this.handlers.mousemove||[])r(e)}),requestAnimationFrame(()=>this.animate(0,0))}fill(t){this.data.fill(B[t&63]|4278190080)}handle(t,h){(this.handlers[t]=this.handlers[t]||[]).push(h)}drawTile(t,h,x,n,e=void 0){e==null&&(e=new Array(this.frames).fill(0).map((F,s)=>s)),e instanceof Array||(e=[e]);for(let F=0;F<8;F++){let s=x.pixels[8|F]<<1,i=x.pixels[F];for(let r=7;r>=0;r--){let f=s&2|i&1;if(s>>>=1,i>>>=1,f)for(let d of e)this.data[d*this.width*this.height+this.width*(h+F)+t+r]=4278190080|B[n[f]&63]}}}region(t,h,x,n){return new c(this,t,h,x,n)}animate(t,h){if(this.element.offsetParent==null)return;if(h){requestAnimationFrame(()=>this.animate(t,h-1));return}let x=this.width*this.height*4,n=this.element.getContext("2d"),e=n.getImageData(0,0,this.width,this.height),F=new Uint8Array(this.data.buffer,x*t,x);e.data.set(F);for(let s of this.visibleRegions){let i=s.y*this.width+s.x,r=s.h*this.width*4,f=s.w<<2,d=this.width<<2,a=e.data;for(let l=0;l<s.w;l++){for(let o=0;o<3;o++)a[i+o]=a[i+r+o]=255,a[i+o+d]=a[i+r+o-d]=0;i+=4}i=s.y*this.width+s.x;for(let l=0;l<s.h;l++){for(let o=0;o<3;o++)a[i+o]=a[i+f+o]=255,l&&l<s.h-1&&(a[i+o+4]=a[i+f+o-4]=0);i+=d}}n.putImageData(e,0,0),requestAnimationFrame(()=>this.animate((t+1)%this.frames,this.delay))}},c=class{constructor(t,h,x,n,e){this.viz=t,this.x=h,this.y=x,this.w=n,this.h=e,this.props={},this.visible=!1,t.regions.insert(h,h+n,x,x+e,this)}show(t){this.visible&&this.viz.visibleRegions.delete(this),this.visible=t,visiblw&&this.viz.visibleRegions.add(this)}prop(t){Object.assign(this.props,t)}},B=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0];export{w as Viz};
