import { Rom } from '../rom.js';
import { Context } from './context.js';
import { ScreenEditor } from './screeneditor.js';
import { addSwampDoors } from '../maze/swamp.js';
window.global = window;
async function main() {
    const el = document.getElementById('load-rom');
    if (!el)
        throw new Error(`element not found`);
    const rom = await Rom.load(undefined, (picker) => {
        el.classList.add('visible');
        el.appendChild(picker);
    });
    addSwampDoors(rom);
    el.classList.remove('visible');
    const context = new Context(rom);
    new ScreenEditor(context, document.getElementById('screen-editor'));
    window.screen = (id) => {
        console.log(new Array(15).fill(0).map((_, y) => rom.screens[id].tiles.slice(16 * y, 16 * y + 16).map(x => x.toString(16).padStart(2, '0')).join(' ')).join('\n'));
    };
}
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvanMvZWRpdC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQzlCLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxjQUFjLENBQUM7QUFDckMsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU5QyxNQUFjLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUVoQyxLQUFLLFVBQVUsSUFBSTtJQUNqQixNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLElBQUksQ0FBQyxFQUFFO1FBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQzlDLE1BQU0sR0FBRyxHQUFHLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUMvQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0gsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLEVBQUUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBRS9CLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLElBQUksWUFBWSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBRSxDQUFDLENBQUM7SUFHcEUsTUFBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQVUsRUFBRSxFQUFFO1FBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FDbkMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FDM0QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuRSxDQUFDLENBQUM7QUFJSixDQUFDO0FBRUQsSUFBSSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JvbX0gZnJvbSAnLi4vcm9tLmpzJztcbmltcG9ydCB7Q29udGV4dH0gZnJvbSAnLi9jb250ZXh0LmpzJztcbmltcG9ydCB7U2NyZWVuRWRpdG9yfSBmcm9tICcuL3NjcmVlbmVkaXRvci5qcyc7XG5pbXBvcnQge2FkZFN3YW1wRG9vcnN9IGZyb20gJy4uL21hemUvc3dhbXAuanMnO1xuXG4od2luZG93IGFzIGFueSkuZ2xvYmFsID0gd2luZG93O1xuXG5hc3luYyBmdW5jdGlvbiBtYWluKCkge1xuICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkLXJvbScpO1xuICBpZiAoIWVsKSB0aHJvdyBuZXcgRXJyb3IoYGVsZW1lbnQgbm90IGZvdW5kYCk7XG4gIGNvbnN0IHJvbSA9IGF3YWl0IFJvbS5sb2FkKHVuZGVmaW5lZCwgKHBpY2tlcikgPT4ge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICBlbC5hcHBlbmRDaGlsZChwaWNrZXIpO1xuICB9KTtcbiAgYWRkU3dhbXBEb29ycyhyb20pO1xuICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG5cbiAgY29uc3QgY29udGV4dCA9IG5ldyBDb250ZXh0KHJvbSk7XG4gIG5ldyBTY3JlZW5FZGl0b3IoY29udGV4dCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbi1lZGl0b3InKSEpO1xuXG4gIC8vIFRPRE8gLSBiZXR0ZXIgVUkgZm9yIHRoaXNcbiAgKHdpbmRvdyBhcyBhbnkpLnNjcmVlbiA9IChpZDogbnVtYmVyKSA9PiB7XG4gICAgY29uc29sZS5sb2cobmV3IEFycmF5KDE1KS5maWxsKDApLm1hcChcbiAgICAgIChfLCB5KSA9PiByb20uc2NyZWVuc1tpZF0udGlsZXMuc2xpY2UoMTYgKiB5LDE2ICogeSArIDE2KS5tYXAoXG4gICAgICAgIHggPT4geC50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignICcpKS5qb2luKCdcXG4nKSk7XG4gIH07XG4gIC8vIHBvcHVsYXRlIHN0dWZmP1xuXG4gIC8vIFRPRE8gLSBwcm9qZWN0IGZpbGU/XG59XG5cbm1haW4oKTtcbiJdfQ==