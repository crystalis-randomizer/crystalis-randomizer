import { Entity } from './entity.js';
import { signed, tuple, unsigned } from './util.js';
export class Hitbox extends Entity {
    constructor(rom, id) {
        super(rom, id);
        this.coordinates = tuple(rom.prg, this.base, 4);
    }
    get base() {
        return 0x35691 + (this.id << 2);
    }
    get w() { return this.coordinates[1]; }
    set w(value) { this.coordinates[1] = value; }
    get x0() { return signed(this.coordinates[0]); }
    set x0(value) { this.coordinates[0] = unsigned(value); }
    get x1() { return this.x0 + this.w; }
    get h() { return this.coordinates[3]; }
    set h(value) { this.coordinates[3] = value; }
    get y0() { return signed(this.coordinates[2]); }
    set y0(value) { this.coordinates[2] = unsigned(value); }
    get y1() { return this.y0 + this.h; }
    write() {
        const a = this.rom.assembler();
        a.segment('1a');
        a.org(0x9691 + (this.id << 2));
        a.byte(...this.coordinates);
        return [a.module()];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGl0Ym94LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3JvbS9oaXRib3gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUNuQyxPQUFPLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFHbEQsTUFBTSxPQUFPLE1BQU8sU0FBUSxNQUFNO0lBSWhDLFlBQVksR0FBUSxFQUFFLEVBQVU7UUFDOUIsS0FBSyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRCxJQUFJLENBQUMsS0FBYSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksQ0FBQyxDQUFDLEtBQWEsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFFckQsSUFBSSxFQUFFLEtBQWEsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxJQUFJLEVBQUUsQ0FBQyxLQUFhLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWhFLElBQUksRUFBRSxLQUFhLE9BQU8sSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUU3QyxJQUFJLENBQUMsS0FBYSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLElBQUksQ0FBQyxDQUFDLEtBQWEsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFFckQsSUFBSSxFQUFFLEtBQWEsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxJQUFJLEVBQUUsQ0FBQyxLQUFhLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWhFLElBQUksRUFBRSxLQUFhLE9BQU8sSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUU3QyxLQUFLO1FBQ0gsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUMvQixDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUIsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TW9kdWxlfSBmcm9tICcuLi9hc20vbW9kdWxlLmpzJztcbmltcG9ydCB7Um9tfSBmcm9tICcuLi9yb20uanMnO1xuaW1wb3J0IHtFbnRpdHl9IGZyb20gJy4vZW50aXR5LmpzJztcbmltcG9ydCB7c2lnbmVkLCB0dXBsZSwgdW5zaWduZWR9IGZyb20gJy4vdXRpbC5qcyc7XG5cbi8vIEEgcGF0dGVybiBwYWdlIHNlcXVlbmNlIGZvciBhbmltYXRpbmcgYmFja2dyb3VuZCB0aWxlcy4gIElEIGluIDAuLjNcbmV4cG9ydCBjbGFzcyBIaXRib3ggZXh0ZW5kcyBFbnRpdHkge1xuXG4gIGNvb3JkaW5hdGVzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuICBjb25zdHJ1Y3Rvcihyb206IFJvbSwgaWQ6IG51bWJlcikge1xuICAgIHN1cGVyKHJvbSwgaWQpO1xuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSB0dXBsZShyb20ucHJnLCB0aGlzLmJhc2UsIDQpO1xuICB9XG5cbiAgZ2V0IGJhc2UoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMHgzNTY5MSArICh0aGlzLmlkIDw8IDIpO1xuICB9XG5cbiAgZ2V0IHcoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbMV07IH1cbiAgc2V0IHcodmFsdWU6IG51bWJlcikgeyB0aGlzLmNvb3JkaW5hdGVzWzFdID0gdmFsdWU7IH1cblxuICBnZXQgeDAoKTogbnVtYmVyIHsgcmV0dXJuIHNpZ25lZCh0aGlzLmNvb3JkaW5hdGVzWzBdKTsgfVxuICBzZXQgeDAodmFsdWU6IG51bWJlcikgeyB0aGlzLmNvb3JkaW5hdGVzWzBdID0gdW5zaWduZWQodmFsdWUpOyB9XG5cbiAgZ2V0IHgxKCk6IG51bWJlciB7IHJldHVybiB0aGlzLngwICsgdGhpcy53OyB9XG5cbiAgZ2V0IGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZXNbM107IH1cbiAgc2V0IGgodmFsdWU6IG51bWJlcikgeyB0aGlzLmNvb3JkaW5hdGVzWzNdID0gdmFsdWU7IH1cblxuICBnZXQgeTAoKTogbnVtYmVyIHsgcmV0dXJuIHNpZ25lZCh0aGlzLmNvb3JkaW5hdGVzWzJdKTsgfVxuICBzZXQgeTAodmFsdWU6IG51bWJlcikgeyB0aGlzLmNvb3JkaW5hdGVzWzJdID0gdW5zaWduZWQodmFsdWUpOyB9XG5cbiAgZ2V0IHkxKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnkwICsgdGhpcy5oOyB9XG5cbiAgd3JpdGUoKTogTW9kdWxlW10ge1xuICAgIGNvbnN0IGEgPSB0aGlzLnJvbS5hc3NlbWJsZXIoKTtcbiAgICBhLnNlZ21lbnQoJzFhJyk7XG4gICAgYS5vcmcoMHg5NjkxICsgKHRoaXMuaWQgPDwgMikpO1xuICAgIGEuYnl0ZSguLi50aGlzLmNvb3JkaW5hdGVzKTtcbiAgICByZXR1cm4gW2EubW9kdWxlKCldO1xuICB9XG59XG4iXX0=